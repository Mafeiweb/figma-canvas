(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ko(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const At={},qn=[],Se=()=>{},$l=()=>!1,As=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),No=e=>e.startsWith("onUpdate:"),Wt=Object.assign,Lo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},I0=Object.prototype.hasOwnProperty,St=(e,t)=>I0.call(e,t),lt=Array.isArray,Jn=e=>Es(e)==="[object Map]",jl=e=>Es(e)==="[object Set]",ct=e=>typeof e=="function",Bt=e=>typeof e=="string",hn=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",Wl=e=>(Et(e)||ct(e))&&ct(e.then)&&ct(e.catch),zl=Object.prototype.toString,Es=e=>zl.call(e),B0=e=>Es(e).slice(8,-1),Kl=e=>Es(e)==="[object Object]",Do=e=>Bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,yi=ko(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ms=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},U0=/-\w/g,_e=Ms(e=>e.replace(U0,t=>t.slice(1).toUpperCase())),V0=/\B([A-Z])/g,An=Ms(e=>e.replace(V0,"-$1").toLowerCase()),Rs=Ms(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ir=Ms(e=>e?`on${Rs(e)}`:""),rn=(e,t)=>!Object.is(e,t),Br=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Yl=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},H0=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Oa;const Fs=()=>Oa||(Oa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Go(e){if(lt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=Bt(i)?z0(i):Go(i);if(s)for(const r in s)t[r]=s[r]}return t}else if(Bt(e)||Et(e))return e}const $0=/;(?![^(]*\))/g,j0=/:([^]+)/,W0=/\/\*[^]*?\*\//g;function z0(e){const t={};return e.replace(W0,"").split($0).forEach(n=>{if(n){const i=n.split(j0);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Bi(e){let t="";if(Bt(e))t=e;else if(lt(e))for(let n=0;n<e.length;n++){const i=Bi(e[n]);i&&(t+=i+" ")}else if(Et(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const K0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Y0=ko(K0);function Xl(e){return!!e||e===""}const ql=e=>!!(e&&e.__v_isRef===!0),Ei=e=>Bt(e)?e:e==null?"":lt(e)||Et(e)&&(e.toString===zl||!ct(e.toString))?ql(e)?Ei(e.value):JSON.stringify(e,Jl,2):String(e),Jl=(e,t)=>ql(t)?Jl(e,t.value):Jn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,s],r)=>(n[Ur(i,r)+" =>"]=s,n),{})}:jl(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ur(n))}:hn(t)?Ur(t):Et(t)&&!lt(t)&&!Kl(t)?String(t):t,Ur=(e,t="")=>{var n;return hn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xt;class Ql{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Xt,!t&&Xt&&(this.index=(Xt.scopes||(Xt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Xt;try{return Xt=this,t()}finally{Xt=n}}}on(){++this._on===1&&(this.prevScope=Xt,Xt=this)}off(){this._on>0&&--this._on===0&&(Xt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Zl(e){return new Ql(e)}function tc(){return Xt}function X0(e,t=!1){Xt&&Xt.cleanups.push(e)}let Tt;const Vr=new WeakSet;class ec{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Xt&&Xt.active&&Xt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Vr.has(this)&&(Vr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ic(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ka(this),sc(this);const t=Tt,n=Ce;Tt=this,Ce=!0;try{return this.fn()}finally{rc(this),Tt=t,Ce=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Uo(t);this.deps=this.depsTail=void 0,ka(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Vr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){co(this)&&this.run()}get dirty(){return co(this)}}let nc=0,bi,vi;function ic(e,t=!1){if(e.flags|=8,t){e.next=vi,vi=e;return}e.next=bi,bi=e}function Io(){nc++}function Bo(){if(--nc>0)return;if(vi){let t=vi;for(vi=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;bi;){let t=bi;for(bi=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function sc(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function rc(e){let t,n=e.depsTail,i=n;for(;i;){const s=i.prevDep;i.version===-1?(i===n&&(n=s),Uo(i),q0(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}e.deps=t,e.depsTail=n}function co(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(oc(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function oc(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Mi)||(e.globalVersion=Mi,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!co(e))))return;e.flags|=2;const t=e.dep,n=Tt,i=Ce;Tt=e,Ce=!0;try{sc(e);const s=e.fn(e._value);(t.version===0||rn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Tt=n,Ce=i,rc(e),e.flags&=-3}}function Uo(e,t=!1){const{dep:n,prevSub:i,nextSub:s}=e;if(i&&(i.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Uo(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function q0(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ce=!0;const ac=[];function Ve(){ac.push(Ce),Ce=!1}function He(){const e=ac.pop();Ce=e===void 0?!0:e}function ka(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Tt;Tt=void 0;try{t()}finally{Tt=n}}}let Mi=0;class J0{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Tt||!Ce||Tt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Tt)n=this.activeLink=new J0(Tt,this),Tt.deps?(n.prevDep=Tt.depsTail,Tt.depsTail.nextDep=n,Tt.depsTail=n):Tt.deps=Tt.depsTail=n,lc(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Tt.depsTail,n.nextDep=void 0,Tt.depsTail.nextDep=n,Tt.depsTail=n,Tt.deps===n&&(Tt.deps=i)}return n}trigger(t){this.version++,Mi++,this.notify(t)}notify(t){Io();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Bo()}}}function lc(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)lc(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ds=new WeakMap,Pn=Symbol(""),ho=Symbol(""),Ri=Symbol("");function qt(e,t,n){if(Ce&&Tt){let i=ds.get(e);i||ds.set(e,i=new Map);let s=i.get(n);s||(i.set(n,s=new Vo),s.map=i,s.key=n),s.track()}}function De(e,t,n,i,s,r){const o=ds.get(e);if(!o){Mi++;return}const a=l=>{l&&l.trigger()};if(Io(),t==="clear")o.forEach(a);else{const l=lt(e),h=l&&Do(n);if(l&&n==="length"){const c=Number(i);o.forEach((f,_)=>{(_==="length"||_===Ri||!hn(_)&&_>=c)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),h&&a(o.get(Ri)),t){case"add":l?h&&a(o.get("length")):(a(o.get(Pn)),Jn(e)&&a(o.get(ho)));break;case"delete":l||(a(o.get(Pn)),Jn(e)&&a(o.get(ho)));break;case"set":Jn(e)&&a(o.get(Pn));break}}Bo()}function Q0(e,t){const n=ds.get(e);return n&&n.get(t)}function Vn(e){const t=pt(e);return t===e?t:(qt(t,"iterate",Ri),pe(e)?t:t.map(Kt))}function Os(e){return qt(e=pt(e),"iterate",Ri),e}const Z0={__proto__:null,[Symbol.iterator](){return Hr(this,Symbol.iterator,Kt)},concat(...e){return Vn(this).concat(...e.map(t=>lt(t)?Vn(t):t))},entries(){return Hr(this,"entries",e=>(e[1]=Kt(e[1]),e))},every(e,t){return Oe(this,"every",e,t,void 0,arguments)},filter(e,t){return Oe(this,"filter",e,t,n=>n.map(Kt),arguments)},find(e,t){return Oe(this,"find",e,t,Kt,arguments)},findIndex(e,t){return Oe(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Oe(this,"findLast",e,t,Kt,arguments)},findLastIndex(e,t){return Oe(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Oe(this,"forEach",e,t,void 0,arguments)},includes(...e){return $r(this,"includes",e)},indexOf(...e){return $r(this,"indexOf",e)},join(e){return Vn(this).join(e)},lastIndexOf(...e){return $r(this,"lastIndexOf",e)},map(e,t){return Oe(this,"map",e,t,void 0,arguments)},pop(){return di(this,"pop")},push(...e){return di(this,"push",e)},reduce(e,...t){return Na(this,"reduce",e,t)},reduceRight(e,...t){return Na(this,"reduceRight",e,t)},shift(){return di(this,"shift")},some(e,t){return Oe(this,"some",e,t,void 0,arguments)},splice(...e){return di(this,"splice",e)},toReversed(){return Vn(this).toReversed()},toSorted(e){return Vn(this).toSorted(e)},toSpliced(...e){return Vn(this).toSpliced(...e)},unshift(...e){return di(this,"unshift",e)},values(){return Hr(this,"values",Kt)}};function Hr(e,t,n){const i=Os(e),s=i[t]();return i!==e&&!pe(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=n(r.value)),r}),s}const td=Array.prototype;function Oe(e,t,n,i,s,r){const o=Os(e),a=o!==e&&!pe(e),l=o[t];if(l!==td[t]){const f=l.apply(e,r);return a?Kt(f):f}let h=n;o!==e&&(a?h=function(f,_){return n.call(this,Kt(f),_,e)}:n.length>2&&(h=function(f,_){return n.call(this,f,_,e)}));const c=l.call(o,h,i);return a&&s?s(c):c}function Na(e,t,n,i){const s=Os(e);let r=n;return s!==e&&(pe(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,Kt(a),l,e)}),s[t](r,...i)}function $r(e,t,n){const i=pt(e);qt(i,"iterate",Ri);const s=i[t](...n);return(s===-1||s===!1)&&jo(n[0])?(n[0]=pt(n[0]),i[t](...n)):s}function di(e,t,n=[]){Ve(),Io();const i=pt(e)[t].apply(e,n);return Bo(),He(),i}const ed=ko("__proto__,__v_isRef,__isVue"),cc=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(hn));function nd(e){hn(e)||(e=String(e));const t=pt(this);return qt(t,"has",e),t.hasOwnProperty(e)}class hc{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?ud:gc:r?fc:uc).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=lt(t);if(!s){let l;if(o&&(l=Z0[n]))return l;if(n==="hasOwnProperty")return nd}const a=Reflect.get(t,n,Dt(t)?t:i);if((hn(n)?cc.has(n):ed(n))||(s||qt(t,"get",n),r))return a;if(Dt(a)){const l=o&&Do(n)?a:a.value;return s&&Et(l)?fo(l):l}return Et(a)?s?fo(a):ge(a):a}}class dc extends hc{constructor(t=!1){super(!1,t)}set(t,n,i,s){let r=t[n];if(!this._isShallow){const l=an(r);if(!pe(i)&&!an(i)&&(r=pt(r),i=pt(i)),!lt(t)&&Dt(r)&&!Dt(i))return l||(r.value=i),!0}const o=lt(t)&&Do(n)?Number(n)<t.length:St(t,n),a=Reflect.set(t,n,i,Dt(t)?t:s);return t===pt(s)&&(o?rn(i,r)&&De(t,"set",n,i):De(t,"add",n,i)),a}deleteProperty(t,n){const i=St(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&i&&De(t,"delete",n,void 0),s}has(t,n){const i=Reflect.has(t,n);return(!hn(n)||!cc.has(n))&&qt(t,"has",n),i}ownKeys(t){return qt(t,"iterate",lt(t)?"length":Pn),Reflect.ownKeys(t)}}class id extends hc{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const sd=new dc,rd=new id,od=new dc(!0);const uo=e=>e,Zi=e=>Reflect.getPrototypeOf(e);function ad(e,t,n){return function(...i){const s=this.__v_raw,r=pt(s),o=Jn(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,h=s[e](...i),c=n?uo:t?us:Kt;return!t&&qt(r,"iterate",l?ho:Pn),{next(){const{value:f,done:_}=h.next();return _?{value:f,done:_}:{value:a?[c(f[0]),c(f[1])]:c(f),done:_}},[Symbol.iterator](){return this}}}}function ts(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ld(e,t){const n={get(s){const r=this.__v_raw,o=pt(r),a=pt(s);e||(rn(s,a)&&qt(o,"get",s),qt(o,"get",a));const{has:l}=Zi(o),h=t?uo:e?us:Kt;if(l.call(o,s))return h(r.get(s));if(l.call(o,a))return h(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!e&&qt(pt(s),"iterate",Pn),s.size},has(s){const r=this.__v_raw,o=pt(r),a=pt(s);return e||(rn(s,a)&&qt(o,"has",s),qt(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=pt(a),h=t?uo:e?us:Kt;return!e&&qt(l,"iterate",Pn),a.forEach((c,f)=>s.call(r,h(c),h(f),o))}};return Wt(n,e?{add:ts("add"),set:ts("set"),delete:ts("delete"),clear:ts("clear")}:{add(s){!t&&!pe(s)&&!an(s)&&(s=pt(s));const r=pt(this);return Zi(r).has.call(r,s)||(r.add(s),De(r,"add",s,s)),this},set(s,r){!t&&!pe(r)&&!an(r)&&(r=pt(r));const o=pt(this),{has:a,get:l}=Zi(o);let h=a.call(o,s);h||(s=pt(s),h=a.call(o,s));const c=l.call(o,s);return o.set(s,r),h?rn(r,c)&&De(o,"set",s,r):De(o,"add",s,r),this},delete(s){const r=pt(this),{has:o,get:a}=Zi(r);let l=o.call(r,s);l||(s=pt(s),l=o.call(r,s)),a&&a.call(r,s);const h=r.delete(s);return l&&De(r,"delete",s,void 0),h},clear(){const s=pt(this),r=s.size!==0,o=s.clear();return r&&De(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=ad(s,e,t)}),n}function Ho(e,t){const n=ld(e,t);return(i,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(St(n,s)&&s in i?n:i,s,r)}const cd={get:Ho(!1,!1)},hd={get:Ho(!1,!0)},dd={get:Ho(!0,!1)};const uc=new WeakMap,fc=new WeakMap,gc=new WeakMap,ud=new WeakMap;function fd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gd(e){return e.__v_skip||!Object.isExtensible(e)?0:fd(B0(e))}function ge(e){return an(e)?e:$o(e,!1,sd,cd,uc)}function pd(e){return $o(e,!1,od,hd,fc)}function fo(e){return $o(e,!0,rd,dd,gc)}function $o(e,t,n,i,s){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=gd(e);if(r===0)return e;const o=s.get(e);if(o)return o;const a=new Proxy(e,r===2?i:n);return s.set(e,a),a}function on(e){return an(e)?on(e.__v_raw):!!(e&&e.__v_isReactive)}function an(e){return!!(e&&e.__v_isReadonly)}function pe(e){return!!(e&&e.__v_isShallow)}function jo(e){return e?!!e.__v_raw:!1}function pt(e){const t=e&&e.__v_raw;return t?pt(t):e}function Wo(e){return!St(e,"__v_skip")&&Object.isExtensible(e)&&Yl(e,"__v_skip",!0),e}const Kt=e=>Et(e)?ge(e):e,us=e=>Et(e)?fo(e):e;function Dt(e){return e?e.__v_isRef===!0:!1}function ce(e){return _d(e,!1)}function _d(e,t){return Dt(e)?e:new md(e,t)}class md{constructor(t,n){this.dep=new Vo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:pt(t),this._value=n?t:Kt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||pe(t)||an(t);t=i?t:pt(t),rn(t,n)&&(this._rawValue=t,this._value=i?t:Kt(t),this.dep.trigger())}}function tn(e){return Dt(e)?e.value:e}const yd={get:(e,t,n)=>t==="__v_raw"?e:tn(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const s=e[t];return Dt(s)&&!Dt(n)?(s.value=n,!0):Reflect.set(e,t,n,i)}};function pc(e){return on(e)?e:new Proxy(e,yd)}function bd(e){const t=lt(e)?new Array(e.length):{};for(const n in e)t[n]=Sd(e,n);return t}class vd{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Q0(pt(this._object),this._key)}}function Sd(e,t,n){const i=e[t];return Dt(i)?i:new vd(e,t,n)}class Cd{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Vo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Tt!==this)return ic(this,!0),!0}get value(){const t=this.dep.track();return oc(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function xd(e,t,n=!1){let i,s;return ct(e)?i=e:(i=e.get,s=e.set),new Cd(i,s,n)}const es={},fs=new WeakMap;let xn;function wd(e,t=!1,n=xn){if(n){let i=fs.get(n);i||fs.set(n,i=[]),i.push(e)}}function Pd(e,t,n=At){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=n,h=g=>s?g:pe(g)||s===!1||s===0?sn(g,1):sn(g);let c,f,_,p,u=!1,y=!1;if(Dt(e)?(f=()=>e.value,u=pe(e)):on(e)?(f=()=>h(e),u=!0):lt(e)?(y=!0,u=e.some(g=>on(g)||pe(g)),f=()=>e.map(g=>{if(Dt(g))return g.value;if(on(g))return h(g);if(ct(g))return l?l(g,2):g()})):ct(e)?t?f=l?()=>l(e,2):e:f=()=>{if(_){Ve();try{_()}finally{He()}}const g=xn;xn=c;try{return l?l(e,3,[p]):e(p)}finally{xn=g}}:f=Se,t&&s){const g=f,v=s===!0?1/0:s;f=()=>sn(g(),v)}const b=tc(),x=()=>{c.stop(),b&&b.active&&Lo(b.effects,c)};if(r&&t){const g=t;t=(...v)=>{g(...v),x()}}let P=y?new Array(e.length).fill(es):es;const d=g=>{if(!(!(c.flags&1)||!c.dirty&&!g))if(t){const v=c.run();if(s||u||(y?v.some((E,N)=>rn(E,P[N])):rn(v,P))){_&&_();const E=xn;xn=c;try{const N=[v,P===es?void 0:y&&P[0]===es?[]:P,p];P=v,l?l(t,3,N):t(...N)}finally{xn=E}}}else c.run()};return a&&a(d),c=new ec(f),c.scheduler=o?()=>o(d,!1):d,p=g=>wd(g,!1,c),_=c.onStop=()=>{const g=fs.get(c);if(g){if(l)l(g,4);else for(const v of g)v();fs.delete(c)}},t?i?d(!0):P=c.run():o?o(d.bind(null,!0),!0):c.run(),x.pause=c.pause.bind(c),x.resume=c.resume.bind(c),x.stop=x,x}function sn(e,t=1/0,n){if(t<=0||!Et(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Dt(e))sn(e.value,t,n);else if(lt(e))for(let i=0;i<e.length;i++)sn(e[i],t,n);else if(jl(e)||Jn(e))e.forEach(i=>{sn(i,t,n)});else if(Kl(e)){for(const i in e)sn(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&sn(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ui(e,t,n,i){try{return i?e(...i):e()}catch(s){ks(s,t,n)}}function Me(e,t,n,i){if(ct(e)){const s=Ui(e,t,n,i);return s&&Wl(s)&&s.catch(r=>{ks(r,t,n)}),s}if(lt(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Me(e[r],t,n,i));return s}}function ks(e,t,n,i=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||At;if(t){let a=t.parent;const l=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,l,h)===!1)return}a=a.parent}if(r){Ve(),Ui(r,null,10,[e,l,h]),He();return}}Td(e,n,s,i,o)}function Td(e,t,n,i=!0,s=!1){if(s)throw e;console.error(e)}const se=[];let Te=-1;const Qn=[];let en=null,Kn=0;const _c=Promise.resolve();let gs=null;function zo(e){const t=gs||_c;return e?t.then(this?e.bind(this):e):t}function Ad(e){let t=Te+1,n=se.length;for(;t<n;){const i=t+n>>>1,s=se[i],r=Fi(s);r<e||r===e&&s.flags&2?t=i+1:n=i}return t}function Ko(e){if(!(e.flags&1)){const t=Fi(e),n=se[se.length-1];!n||!(e.flags&2)&&t>=Fi(n)?se.push(e):se.splice(Ad(t),0,e),e.flags|=1,mc()}}function mc(){gs||(gs=_c.then(bc))}function Ed(e){lt(e)?Qn.push(...e):en&&e.id===-1?en.splice(Kn+1,0,e):e.flags&1||(Qn.push(e),e.flags|=1),mc()}function La(e,t,n=Te+1){for(;n<se.length;n++){const i=se[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;se.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function yc(e){if(Qn.length){const t=[...new Set(Qn)].sort((n,i)=>Fi(n)-Fi(i));if(Qn.length=0,en){en.push(...t);return}for(en=t,Kn=0;Kn<en.length;Kn++){const n=en[Kn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}en=null,Kn=0}}const Fi=e=>e.id==null?e.flags&2?-1:1/0:e.id;function bc(e){const t=Se;try{for(Te=0;Te<se.length;Te++){const n=se[Te];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Ui(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Te<se.length;Te++){const n=se[Te];n&&(n.flags&=-2)}Te=-1,se.length=0,yc(),gs=null,(se.length||Qn.length)&&bc()}}let ve=null,vc=null;function ps(e){const t=ve;return ve=e,vc=e&&e.type.__scopeId||null,t}function Si(e,t=ve,n){if(!t||e._n)return e;const i=(...s)=>{i._d&&ys(-1);const r=ps(t);let o;try{o=e(...s)}finally{ps(r),i._d&&ys(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function vn(e,t,n,i){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(Ve(),Me(l,n,8,[e.el,a,e,t]),He())}}const Md=Symbol("_vte"),Rd=e=>e.__isTeleport,Fd=Symbol("_leaveCb");function Yo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Yo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function $e(e,t){return ct(e)?(()=>Wt({name:e.name},t,{setup:e}))():e}function Sc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const _s=new WeakMap;function Ci(e,t,n,i,s=!1){if(lt(e)){e.forEach((u,y)=>Ci(u,t&&(lt(t)?t[y]:t),n,i,s));return}if(xi(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Ci(e,t,n,i.component.subTree);return}const r=i.shapeFlag&4?ea(i.component):i.el,o=s?null:r,{i:a,r:l}=e,h=t&&t.r,c=a.refs===At?a.refs={}:a.refs,f=a.setupState,_=pt(f),p=f===At?$l:u=>St(_,u);if(h!=null&&h!==l){if(Da(t),Bt(h))c[h]=null,p(h)&&(f[h]=null);else if(Dt(h)){h.value=null;const u=t;u.k&&(c[u.k]=null)}}if(ct(l))Ui(l,a,12,[o,c]);else{const u=Bt(l),y=Dt(l);if(u||y){const b=()=>{if(e.f){const x=u?p(l)?f[l]:c[l]:l.value;if(s)lt(x)&&Lo(x,r);else if(lt(x))x.includes(r)||x.push(r);else if(u)c[l]=[r],p(l)&&(f[l]=c[l]);else{const P=[r];l.value=P,e.k&&(c[e.k]=P)}}else u?(c[l]=o,p(l)&&(f[l]=o)):y&&(l.value=o,e.k&&(c[e.k]=o))};if(o){const x=()=>{b(),_s.delete(e)};x.id=-1,_s.set(e,x),le(x,n)}else Da(e),b()}}}function Da(e){const t=_s.get(e);t&&(t.flags|=8,_s.delete(e))}Fs().requestIdleCallback;Fs().cancelIdleCallback;const xi=e=>!!e.type.__asyncLoader,Cc=e=>e.type.__isKeepAlive;function Od(e,t){xc(e,"a",t)}function kd(e,t){xc(e,"da",t)}function xc(e,t,n=Jt){const i=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ns(t,i,n),n){let s=n.parent;for(;s&&s.parent;)Cc(s.parent.vnode)&&Nd(i,t,n,s),s=s.parent}}function Nd(e,t,n,i){const s=Ns(t,e,i,!0);qo(()=>{Lo(i[t],s)},n)}function Ns(e,t,n=Jt,i=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Ve();const a=Vi(n),l=Me(t,n,e,o);return a(),He(),l});return i?s.unshift(r):s.push(r),r}}const je=e=>(t,n=Jt)=>{(!Ni||e==="sp")&&Ns(e,(...i)=>t(...i),n)},Ld=je("bm"),Oi=je("m"),Dd=je("bu"),Xo=je("u"),wc=je("bum"),qo=je("um"),Gd=je("sp"),Id=je("rtg"),Bd=je("rtc");function Ud(e,t=Jt){Ns("ec",e,t)}const Pc="components";function Ge(e,t){return Hd(Pc,e,!0,t)||e}const Vd=Symbol.for("v-ndc");function Hd(e,t,n=!0,i=!1){const s=ve||Jt;if(s){const r=s.type;if(e===Pc){const a=Ou(r,!1);if(a&&(a===t||a===_e(t)||a===Rs(_e(t))))return r}const o=Ga(s[e]||r[e],t)||Ga(s.appContext[e],t);return!o&&i?r:o}}function Ga(e,t){return e&&(e[t]||e[_e(t)]||e[Rs(_e(t))])}function go(e,t,n,i){let s;const r=n&&n[i],o=lt(e);if(o||Bt(e)){const a=o&&on(e);let l=!1,h=!1;a&&(l=!pe(e),h=an(e),e=Os(e)),s=new Array(e.length);for(let c=0,f=e.length;c<f;c++)s[c]=t(l?h?us(Kt(e[c])):Kt(e[c]):e[c],c,void 0,r&&r[c])}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,r&&r[a])}else if(Et(e))if(e[Symbol.iterator])s=Array.from(e,(a,l)=>t(a,l,void 0,r&&r[l]));else{const a=Object.keys(e);s=new Array(a.length);for(let l=0,h=a.length;l<h;l++){const c=a[l];s[l]=t(e[c],c,l,r&&r[l])}}else s=[];return n&&(n[i]=s),s}const po=e=>e?jc(e)?ea(e):po(e.parent):null,wi=Wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>po(e.parent),$root:e=>po(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Jo(e),$forceUpdate:e=>e.f||(e.f=()=>{Ko(e.update)}),$nextTick:e=>e.n||(e.n=zo.bind(e.proxy)),$watch:e=>du.bind(e)}),jr=(e,t)=>e!==At&&!e.__isScriptSetup&&St(e,t),$d={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=e;let h;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return i[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(jr(i,t))return o[t]=1,i[t];if(s!==At&&St(s,t))return o[t]=2,s[t];if((h=e.propsOptions[0])&&St(h,t))return o[t]=3,r[t];if(n!==At&&St(n,t))return o[t]=4,n[t];_o&&(o[t]=0)}}const c=wi[t];let f,_;if(c)return t==="$attrs"&&qt(e.attrs,"get",""),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==At&&St(n,t))return o[t]=4,n[t];if(_=l.config.globalProperties,St(_,t))return _[t]},set({_:e},t,n){const{data:i,setupState:s,ctx:r}=e;return jr(s,t)?(s[t]=n,!0):i!==At&&St(i,t)?(i[t]=n,!0):St(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:r,type:o}},a){let l,h;return!!(n[a]||e!==At&&a[0]!=="$"&&St(e,a)||jr(t,a)||(l=r[0])&&St(l,a)||St(i,a)||St(wi,a)||St(s.config.globalProperties,a)||(h=o.__cssModules)&&h[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:St(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ia(e){return lt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let _o=!0;function jd(e){const t=Jo(e),n=e.proxy,i=e.ctx;_o=!1,t.beforeCreate&&Ba(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:h,created:c,beforeMount:f,mounted:_,beforeUpdate:p,updated:u,activated:y,deactivated:b,beforeDestroy:x,beforeUnmount:P,destroyed:d,unmounted:g,render:v,renderTracked:E,renderTriggered:N,errorCaptured:S,serverPrefetch:R,expose:T,inheritAttrs:w,components:F,directives:L,filters:W}=t;if(h&&Wd(h,i,null),o)for(const K in o){const H=o[K];ct(H)&&(i[K]=H.bind(n))}if(s){const K=s.call(n,n);Et(K)&&(e.data=ge(K))}if(_o=!0,r)for(const K in r){const H=r[K],it=ct(H)?H.bind(n,n):ct(H.get)?H.get.bind(n,n):Se,j=!ct(H)&&ct(H.set)?H.set.bind(n):Se,st=Li({get:it,set:j});Object.defineProperty(i,K,{enumerable:!0,configurable:!0,get:()=>st.value,set:Q=>st.value=Q})}if(a)for(const K in a)Tc(a[K],i,n,K);if(l){const K=ct(l)?l.call(n):l;Reflect.ownKeys(K).forEach(H=>{Jd(H,K[H])})}c&&Ba(c,e,"c");function J(K,H){lt(H)?H.forEach(it=>K(it.bind(n))):H&&K(H.bind(n))}if(J(Ld,f),J(Oi,_),J(Dd,p),J(Xo,u),J(Od,y),J(kd,b),J(Ud,S),J(Bd,E),J(Id,N),J(wc,P),J(qo,g),J(Gd,R),lt(T))if(T.length){const K=e.exposed||(e.exposed={});T.forEach(H=>{Object.defineProperty(K,H,{get:()=>n[H],set:it=>n[H]=it,enumerable:!0})})}else e.exposed||(e.exposed={});v&&e.render===Se&&(e.render=v),w!=null&&(e.inheritAttrs=w),F&&(e.components=F),L&&(e.directives=L),R&&Sc(e)}function Wd(e,t,n=Se){lt(e)&&(e=mo(e));for(const i in e){const s=e[i];let r;Et(s)?"default"in s?r=Pi(s.from||i,s.default,!0):r=Pi(s.from||i):r=Pi(s),Dt(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function Ba(e,t,n){Me(lt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Tc(e,t,n,i){let s=i.includes(".")?Bc(n,i):()=>n[i];if(Bt(e)){const r=t[e];ct(r)&&Ie(s,r)}else if(ct(e))Ie(s,e.bind(n));else if(Et(e))if(lt(e))e.forEach(r=>Tc(r,t,n,i));else{const r=ct(e.handler)?e.handler.bind(n):t[e.handler];ct(r)&&Ie(s,r,e)}}function Jo(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!n&&!i?l=t:(l={},s.length&&s.forEach(h=>ms(l,h,o,!0)),ms(l,t,o)),Et(t)&&r.set(t,l),l}function ms(e,t,n,i=!1){const{mixins:s,extends:r}=t;r&&ms(e,r,n,!0),s&&s.forEach(o=>ms(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=zd[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const zd={data:Ua,props:Va,emits:Va,methods:mi,computed:mi,beforeCreate:ie,created:ie,beforeMount:ie,mounted:ie,beforeUpdate:ie,updated:ie,beforeDestroy:ie,beforeUnmount:ie,destroyed:ie,unmounted:ie,activated:ie,deactivated:ie,errorCaptured:ie,serverPrefetch:ie,components:mi,directives:mi,watch:Yd,provide:Ua,inject:Kd};function Ua(e,t){return t?e?function(){return Wt(ct(e)?e.call(this,this):e,ct(t)?t.call(this,this):t)}:t:e}function Kd(e,t){return mi(mo(e),mo(t))}function mo(e){if(lt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ie(e,t){return e?[...new Set([].concat(e,t))]:t}function mi(e,t){return e?Wt(Object.create(null),e,t):t}function Va(e,t){return e?lt(e)&&lt(t)?[...new Set([...e,...t])]:Wt(Object.create(null),Ia(e),Ia(t??{})):t}function Yd(e,t){if(!e)return t;if(!t)return e;const n=Wt(Object.create(null),e);for(const i in t)n[i]=ie(e[i],t[i]);return n}function Ac(){return{app:null,config:{isNativeTag:$l,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xd=0;function qd(e,t){return function(i,s=null){ct(i)||(i=Wt({},i)),s!=null&&!Et(s)&&(s=null);const r=Ac(),o=new WeakSet,a=[];let l=!1;const h=r.app={_uid:Xd++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:Nu,get config(){return r.config},set config(c){},use(c,...f){return o.has(c)||(c&&ct(c.install)?(o.add(c),c.install(h,...f)):ct(c)&&(o.add(c),c(h,...f))),h},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),h},component(c,f){return f?(r.components[c]=f,h):r.components[c]},directive(c,f){return f?(r.directives[c]=f,h):r.directives[c]},mount(c,f,_){if(!l){const p=h._ceVNode||Lt(i,s);return p.appContext=r,_===!0?_="svg":_===!1&&(_=void 0),f&&t?t(p,c):e(p,c,_),l=!0,h._container=c,c.__vue_app__=h,ea(p.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Me(a,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(c,f){return r.provides[c]=f,h},runWithContext(c){const f=Tn;Tn=h;try{return c()}finally{Tn=f}}};return h}}let Tn=null;function Jd(e,t){if(Jt){let n=Jt.provides;const i=Jt.parent&&Jt.parent.provides;i===n&&(n=Jt.provides=Object.create(i)),n[e]=t}}function Pi(e,t,n=!1){const i=Gs();if(i||Tn){let s=Tn?Tn._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ct(t)?t.call(i&&i.proxy):t}}function Qd(){return!!(Gs()||Tn)}const Ec={},Mc=()=>Object.create(Ec),Rc=e=>Object.getPrototypeOf(e)===Ec;function Zd(e,t,n,i=!1){const s={},r=Mc();e.propsDefaults=Object.create(null),Fc(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=i?s:pd(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function tu(e,t,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,a=pt(s),[l]=e.propsOptions;let h=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let _=c[f];if(Ls(e.emitsOptions,_))continue;const p=t[_];if(l)if(St(r,_))p!==r[_]&&(r[_]=p,h=!0);else{const u=_e(_);s[u]=yo(l,a,u,p,e,!1)}else p!==r[_]&&(r[_]=p,h=!0)}}}else{Fc(e,t,s,r)&&(h=!0);let c;for(const f in a)(!t||!St(t,f)&&((c=An(f))===f||!St(t,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(s[f]=yo(l,a,f,void 0,e,!0)):delete s[f]);if(r!==a)for(const f in r)(!t||!St(t,f))&&(delete r[f],h=!0)}h&&De(e.attrs,"set","")}function Fc(e,t,n,i){const[s,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(yi(l))continue;const h=t[l];let c;s&&St(s,c=_e(l))?!r||!r.includes(c)?n[c]=h:(a||(a={}))[c]=h:Ls(e.emitsOptions,l)||(!(l in i)||h!==i[l])&&(i[l]=h,o=!0)}if(r){const l=pt(n),h=a||At;for(let c=0;c<r.length;c++){const f=r[c];n[f]=yo(s,l,f,h[f],e,!St(h,f))}}return o}function yo(e,t,n,i,s,r){const o=e[n];if(o!=null){const a=St(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ct(l)){const{propsDefaults:h}=s;if(n in h)i=h[n];else{const c=Vi(s);i=h[n]=l.call(null,t),c()}}else i=l;s.ce&&s.ce._setProp(n,i)}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===An(n))&&(i=!0))}return i}const eu=new WeakMap;function Oc(e,t,n=!1){const i=n?eu:t.propsCache,s=i.get(e);if(s)return s;const r=e.props,o={},a=[];let l=!1;if(!ct(e)){const c=f=>{l=!0;const[_,p]=Oc(f,t,!0);Wt(o,_),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!l)return Et(e)&&i.set(e,qn),qn;if(lt(r))for(let c=0;c<r.length;c++){const f=_e(r[c]);Ha(f)&&(o[f]=At)}else if(r)for(const c in r){const f=_e(c);if(Ha(f)){const _=r[c],p=o[f]=lt(_)||ct(_)?{type:_}:Wt({},_),u=p.type;let y=!1,b=!0;if(lt(u))for(let x=0;x<u.length;++x){const P=u[x],d=ct(P)&&P.name;if(d==="Boolean"){y=!0;break}else d==="String"&&(b=!1)}else y=ct(u)&&u.name==="Boolean";p[0]=y,p[1]=b,(y||St(p,"default"))&&a.push(f)}}const h=[o,a];return Et(e)&&i.set(e,h),h}function Ha(e){return e[0]!=="$"&&!yi(e)}const Qo=e=>e==="_"||e==="_ctx"||e==="$stable",Zo=e=>lt(e)?e.map(Ae):[Ae(e)],nu=(e,t,n)=>{if(t._n)return t;const i=Si((...s)=>Zo(t(...s)),n);return i._c=!1,i},kc=(e,t,n)=>{const i=e._ctx;for(const s in e){if(Qo(s))continue;const r=e[s];if(ct(r))t[s]=nu(s,r,i);else if(r!=null){const o=Zo(r);t[s]=()=>o}}},Nc=(e,t)=>{const n=Zo(t);e.slots.default=()=>n},Lc=(e,t,n)=>{for(const i in t)(n||!Qo(i))&&(e[i]=t[i])},iu=(e,t,n)=>{const i=e.slots=Mc();if(e.vnode.shapeFlag&32){const s=t._;s?(Lc(i,t,n),n&&Yl(i,"_",s,!0)):kc(t,i)}else t&&Nc(e,t)},su=(e,t,n)=>{const{vnode:i,slots:s}=e;let r=!0,o=At;if(i.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:Lc(s,t,n):(r=!t.$stable,kc(t,s)),o=t}else t&&(Nc(e,t),o={default:1});if(r)for(const a in s)!Qo(a)&&o[a]==null&&delete s[a]},le=bu;function ru(e){return ou(e)}function ou(e,t){const n=Fs();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:h,setElementText:c,parentNode:f,nextSibling:_,setScopeId:p=Se,insertStaticContent:u}=e,y=(C,A,O,B=null,D=null,I=null,q=void 0,Y=null,z=!!A.dynamicChildren)=>{if(C===A)return;C&&!ui(C,A)&&(B=M(C),Q(C,D,I,!0),C=null),A.patchFlag===-2&&(z=!1,A.dynamicChildren=null);const{type:$,ref:nt,shapeFlag:X}=A;switch($){case Ds:b(C,A,O,B);break;case ln:x(C,A,O,B);break;case Kr:C==null&&P(A,O,B,q);break;case fe:F(C,A,O,B,D,I,q,Y,z);break;default:X&1?v(C,A,O,B,D,I,q,Y,z):X&6?L(C,A,O,B,D,I,q,Y,z):(X&64||X&128)&&$.process(C,A,O,B,D,I,q,Y,z,yt)}nt!=null&&D?Ci(nt,C&&C.ref,I,A||C,!A):nt==null&&C&&C.ref!=null&&Ci(C.ref,null,I,C,!0)},b=(C,A,O,B)=>{if(C==null)i(A.el=a(A.children),O,B);else{const D=A.el=C.el;A.children!==C.children&&h(D,A.children)}},x=(C,A,O,B)=>{C==null?i(A.el=l(A.children||""),O,B):A.el=C.el},P=(C,A,O,B)=>{[C.el,C.anchor]=u(C.children,A,O,B,C.el,C.anchor)},d=({el:C,anchor:A},O,B)=>{let D;for(;C&&C!==A;)D=_(C),i(C,O,B),C=D;i(A,O,B)},g=({el:C,anchor:A})=>{let O;for(;C&&C!==A;)O=_(C),s(C),C=O;s(A)},v=(C,A,O,B,D,I,q,Y,z)=>{A.type==="svg"?q="svg":A.type==="math"&&(q="mathml"),C==null?E(A,O,B,D,I,q,Y,z):R(C,A,D,I,q,Y,z)},E=(C,A,O,B,D,I,q,Y)=>{let z,$;const{props:nt,shapeFlag:X,transition:tt,dirs:ot}=C;if(z=C.el=o(C.type,I,nt&&nt.is,nt),X&8?c(z,C.children):X&16&&S(C.children,z,null,B,D,Wr(C,I),q,Y),ot&&vn(C,null,B,"created"),N(z,C,C.scopeId,q,B),nt){for(const Ct in nt)Ct!=="value"&&!yi(Ct)&&r(z,Ct,null,nt[Ct],I,B);"value"in nt&&r(z,"value",null,nt.value,I),($=nt.onVnodeBeforeMount)&&Pe($,B,C)}ot&&vn(C,null,B,"beforeMount");const ft=au(D,tt);ft&&tt.beforeEnter(z),i(z,A,O),(($=nt&&nt.onVnodeMounted)||ft||ot)&&le(()=>{$&&Pe($,B,C),ft&&tt.enter(z),ot&&vn(C,null,B,"mounted")},D)},N=(C,A,O,B,D)=>{if(O&&p(C,O),B)for(let I=0;I<B.length;I++)p(C,B[I]);if(D){let I=D.subTree;if(A===I||Vc(I.type)&&(I.ssContent===A||I.ssFallback===A)){const q=D.vnode;N(C,q,q.scopeId,q.slotScopeIds,D.parent)}}},S=(C,A,O,B,D,I,q,Y,z=0)=>{for(let $=z;$<C.length;$++){const nt=C[$]=Y?nn(C[$]):Ae(C[$]);y(null,nt,A,O,B,D,I,q,Y)}},R=(C,A,O,B,D,I,q)=>{const Y=A.el=C.el;let{patchFlag:z,dynamicChildren:$,dirs:nt}=A;z|=C.patchFlag&16;const X=C.props||At,tt=A.props||At;let ot;if(O&&Sn(O,!1),(ot=tt.onVnodeBeforeUpdate)&&Pe(ot,O,A,C),nt&&vn(A,C,O,"beforeUpdate"),O&&Sn(O,!0),(X.innerHTML&&tt.innerHTML==null||X.textContent&&tt.textContent==null)&&c(Y,""),$?T(C.dynamicChildren,$,Y,O,B,Wr(A,D),I):q||H(C,A,Y,null,O,B,Wr(A,D),I,!1),z>0){if(z&16)w(Y,X,tt,O,D);else if(z&2&&X.class!==tt.class&&r(Y,"class",null,tt.class,D),z&4&&r(Y,"style",X.style,tt.style,D),z&8){const ft=A.dynamicProps;for(let Ct=0;Ct<ft.length;Ct++){const bt=ft[Ct],Yt=X[bt],$t=tt[bt];($t!==Yt||bt==="value")&&r(Y,bt,Yt,$t,D,O)}}z&1&&C.children!==A.children&&c(Y,A.children)}else!q&&$==null&&w(Y,X,tt,O,D);((ot=tt.onVnodeUpdated)||nt)&&le(()=>{ot&&Pe(ot,O,A,C),nt&&vn(A,C,O,"updated")},B)},T=(C,A,O,B,D,I,q)=>{for(let Y=0;Y<A.length;Y++){const z=C[Y],$=A[Y],nt=z.el&&(z.type===fe||!ui(z,$)||z.shapeFlag&198)?f(z.el):O;y(z,$,nt,null,B,D,I,q,!0)}},w=(C,A,O,B,D)=>{if(A!==O){if(A!==At)for(const I in A)!yi(I)&&!(I in O)&&r(C,I,A[I],null,D,B);for(const I in O){if(yi(I))continue;const q=O[I],Y=A[I];q!==Y&&I!=="value"&&r(C,I,Y,q,D,B)}"value"in O&&r(C,"value",A.value,O.value,D)}},F=(C,A,O,B,D,I,q,Y,z)=>{const $=A.el=C?C.el:a(""),nt=A.anchor=C?C.anchor:a("");let{patchFlag:X,dynamicChildren:tt,slotScopeIds:ot}=A;ot&&(Y=Y?Y.concat(ot):ot),C==null?(i($,O,B),i(nt,O,B),S(A.children||[],O,nt,D,I,q,Y,z)):X>0&&X&64&&tt&&C.dynamicChildren?(T(C.dynamicChildren,tt,O,D,I,q,Y),(A.key!=null||D&&A===D.subTree)&&Dc(C,A,!0)):H(C,A,O,nt,D,I,q,Y,z)},L=(C,A,O,B,D,I,q,Y,z)=>{A.slotScopeIds=Y,C==null?A.shapeFlag&512?D.ctx.activate(A,O,B,q,z):W(A,O,B,D,I,q,z):U(C,A,z)},W=(C,A,O,B,D,I,q)=>{const Y=C.component=Au(C,B,D);if(Cc(C)&&(Y.ctx.renderer=yt),Eu(Y,!1,q),Y.asyncDep){if(D&&D.registerDep(Y,J,q),!C.el){const z=Y.subTree=Lt(ln);x(null,z,A,O),C.placeholder=z.el}}else J(Y,C,A,O,D,I,q)},U=(C,A,O)=>{const B=A.component=C.component;if(mu(C,A,O))if(B.asyncDep&&!B.asyncResolved){K(B,A,O);return}else B.next=A,B.update();else A.el=C.el,B.vnode=A},J=(C,A,O,B,D,I,q)=>{const Y=()=>{if(C.isMounted){let{next:X,bu:tt,u:ot,parent:ft,vnode:Ct}=C;{const te=Gc(C);if(te){X&&(X.el=Ct.el,K(C,X,q)),te.asyncDep.then(()=>{C.isUnmounted||Y()});return}}let bt=X,Yt;Sn(C,!1),X?(X.el=Ct.el,K(C,X,q)):X=Ct,tt&&Br(tt),(Yt=X.props&&X.props.onVnodeBeforeUpdate)&&Pe(Yt,ft,X,Ct),Sn(C,!0);const $t=zr(C),ae=C.subTree;C.subTree=$t,y(ae,$t,f(ae.el),M(ae),C,D,I),X.el=$t.el,bt===null&&yu(C,$t.el),ot&&le(ot,D),(Yt=X.props&&X.props.onVnodeUpdated)&&le(()=>Pe(Yt,ft,X,Ct),D)}else{let X;const{el:tt,props:ot}=A,{bm:ft,m:Ct,parent:bt,root:Yt,type:$t}=C,ae=xi(A);if(Sn(C,!1),ft&&Br(ft),!ae&&(X=ot&&ot.onVnodeBeforeMount)&&Pe(X,bt,A),Sn(C,!0),tt&&wt){const te=()=>{C.subTree=zr(C),wt(tt,C.subTree,C,D,null)};ae&&$t.__asyncHydrate?$t.__asyncHydrate(tt,C,te):te()}else{Yt.ce&&Yt.ce._def.shadowRoot!==!1&&Yt.ce._injectChildStyle($t);const te=C.subTree=zr(C);y(null,te,O,B,C,D,I),A.el=te.el}if(Ct&&le(Ct,D),!ae&&(X=ot&&ot.onVnodeMounted)){const te=A;le(()=>Pe(X,bt,te),D)}(A.shapeFlag&256||bt&&xi(bt.vnode)&&bt.vnode.shapeFlag&256)&&C.a&&le(C.a,D),C.isMounted=!0,A=O=B=null}};C.scope.on();const z=C.effect=new ec(Y);C.scope.off();const $=C.update=z.run.bind(z),nt=C.job=z.runIfDirty.bind(z);nt.i=C,nt.id=C.uid,z.scheduler=()=>Ko(nt),Sn(C,!0),$()},K=(C,A,O)=>{A.component=C;const B=C.vnode.props;C.vnode=A,C.next=null,tu(C,A.props,B,O),su(C,A.children,O),Ve(),La(C),He()},H=(C,A,O,B,D,I,q,Y,z=!1)=>{const $=C&&C.children,nt=C?C.shapeFlag:0,X=A.children,{patchFlag:tt,shapeFlag:ot}=A;if(tt>0){if(tt&128){j($,X,O,B,D,I,q,Y,z);return}else if(tt&256){it($,X,O,B,D,I,q,Y,z);return}}ot&8?(nt&16&&Ft($,D,I),X!==$&&c(O,X)):nt&16?ot&16?j($,X,O,B,D,I,q,Y,z):Ft($,D,I,!0):(nt&8&&c(O,""),ot&16&&S(X,O,B,D,I,q,Y,z))},it=(C,A,O,B,D,I,q,Y,z)=>{C=C||qn,A=A||qn;const $=C.length,nt=A.length,X=Math.min($,nt);let tt;for(tt=0;tt<X;tt++){const ot=A[tt]=z?nn(A[tt]):Ae(A[tt]);y(C[tt],ot,O,null,D,I,q,Y,z)}$>nt?Ft(C,D,I,!0,!1,X):S(A,O,B,D,I,q,Y,z,X)},j=(C,A,O,B,D,I,q,Y,z)=>{let $=0;const nt=A.length;let X=C.length-1,tt=nt-1;for(;$<=X&&$<=tt;){const ot=C[$],ft=A[$]=z?nn(A[$]):Ae(A[$]);if(ui(ot,ft))y(ot,ft,O,null,D,I,q,Y,z);else break;$++}for(;$<=X&&$<=tt;){const ot=C[X],ft=A[tt]=z?nn(A[tt]):Ae(A[tt]);if(ui(ot,ft))y(ot,ft,O,null,D,I,q,Y,z);else break;X--,tt--}if($>X){if($<=tt){const ot=tt+1,ft=ot<nt?A[ot].el:B;for(;$<=tt;)y(null,A[$]=z?nn(A[$]):Ae(A[$]),O,ft,D,I,q,Y,z),$++}}else if($>tt)for(;$<=X;)Q(C[$],D,I,!0),$++;else{const ot=$,ft=$,Ct=new Map;for($=ft;$<=tt;$++){const ee=A[$]=z?nn(A[$]):Ae(A[$]);ee.key!=null&&Ct.set(ee.key,$)}let bt,Yt=0;const $t=tt-ft+1;let ae=!1,te=0;const Xe=new Array($t);for($=0;$<$t;$++)Xe[$]=0;for($=ot;$<=X;$++){const ee=C[$];if(Yt>=$t){Q(ee,D,I,!0);continue}let re;if(ee.key!=null)re=Ct.get(ee.key);else for(bt=ft;bt<=tt;bt++)if(Xe[bt-ft]===0&&ui(ee,A[bt])){re=bt;break}re===void 0?Q(ee,D,I,!0):(Xe[re-ft]=$+1,re>=te?te=re:ae=!0,y(ee,A[re],O,null,D,I,q,Y,z),Yt++)}const Yi=ae?lu(Xe):qn;for(bt=Yi.length-1,$=$t-1;$>=0;$--){const ee=ft+$,re=A[ee],qe=A[ee+1],Dn=ee+1<nt?qe.el||qe.placeholder:B;Xe[$]===0?y(null,re,O,Dn,D,I,q,Y,z):ae&&(bt<0||$!==Yi[bt]?st(re,O,Dn,2):bt--)}}},st=(C,A,O,B,D=null)=>{const{el:I,type:q,transition:Y,children:z,shapeFlag:$}=C;if($&6){st(C.component.subTree,A,O,B);return}if($&128){C.suspense.move(A,O,B);return}if($&64){q.move(C,A,O,yt);return}if(q===fe){i(I,A,O);for(let X=0;X<z.length;X++)st(z[X],A,O,B);i(C.anchor,A,O);return}if(q===Kr){d(C,A,O);return}if(B!==2&&$&1&&Y)if(B===0)Y.beforeEnter(I),i(I,A,O),le(()=>Y.enter(I),D);else{const{leave:X,delayLeave:tt,afterLeave:ot}=Y,ft=()=>{C.ctx.isUnmounted?s(I):i(I,A,O)},Ct=()=>{I._isLeaving&&I[Fd](!0),X(I,()=>{ft(),ot&&ot()})};tt?tt(I,ft,Ct):Ct()}else i(I,A,O)},Q=(C,A,O,B=!1,D=!1)=>{const{type:I,props:q,ref:Y,children:z,dynamicChildren:$,shapeFlag:nt,patchFlag:X,dirs:tt,cacheIndex:ot}=C;if(X===-2&&(D=!1),Y!=null&&(Ve(),Ci(Y,null,O,C,!0),He()),ot!=null&&(A.renderCache[ot]=void 0),nt&256){A.ctx.deactivate(C);return}const ft=nt&1&&tt,Ct=!xi(C);let bt;if(Ct&&(bt=q&&q.onVnodeBeforeUnmount)&&Pe(bt,A,C),nt&6)zt(C.component,O,B);else{if(nt&128){C.suspense.unmount(O,B);return}ft&&vn(C,null,A,"beforeUnmount"),nt&64?C.type.remove(C,A,O,yt,B):$&&!$.hasOnce&&(I!==fe||X>0&&X&64)?Ft($,A,O,!1,!0):(I===fe&&X&384||!D&&nt&16)&&Ft(z,A,O),B&&dt(C)}(Ct&&(bt=q&&q.onVnodeUnmounted)||ft)&&le(()=>{bt&&Pe(bt,A,C),ft&&vn(C,null,A,"unmounted")},O)},dt=C=>{const{type:A,el:O,anchor:B,transition:D}=C;if(A===fe){Zt(O,B);return}if(A===Kr){g(C);return}const I=()=>{s(O),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(C.shapeFlag&1&&D&&!D.persisted){const{leave:q,delayLeave:Y}=D,z=()=>q(O,I);Y?Y(C.el,I,z):z()}else I()},Zt=(C,A)=>{let O;for(;C!==A;)O=_(C),s(C),C=O;s(A)},zt=(C,A,O)=>{const{bum:B,scope:D,job:I,subTree:q,um:Y,m:z,a:$}=C;$a(z),$a($),B&&Br(B),D.stop(),I&&(I.flags|=8,Q(q,C,A,O)),Y&&le(Y,A),le(()=>{C.isUnmounted=!0},A)},Ft=(C,A,O,B=!1,D=!1,I=0)=>{for(let q=I;q<C.length;q++)Q(C[q],A,O,B,D)},M=C=>{if(C.shapeFlag&6)return M(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const A=_(C.anchor||C.el),O=A&&A[Md];return O?_(O):A};let V=!1;const et=(C,A,O)=>{C==null?A._vnode&&Q(A._vnode,null,null,!0):y(A._vnode||null,C,A,null,null,null,O),A._vnode=C,V||(V=!0,La(),yc(),V=!1)},yt={p:y,um:Q,m:st,r:dt,mt:W,mc:S,pc:H,pbc:T,n:M,o:e};let mt,wt;return t&&([mt,wt]=t(yt)),{render:et,hydrate:mt,createApp:qd(et,mt)}}function Wr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Sn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function au(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Dc(e,t,n=!1){const i=e.children,s=t.children;if(lt(i)&&lt(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=nn(s[r]),a.el=o.el),!n&&a.patchFlag!==-2&&Dc(o,a)),a.type===Ds&&a.patchFlag!==-1&&(a.el=o.el),a.type===ln&&!a.el&&(a.el=o.el)}}function lu(e){const t=e.slice(),n=[0];let i,s,r,o,a;const l=e.length;for(i=0;i<l;i++){const h=e[i];if(h!==0){if(s=n[n.length-1],e[s]<h){t[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<h?r=a+1:o=a;h<e[n[r]]&&(r>0&&(t[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function Gc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Gc(t)}function $a(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const cu=Symbol.for("v-scx"),hu=()=>Pi(cu);function Ie(e,t,n){return Ic(e,t,n)}function Ic(e,t,n=At){const{immediate:i,deep:s,flush:r,once:o}=n,a=Wt({},n),l=t&&i||!t&&r!=="post";let h;if(Ni){if(r==="sync"){const p=hu();h=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Se,p.resume=Se,p.pause=Se,p}}const c=Jt;a.call=(p,u,y)=>Me(p,c,u,y);let f=!1;r==="post"?a.scheduler=p=>{le(p,c&&c.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(p,u)=>{u?p():Ko(p)}),a.augmentJob=p=>{t&&(p.flags|=4),f&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const _=Pd(e,t,a);return Ni&&(h?h.push(_):l&&_()),_}function du(e,t,n){const i=this.proxy,s=Bt(e)?e.includes(".")?Bc(i,e):()=>i[e]:e.bind(i,i);let r;ct(t)?r=t:(r=t.handler,n=t);const o=Vi(this),a=Ic(s,r.bind(i),n);return o(),a}function Bc(e,t){const n=t.split(".");return()=>{let i=e;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}const uu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${_e(t)}Modifiers`]||e[`${An(t)}Modifiers`];function fu(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||At;let s=n;const r=t.startsWith("update:"),o=r&&uu(i,t.slice(7));o&&(o.trim&&(s=n.map(c=>Bt(c)?c.trim():c)),o.number&&(s=n.map(H0)));let a,l=i[a=Ir(t)]||i[a=Ir(_e(t))];!l&&r&&(l=i[a=Ir(An(t))]),l&&Me(l,e,6,s);const h=i[a+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Me(h,e,6,s)}}const gu=new WeakMap;function Uc(e,t,n=!1){const i=n?gu:t.emitsCache,s=i.get(e);if(s!==void 0)return s;const r=e.emits;let o={},a=!1;if(!ct(e)){const l=h=>{const c=Uc(h,t,!0);c&&(a=!0,Wt(o,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Et(e)&&i.set(e,null),null):(lt(r)?r.forEach(l=>o[l]=null):Wt(o,r),Et(e)&&i.set(e,o),o)}function Ls(e,t){return!e||!As(t)?!1:(t=t.slice(2).replace(/Once$/,""),St(e,t[0].toLowerCase()+t.slice(1))||St(e,An(t))||St(e,t))}function zr(e){const{type:t,vnode:n,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:h,renderCache:c,props:f,data:_,setupState:p,ctx:u,inheritAttrs:y}=e,b=ps(e);let x,P;try{if(n.shapeFlag&4){const g=s||i,v=g;x=Ae(h.call(v,g,c,f,p,_,u)),P=a}else{const g=t;x=Ae(g.length>1?g(f,{attrs:a,slots:o,emit:l}):g(f,null)),P=t.props?a:pu(a)}}catch(g){Ti.length=0,ks(g,e,1),x=Lt(ln)}let d=x;if(P&&y!==!1){const g=Object.keys(P),{shapeFlag:v}=d;g.length&&v&7&&(r&&g.some(No)&&(P=_u(P,r)),d=Zn(d,P,!1,!0))}return n.dirs&&(d=Zn(d,null,!1,!0),d.dirs=d.dirs?d.dirs.concat(n.dirs):n.dirs),n.transition&&Yo(d,n.transition),x=d,ps(b),x}const pu=e=>{let t;for(const n in e)(n==="class"||n==="style"||As(n))&&((t||(t={}))[n]=e[n]);return t},_u=(e,t)=>{const n={};for(const i in e)(!No(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function mu(e,t,n){const{props:i,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?ja(i,o,h):!!o;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const _=c[f];if(o[_]!==i[_]&&!Ls(h,_))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?ja(i,o,h):!0:!!o;return!1}function ja(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==e[r]&&!Ls(n,r))return!0}return!1}function yu({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const Vc=e=>e.__isSuspense;function bu(e,t){t&&t.pendingBranch?lt(e)?t.effects.push(...e):t.effects.push(e):Ed(e)}const fe=Symbol.for("v-fgt"),Ds=Symbol.for("v-txt"),ln=Symbol.for("v-cmt"),Kr=Symbol.for("v-stc"),Ti=[];let he=null;function It(e=!1){Ti.push(he=e?null:[])}function vu(){Ti.pop(),he=Ti[Ti.length-1]||null}let ki=1;function ys(e,t=!1){ki+=e,e<0&&he&&t&&(he.hasOnce=!0)}function Hc(e){return e.dynamicChildren=ki>0?he||qn:null,vu(),ki>0&&he&&he.push(e),e}function Be(e,t,n,i,s,r){return Hc(Ot(e,t,n,i,s,r,!0))}function be(e,t,n,i,s){return Hc(Lt(e,t,n,i,s,!0))}function bs(e){return e?e.__v_isVNode===!0:!1}function ui(e,t){return e.type===t.type&&e.key===t.key}const $c=({key:e})=>e??null,as=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Bt(e)||Dt(e)||ct(e)?{i:ve,r:e,k:t,f:!!n}:e:null);function Ot(e,t=null,n=null,i=0,s=null,r=e===fe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$c(t),ref:t&&as(t),scopeId:vc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ve};return a?(ta(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Bt(n)?8:16),ki>0&&!o&&he&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&he.push(l),l}const Lt=Su;function Su(e,t=null,n=null,i=0,s=null,r=!1){if((!e||e===Vd)&&(e=ln),bs(e)){const a=Zn(e,t,!0);return n&&ta(a,n),ki>0&&!r&&he&&(a.shapeFlag&6?he[he.indexOf(e)]=a:he.push(a)),a.patchFlag=-2,a}if(ku(e)&&(e=e.__vccOpts),t){t=Cu(t);let{class:a,style:l}=t;a&&!Bt(a)&&(t.class=Bi(a)),Et(l)&&(jo(l)&&!lt(l)&&(l=Wt({},l)),t.style=Go(l))}const o=Bt(e)?1:Vc(e)?128:Rd(e)?64:Et(e)?4:ct(e)?2:0;return Ot(e,t,n,i,s,o,r,!0)}function Cu(e){return e?jo(e)||Rc(e)?Wt({},e):e:null}function Zn(e,t,n=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=e,h=t?wu(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&$c(h),ref:t&&t.ref?n&&r?lt(r)?r.concat(as(t)):[r,as(t)]:as(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fe?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Zn(e.ssContent),ssFallback:e.ssFallback&&Zn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&i&&Yo(c,l.clone(c)),c}function xu(e=" ",t=0){return Lt(Ds,null,e,t)}function Yn(e="",t=!1){return t?(It(),be(ln,null,e)):Lt(ln,null,e)}function Ae(e){return e==null||typeof e=="boolean"?Lt(ln):lt(e)?Lt(fe,null,e.slice()):bs(e)?nn(e):Lt(Ds,null,String(e))}function nn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Zn(e)}function ta(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(lt(t))n=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),ta(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Rc(t)?t._ctx=ve:s===3&&ve&&(ve.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ct(t)?(t={default:t,_ctx:ve},n=32):(t=String(t),i&64?(n=16,t=[xu(t)]):n=8);e.children=t,e.shapeFlag|=n}function wu(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=Bi([t.class,i.class]));else if(s==="style")t.style=Go([t.style,i.style]);else if(As(s)){const r=t[s],o=i[s];o&&r!==o&&!(lt(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=i[s])}return t}function Pe(e,t,n,i=null){Me(e,t,7,[n,i])}const Pu=Ac();let Tu=0;function Au(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||Pu,r={uid:Tu++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ql(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Oc(i,s),emitsOptions:Uc(i,s),emit:null,emitted:null,propsDefaults:At,inheritAttrs:i.inheritAttrs,ctx:At,data:At,props:At,attrs:At,slots:At,refs:At,setupState:At,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=fu.bind(null,r),e.ce&&e.ce(r),r}let Jt=null;const Gs=()=>Jt||ve;let vs,bo;{const e=Fs(),t=(n,i)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};vs=t("__VUE_INSTANCE_SETTERS__",n=>Jt=n),bo=t("__VUE_SSR_SETTERS__",n=>Ni=n)}const Vi=e=>{const t=Jt;return vs(e),e.scope.on(),()=>{e.scope.off(),vs(t)}},Wa=()=>{Jt&&Jt.scope.off(),vs(null)};function jc(e){return e.vnode.shapeFlag&4}let Ni=!1;function Eu(e,t=!1,n=!1){t&&bo(t);const{props:i,children:s}=e.vnode,r=jc(e);Zd(e,i,r,t),iu(e,s,n||t);const o=r?Mu(e,t):void 0;return t&&bo(!1),o}function Mu(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,$d);const{setup:i}=n;if(i){Ve();const s=e.setupContext=i.length>1?Fu(e):null,r=Vi(e),o=Ui(i,e,0,[e.props,s]),a=Wl(o);if(He(),r(),(a||e.sp)&&!xi(e)&&Sc(e),a){if(o.then(Wa,Wa),t)return o.then(l=>{za(e,l,t)}).catch(l=>{ks(l,e,0)});e.asyncDep=o}else za(e,o,t)}else Wc(e,t)}function za(e,t,n){ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=pc(t)),Wc(e,n)}let Ka;function Wc(e,t,n){const i=e.type;if(!e.render){if(!t&&Ka&&!i.render){const s=i.template||Jo(e).template;if(s){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,h=Wt(Wt({isCustomElement:r,delimiters:a},o),l);i.render=Ka(s,h)}}e.render=i.render||Se}{const s=Vi(e);Ve();try{jd(e)}finally{He(),s()}}}const Ru={get(e,t){return qt(e,"get",""),e[t]}};function Fu(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Ru),slots:e.slots,emit:e.emit,expose:t}}function ea(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(pc(Wo(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in wi)return wi[n](e)},has(t,n){return n in t||n in wi}})):e.proxy}function Ou(e,t=!0){return ct(e)?e.displayName||e.name:e.name||t&&e.__name}function ku(e){return ct(e)&&"__vccOpts"in e}const Li=(e,t)=>xd(e,t,Ni);function zc(e,t,n){try{ys(-1);const i=arguments.length;return i===2?Et(t)&&!lt(t)?bs(t)?Lt(e,null,[t]):Lt(e,t):Lt(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&bs(n)&&(n=[n]),Lt(e,t,n))}finally{ys(1)}}const Nu="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vo;const Ya=typeof window<"u"&&window.trustedTypes;if(Ya)try{vo=Ya.createPolicy("vue",{createHTML:e=>e})}catch{}const Kc=vo?e=>vo.createHTML(e):e=>e,Lu="http://www.w3.org/2000/svg",Du="http://www.w3.org/1998/Math/MathML",Le=typeof document<"u"?document:null,Xa=Le&&Le.createElement("template"),Gu={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const s=t==="svg"?Le.createElementNS(Lu,e):t==="mathml"?Le.createElementNS(Du,e):n?Le.createElement(e,{is:n}):Le.createElement(e);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>Le.createTextNode(e),createComment:e=>Le.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Le.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,s,r){const o=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{Xa.innerHTML=Kc(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const a=Xa.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Iu=Symbol("_vtc");function Bu(e,t,n){const i=e[Iu];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const qa=Symbol("_vod"),Uu=Symbol("_vsh"),Vu=Symbol(""),Hu=/(?:^|;)\s*display\s*:/;function $u(e,t,n){const i=e.style,s=Bt(n);let r=!1;if(n&&!s){if(t)if(Bt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ls(i,a,"")}else for(const o in t)n[o]==null&&ls(i,o,"");for(const o in n)o==="display"&&(r=!0),ls(i,o,n[o])}else if(s){if(t!==n){const o=i[Vu];o&&(n+=";"+o),i.cssText=n,r=Hu.test(n)}}else t&&e.removeAttribute("style");qa in e&&(e[qa]=r?i.display:"",e[Uu]&&(i.display="none"))}const Ja=/\s*!important$/;function ls(e,t,n){if(lt(n))n.forEach(i=>ls(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=ju(e,t);Ja.test(n)?e.setProperty(An(i),n.replace(Ja,""),"important"):e[i]=n}}const Qa=["Webkit","Moz","ms"],Yr={};function ju(e,t){const n=Yr[t];if(n)return n;let i=_e(t);if(i!=="filter"&&i in e)return Yr[t]=i;i=Rs(i);for(let s=0;s<Qa.length;s++){const r=Qa[s]+i;if(r in e)return Yr[t]=r}return t}const Za="http://www.w3.org/1999/xlink";function tl(e,t,n,i,s,r=Y0(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Za,t.slice(6,t.length)):e.setAttributeNS(Za,t,n):n==null||r&&!Xl(n)?e.removeAttribute(t):e.setAttribute(t,r?"":hn(n)?String(n):n)}function el(e,t,n,i,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Kc(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Xl(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(s||t)}function Wu(e,t,n,i){e.addEventListener(t,n,i)}function zu(e,t,n,i){e.removeEventListener(t,n,i)}const nl=Symbol("_vei");function Ku(e,t,n,i,s=null){const r=e[nl]||(e[nl]={}),o=r[t];if(i&&o)o.value=i;else{const[a,l]=Yu(t);if(i){const h=r[t]=Ju(i,s);Wu(e,a,h,l)}else o&&(zu(e,a,o,l),r[t]=void 0)}}const il=/(?:Once|Passive|Capture)$/;function Yu(e){let t;if(il.test(e)){t={};let i;for(;i=e.match(il);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):An(e.slice(2)),t]}let Xr=0;const Xu=Promise.resolve(),qu=()=>Xr||(Xu.then(()=>Xr=0),Xr=Date.now());function Ju(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Me(Qu(i,n.value),t,5,[i])};return n.value=e,n.attached=qu(),n}function Qu(e,t){if(lt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const sl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Zu=(e,t,n,i,s,r)=>{const o=s==="svg";t==="class"?Bu(e,i,o):t==="style"?$u(e,n,i):As(t)?No(t)||Ku(e,t,n,i,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):tf(e,t,i,o))?(el(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&tl(e,t,i,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Bt(i))?el(e,_e(t),i,r,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),tl(e,t,i,o))};function tf(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&sl(t)&&ct(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return sl(t)&&Bt(n)?!1:t in e}const ef=["ctrl","shift","alt","meta"],nf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>ef.some(n=>e[`${n}Key`]&&!t.includes(n))},So=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(s,...r)=>{for(let o=0;o<t.length;o++){const a=nf[t[o]];if(a&&a(s,t))return}return e(s,...r)})},sf=Wt({patchProp:Zu},Gu);let rl;function rf(){return rl||(rl=ru(sf))}const of=(...e)=>{const t=rf().createApp(...e),{mount:n}=t;return t.mount=i=>{const s=lf(i);if(!s)return;const r=t._component;!ct(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,af(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function af(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function lf(e){return Bt(e)?document.querySelector(e):e}var cf=!1;/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Yc;const Is=e=>Yc=e,Xc=Symbol();function Co(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ai;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ai||(Ai={}));function hf(){const e=Zl(!0),t=e.run(()=>ce({}));let n=[],i=[];const s=Wo({install(r){Is(s),s._a=r,r.provide(Xc,s),r.config.globalProperties.$pinia=s,i.forEach(o=>n.push(o)),i=[]},use(r){return!this._a&&!cf?i.push(r):n.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const qc=()=>{};function ol(e,t,n,i=qc){e.push(t);const s=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),i())};return!n&&tc()&&X0(s),s}function Hn(e,...t){e.slice().forEach(n=>{n(...t)})}const df=e=>e(),al=Symbol(),qr=Symbol();function xo(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,i)=>e.set(i,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],s=e[n];Co(s)&&Co(i)&&e.hasOwnProperty(n)&&!Dt(i)&&!on(i)?e[n]=xo(s,i):e[n]=i}return e}const uf=Symbol();function ff(e){return!Co(e)||!e.hasOwnProperty(uf)}const{assign:Qe}=Object;function gf(e){return!!(Dt(e)&&e.effect)}function pf(e,t,n,i){const{state:s,actions:r,getters:o}=t,a=n.state.value[e];let l;function h(){a||(n.state.value[e]=s?s():{});const c=bd(n.state.value[e]);return Qe(c,r,Object.keys(o||{}).reduce((f,_)=>(f[_]=Wo(Li(()=>{Is(n);const p=n._s.get(e);return o[_].call(p,p)})),f),{}))}return l=Jc(e,h,t,n,i,!0),l}function Jc(e,t,n={},i,s,r){let o;const a=Qe({actions:{}},n),l={deep:!0};let h,c,f=[],_=[],p;const u=i.state.value[e];!r&&!u&&(i.state.value[e]={}),ce({});let y;function b(S){let R;h=c=!1,typeof S=="function"?(S(i.state.value[e]),R={type:Ai.patchFunction,storeId:e,events:p}):(xo(i.state.value[e],S),R={type:Ai.patchObject,payload:S,storeId:e,events:p});const T=y=Symbol();zo().then(()=>{y===T&&(h=!0)}),c=!0,Hn(f,R,i.state.value[e])}const x=r?function(){const{state:R}=n,T=R?R():{};this.$patch(w=>{Qe(w,T)})}:qc;function P(){o.stop(),f=[],_=[],i._s.delete(e)}const d=(S,R="")=>{if(al in S)return S[qr]=R,S;const T=function(){Is(i);const w=Array.from(arguments),F=[],L=[];function W(K){F.push(K)}function U(K){L.push(K)}Hn(_,{args:w,name:T[qr],store:v,after:W,onError:U});let J;try{J=S.apply(this&&this.$id===e?this:v,w)}catch(K){throw Hn(L,K),K}return J instanceof Promise?J.then(K=>(Hn(F,K),K)).catch(K=>(Hn(L,K),Promise.reject(K))):(Hn(F,J),J)};return T[al]=!0,T[qr]=R,T},g={_p:i,$id:e,$onAction:ol.bind(null,_),$patch:b,$reset:x,$subscribe(S,R={}){const T=ol(f,S,R.detached,()=>w()),w=o.run(()=>Ie(()=>i.state.value[e],F=>{(R.flush==="sync"?c:h)&&S({storeId:e,type:Ai.direct,events:p},F)},Qe({},l,R)));return T},$dispose:P},v=ge(g);i._s.set(e,v);const N=(i._a&&i._a.runWithContext||df)(()=>i._e.run(()=>(o=Zl()).run(()=>t({action:d}))));for(const S in N){const R=N[S];if(Dt(R)&&!gf(R)||on(R))r||(u&&ff(R)&&(Dt(R)?R.value=u[S]:xo(R,u[S])),i.state.value[e][S]=R);else if(typeof R=="function"){const T=d(R,S);N[S]=T,a.actions[S]=R}}return Qe(v,N),Qe(pt(v),N),Object.defineProperty(v,"$state",{get:()=>i.state.value[e],set:S=>{b(R=>{Qe(R,S)})}}),i._p.forEach(S=>{Qe(v,o.run(()=>S({store:v,app:i._a,pinia:i,options:a})))}),u&&r&&n.hydrate&&n.hydrate(v.$state,u),h=!0,c=!0,v}/*! #__NO_SIDE_EFFECTS__ */function _f(e,t,n){let i,s;const r=typeof t=="function";typeof e=="string"?(i=e,s=r?n:t):(s=e,i=e.id);function o(a,l){const h=Qd();return a=a||(h?Pi(Xc,null):null),a&&Is(a),a=Yc,a._s.has(i)||(r?Jc(i,t,s,a):pf(i,s,a)),a._s.get(i)}return o.$id=i,o}const mf=$e({__name:"CanvasShape",props:{shape:Object,selected:Boolean},emits:["select","dragging","dragend","transform"],setup(e,{emit:t}){const n=e,i=t,s=()=>{i("select",n.shape.id)},r=c=>{const f=c.target;i("dragging",n.shape.id,f.x(),f.y())},o=c=>{const f=c.target;i("dragend",n.shape.id,f.x(),f.y())},a=c=>{const f=c.target;i("dragging",n.shape.id,f.x()-n.shape.width/2,f.y()-n.shape.height/2)},l=c=>{const f=c.target;i("dragend",n.shape.id,f.x()-n.shape.width/2,f.y()-n.shape.height/2)},h=c=>{const f=c.target,_=f.rotation(),p=f.scaleX(),u=f.scaleY(),y=Math.max(10,n.shape.width*p),b=Math.max(10,n.shape.height*u);f.scale({x:1,y:1}),i("transform",n.shape.id,{x:f.x(),y:f.y(),width:y,height:b,rotation:_})};return(c,f)=>{const _=Ge("v-rect"),p=Ge("v-circle"),u=Ge("v-group");return e.shape.visible!==!1?(It(),be(u,{key:0},{default:Si(()=>[e.shape.type==="rect"?(It(),be(_,{key:0,config:{x:e.shape.x,y:e.shape.y,width:e.shape.width,height:e.shape.height,fill:e.shape.fill||"#ccc",stroke:e.selected?"#007bff":"transparent",strokeWidth:e.selected?3:1,draggable:!0,rotation:e.shape.rotation||0},onClick:So(s,["stop"]),onDragmove:r,onDragend:o,onTransformend:h},null,8,["config"])):e.shape.type==="circle"?(It(),be(p,{key:1,config:{x:e.shape.x+e.shape.width/2,y:e.shape.y+e.shape.height/2,radius:e.shape.width/2,fill:e.shape.fill||"#ccc",stroke:e.selected?"#007bff":"transparent",strokeWidth:e.selected?3:1,draggable:!0},onClick:So(s,["stop"]),onDragmove:a,onDragend:l},null,8,["config"])):Yn("",!0)]),_:1})):Yn("",!0)}}});var Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ss={exports:{}};Ss.exports;(function(e,t){var n=200,i="__lodash_hash_undefined__",s=9007199254740991,r="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",h="[object Error]",c="[object Function]",f="[object GeneratorFunction]",_="[object Map]",p="[object Number]",u="[object Object]",y="[object Promise]",b="[object RegExp]",x="[object Set]",P="[object String]",d="[object Symbol]",g="[object WeakMap]",v="[object ArrayBuffer]",E="[object DataView]",N="[object Float32Array]",S="[object Float64Array]",R="[object Int8Array]",T="[object Int16Array]",w="[object Int32Array]",F="[object Uint8Array]",L="[object Uint8ClampedArray]",W="[object Uint16Array]",U="[object Uint32Array]",J=/[\\^$.*+?()[\]{}|]/g,K=/\w*$/,H=/^\[object .+?Constructor\]$/,it=/^(?:0|[1-9]\d*)$/,j={};j[r]=j[o]=j[v]=j[E]=j[a]=j[l]=j[N]=j[S]=j[R]=j[T]=j[w]=j[_]=j[p]=j[u]=j[b]=j[x]=j[P]=j[d]=j[F]=j[L]=j[W]=j[U]=!0,j[h]=j[c]=j[g]=!1;var st=typeof Xn=="object"&&Xn&&Xn.Object===Object&&Xn,Q=typeof self=="object"&&self&&self.Object===Object&&self,dt=st||Q||Function("return this")(),Zt=t&&!t.nodeType&&t,zt=Zt&&!0&&e&&!e.nodeType&&e,Ft=zt&&zt.exports===Zt;function M(m,k){return m.set(k[0],k[1]),m}function V(m,k){return m.add(k),m}function et(m,k){for(var G=-1,Z=m?m.length:0;++G<Z&&k(m[G],G,m)!==!1;);return m}function yt(m,k){for(var G=-1,Z=k.length,jt=m.length;++G<Z;)m[jt+G]=k[G];return m}function mt(m,k,G,Z){var jt=-1,ne=m?m.length:0;for(Z&&ne&&(G=m[++jt]);++jt<ne;)G=k(G,m[jt],jt,m);return G}function wt(m,k){for(var G=-1,Z=Array(m);++G<m;)Z[G]=k(G);return Z}function C(m,k){return m==null?void 0:m[k]}function A(m){var k=!1;if(m!=null&&typeof m.toString!="function")try{k=!!(m+"")}catch{}return k}function O(m){var k=-1,G=Array(m.size);return m.forEach(function(Z,jt){G[++k]=[jt,Z]}),G}function B(m,k){return function(G){return m(k(G))}}function D(m){var k=-1,G=Array(m.size);return m.forEach(function(Z){G[++k]=Z}),G}var I=Array.prototype,q=Function.prototype,Y=Object.prototype,z=dt["__core-js_shared__"],$=function(){var m=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),nt=q.toString,X=Y.hasOwnProperty,tt=Y.toString,ot=RegExp("^"+nt.call(X).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ft=Ft?dt.Buffer:void 0,Ct=dt.Symbol,bt=dt.Uint8Array,Yt=B(Object.getPrototypeOf,Object),$t=Object.create,ae=Y.propertyIsEnumerable,te=I.splice,Xe=Object.getOwnPropertySymbols,Yi=ft?ft.isBuffer:void 0,ee=B(Object.keys,Object),re=Bn(dt,"DataView"),qe=Bn(dt,"Map"),Dn=Bn(dt,"Promise"),Fr=Bn(dt,"Set"),Or=Bn(dt,"WeakMap"),hi=Bn(Object,"create"),Dh=bn(re),Gh=bn(qe),Ih=bn(Dn),Bh=bn(Fr),Uh=bn(Or),ba=Ct?Ct.prototype:void 0,va=ba?ba.valueOf:void 0;function mn(m){var k=-1,G=m?m.length:0;for(this.clear();++k<G;){var Z=m[k];this.set(Z[0],Z[1])}}function Vh(){this.__data__=hi?hi(null):{}}function Hh(m){return this.has(m)&&delete this.__data__[m]}function $h(m){var k=this.__data__;if(hi){var G=k[m];return G===i?void 0:G}return X.call(k,m)?k[m]:void 0}function jh(m){var k=this.__data__;return hi?k[m]!==void 0:X.call(k,m)}function Wh(m,k){var G=this.__data__;return G[m]=hi&&k===void 0?i:k,this}mn.prototype.clear=Vh,mn.prototype.delete=Hh,mn.prototype.get=$h,mn.prototype.has=jh,mn.prototype.set=Wh;function Fe(m){var k=-1,G=m?m.length:0;for(this.clear();++k<G;){var Z=m[k];this.set(Z[0],Z[1])}}function zh(){this.__data__=[]}function Kh(m){var k=this.__data__,G=Xi(k,m);if(G<0)return!1;var Z=k.length-1;return G==Z?k.pop():te.call(k,G,1),!0}function Yh(m){var k=this.__data__,G=Xi(k,m);return G<0?void 0:k[G][1]}function Xh(m){return Xi(this.__data__,m)>-1}function qh(m,k){var G=this.__data__,Z=Xi(G,m);return Z<0?G.push([m,k]):G[Z][1]=k,this}Fe.prototype.clear=zh,Fe.prototype.delete=Kh,Fe.prototype.get=Yh,Fe.prototype.has=Xh,Fe.prototype.set=qh;function Gn(m){var k=-1,G=m?m.length:0;for(this.clear();++k<G;){var Z=m[k];this.set(Z[0],Z[1])}}function Jh(){this.__data__={hash:new mn,map:new(qe||Fe),string:new mn}}function Qh(m){return qi(this,m).delete(m)}function Zh(m){return qi(this,m).get(m)}function t0(m){return qi(this,m).has(m)}function e0(m,k){return qi(this,m).set(m,k),this}Gn.prototype.clear=Jh,Gn.prototype.delete=Qh,Gn.prototype.get=Zh,Gn.prototype.has=t0,Gn.prototype.set=e0;function In(m){this.__data__=new Fe(m)}function n0(){this.__data__=new Fe}function i0(m){return this.__data__.delete(m)}function s0(m){return this.__data__.get(m)}function r0(m){return this.__data__.has(m)}function o0(m,k){var G=this.__data__;if(G instanceof Fe){var Z=G.__data__;if(!qe||Z.length<n-1)return Z.push([m,k]),this;G=this.__data__=new Gn(Z)}return G.set(m,k),this}In.prototype.clear=n0,In.prototype.delete=i0,In.prototype.get=s0,In.prototype.has=r0,In.prototype.set=o0;function a0(m,k){var G=Lr(m)||F0(m)?wt(m.length,String):[],Z=G.length,jt=!!Z;for(var ne in m)(k||X.call(m,ne))&&!(jt&&(ne=="length"||A0(ne,Z)))&&G.push(ne);return G}function Sa(m,k,G){var Z=m[k];(!(X.call(m,k)&&Pa(Z,G))||G===void 0&&!(k in m))&&(m[k]=G)}function Xi(m,k){for(var G=m.length;G--;)if(Pa(m[G][0],k))return G;return-1}function l0(m,k){return m&&Ca(k,Dr(k),m)}function kr(m,k,G,Z,jt,ne,de){var oe;if(Z&&(oe=ne?Z(m,jt,ne,de):Z(m)),oe!==void 0)return oe;if(!Ji(m))return m;var Ea=Lr(m);if(Ea){if(oe=w0(m),!k)return S0(m,oe)}else{var Un=yn(m),Ma=Un==c||Un==f;if(k0(m))return g0(m,k);if(Un==u||Un==r||Ma&&!ne){if(A(m))return ne?m:{};if(oe=P0(Ma?{}:m),!k)return C0(m,l0(oe,m))}else{if(!j[Un])return ne?m:{};oe=T0(m,Un,kr,k)}}de||(de=new In);var Ra=de.get(m);if(Ra)return Ra;if(de.set(m,oe),!Ea)var Fa=G?x0(m):Dr(m);return et(Fa||m,function(Gr,Qi){Fa&&(Qi=Gr,Gr=m[Qi]),Sa(oe,Qi,kr(Gr,k,G,Z,Qi,m,de))}),oe}function c0(m){return Ji(m)?$t(m):{}}function h0(m,k,G){var Z=k(m);return Lr(m)?Z:yt(Z,G(m))}function d0(m){return tt.call(m)}function u0(m){if(!Ji(m)||M0(m))return!1;var k=Aa(m)||A(m)?ot:H;return k.test(bn(m))}function f0(m){if(!wa(m))return ee(m);var k=[];for(var G in Object(m))X.call(m,G)&&G!="constructor"&&k.push(G);return k}function g0(m,k){if(k)return m.slice();var G=new m.constructor(m.length);return m.copy(G),G}function Nr(m){var k=new m.constructor(m.byteLength);return new bt(k).set(new bt(m)),k}function p0(m,k){var G=k?Nr(m.buffer):m.buffer;return new m.constructor(G,m.byteOffset,m.byteLength)}function _0(m,k,G){var Z=k?G(O(m),!0):O(m);return mt(Z,M,new m.constructor)}function m0(m){var k=new m.constructor(m.source,K.exec(m));return k.lastIndex=m.lastIndex,k}function y0(m,k,G){var Z=k?G(D(m),!0):D(m);return mt(Z,V,new m.constructor)}function b0(m){return va?Object(va.call(m)):{}}function v0(m,k){var G=k?Nr(m.buffer):m.buffer;return new m.constructor(G,m.byteOffset,m.length)}function S0(m,k){var G=-1,Z=m.length;for(k||(k=Array(Z));++G<Z;)k[G]=m[G];return k}function Ca(m,k,G,Z){G||(G={});for(var jt=-1,ne=k.length;++jt<ne;){var de=k[jt],oe=Z?Z(G[de],m[de],de,G,m):void 0;Sa(G,de,oe===void 0?m[de]:oe)}return G}function C0(m,k){return Ca(m,xa(m),k)}function x0(m){return h0(m,Dr,xa)}function qi(m,k){var G=m.__data__;return E0(k)?G[typeof k=="string"?"string":"hash"]:G.map}function Bn(m,k){var G=C(m,k);return u0(G)?G:void 0}var xa=Xe?B(Xe,Object):D0,yn=d0;(re&&yn(new re(new ArrayBuffer(1)))!=E||qe&&yn(new qe)!=_||Dn&&yn(Dn.resolve())!=y||Fr&&yn(new Fr)!=x||Or&&yn(new Or)!=g)&&(yn=function(m){var k=tt.call(m),G=k==u?m.constructor:void 0,Z=G?bn(G):void 0;if(Z)switch(Z){case Dh:return E;case Gh:return _;case Ih:return y;case Bh:return x;case Uh:return g}return k});function w0(m){var k=m.length,G=m.constructor(k);return k&&typeof m[0]=="string"&&X.call(m,"index")&&(G.index=m.index,G.input=m.input),G}function P0(m){return typeof m.constructor=="function"&&!wa(m)?c0(Yt(m)):{}}function T0(m,k,G,Z){var jt=m.constructor;switch(k){case v:return Nr(m);case a:case l:return new jt(+m);case E:return p0(m,Z);case N:case S:case R:case T:case w:case F:case L:case W:case U:return v0(m,Z);case _:return _0(m,Z,G);case p:case P:return new jt(m);case b:return m0(m);case x:return y0(m,Z,G);case d:return b0(m)}}function A0(m,k){return k=k??s,!!k&&(typeof m=="number"||it.test(m))&&m>-1&&m%1==0&&m<k}function E0(m){var k=typeof m;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?m!=="__proto__":m===null}function M0(m){return!!$&&$ in m}function wa(m){var k=m&&m.constructor,G=typeof k=="function"&&k.prototype||Y;return m===G}function bn(m){if(m!=null){try{return nt.call(m)}catch{}try{return m+""}catch{}}return""}function R0(m){return kr(m,!0,!0)}function Pa(m,k){return m===k||m!==m&&k!==k}function F0(m){return O0(m)&&X.call(m,"callee")&&(!ae.call(m,"callee")||tt.call(m)==r)}var Lr=Array.isArray;function Ta(m){return m!=null&&N0(m.length)&&!Aa(m)}function O0(m){return L0(m)&&Ta(m)}var k0=Yi||G0;function Aa(m){var k=Ji(m)?tt.call(m):"";return k==c||k==f}function N0(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=s}function Ji(m){var k=typeof m;return!!m&&(k=="object"||k=="function")}function L0(m){return!!m&&typeof m=="object"}function Dr(m){return Ta(m)?a0(m):f0(m)}function D0(){return[]}function G0(){return!1}e.exports=R0})(Ss,Ss.exports);var yf=Ss.exports;const fi=Qc(yf),Bs=_f("canvas",()=>{const e=ge([{id:"1",type:"rect",x:80,y:60,width:140,height:100,fill:"#FFB6C1",rotation:0,visible:!0},{id:"2",type:"rect",x:320,y:160,width:150,height:110,fill:"#90EE90",rotation:0,visible:!0},{id:"3",type:"circle",x:600,y:240,width:100,height:100,fill:"#87CEFA",rotation:0,visible:!0},{id:"4",type:"rect",x:940,y:220,width:200,height:120,fill:"#FFD700",rotation:0,visible:!0},{id:"5",type:"rect",x:220,y:480,width:130,height:100,fill:"#FFA07A",rotation:0,visible:!0},{id:"6",type:"rect",x:560,y:580,width:100,height:80,fill:"#B0C4DE",rotation:0,visible:!0},{id:"7",type:"rect",x:820,y:480,width:140,height:110,fill:"#98FB98",rotation:0,visible:!0},{id:"8",type:"circle",x:1160,y:360,width:120,height:120,fill:"#FF69B4",rotation:0,visible:!0},{id:"9",type:"rect",x:420,y:720,width:150,height:130,fill:"#20B2AA",rotation:0,visible:!0},{id:"10",type:"rect",x:760,y:120,width:100,height:100,fill:"#9370DB",rotation:0,visible:!0}]),t=ce([]),n=ce(1),i=ge({x:0,y:0}),s=ge({v:null,h:null}),r=[],o=[],a=()=>{r.push(fi(pt(e))),o.length=0,r.length>50&&r.shift()};return{shapes:e,selectedIds:t,zoom:n,stagePos:i,guides:s,setSelected:(d,g=!1)=>{if(!d){t.value=[];return}g?t.value.includes(d)||t.value.push(d):t.value=[d]},updateShapePos:(d,g,v)=>{const E=e.find(N=>N.id===d);E&&(E.x=g,E.y=v)},updateShapeTransform:(d,g)=>{const v=e.find(E=>E.id===d);v&&Object.assign(v,g)},selectByBox:d=>{const g=Math.min(d.x,d.x+d.width),v=Math.min(d.y,d.y+d.height),E=Math.max(d.x,d.x+d.width),N=Math.max(d.y,d.y+d.height),S=e.filter(R=>{const T=R.x,w=R.y,F=R.x+R.width,L=R.y+R.height;return!(F<g||T>E||L<v||w>N)}).map(R=>R.id);t.value=S},computeGuidesAndSnap:d=>{if(s.v=null,s.h=null,!d)return{dx:0,dy:0};const v=e.filter(T=>T.id!==d.id),E=d.x+d.width/2,N=d.y+d.height/2;let S=null,R=null;for(const T of v){const w=T.x+T.width/2,F=T.y+T.height/2;Math.abs(w-E)<=6&&(s.v=[w,0,w,4e3],S=w-d.width/2),Math.abs(F-N)<=6&&(s.h=[0,F,4e3,F],R=F-d.height/2);const L=T.x,W=T.x+T.width,U=d.x,J=d.x+d.width;Math.abs(L-U)<=6&&(s.v=[L,0,L,4e3],S=L),Math.abs(W-J)<=6&&(s.v=[W,0,W,4e3],S=W-d.width);const K=T.y,H=T.y+T.height,it=d.y,j=d.y+d.height;Math.abs(K-it)<=6&&(s.h=[0,K,4e3,K],R=K),Math.abs(H-j)<=6&&(s.h=[0,H,4e3,H],R=H-d.height)}return{dx:S!==null?S-d.x:0,dy:R!==null?R-d.y:0}},clearGuides:()=>{s.v=null,s.h=null},pushHistory:a,undo:()=>{if(r.length===0)return;const d=r.pop();o.push(fi(pt(e))),e.splice(0,e.length,...fi(d))},redo:()=>{if(o.length===0)return;const d=o.pop();r.push(fi(pt(e))),e.splice(0,e.length,...fi(d))},addRect:()=>{a();const d=Date.now().toString();e.push({id:d,type:"rect",x:200,y:200,width:140,height:90,fill:"#cccccc",rotation:0,visible:!0}),t.value=[d]},deleteSelected:()=>{if(t.value.length!==0){a();for(const d of t.value){const g=e.findIndex(v=>v.id===d);g>=0&&e.splice(g,1)}t.value=[]}},toggleVisibility:d=>{const g=e.find(v=>v.id===d);g&&(g.visible=!g.visible)}}}),bf={class:"leftPanel"},vf={class:"leftPanel_Icon"},Sf={class:"icon_box"},Cf={class:"icon_box"},xf={class:"layers_list"},wf=["onClick"],Pf={class:"cover"},Tf={class:"pageName"},Af=$e({__name:"LayersPanel",setup(e){const t=Bs(),n=Li(()=>[...t.shapes].reverse()),i=ge({});for(const o of t.shapes)i[o.id]=o.visible!==!1;Ie(i,o=>{for(const a in o){const l=t.shapes.find(h=>h.id===a);l&&(l.visible=o[a])}},{deep:!0});function s(o){t.setSelected(o)}function r(o){return t.selectedIds.includes(o)}return(o,a)=>{const l=Ge("icons");return It(),Be("div",bf,[Ot("div",vf,[Ot("div",Sf,[Lt(l,{class:"icon",name:"figma"})]),Ot("div",Cf,[Lt(l,{class:"icon",name:"move"})])]),a[0]||(a[0]=Ot("div",{class:"layers"},"Layers",-1)),Ot("div",xf,[(It(!0),Be(fe,null,go(n.value,h=>(It(),Be("div",{class:Bi(["layers_list_item",{selected:r(h.id)}]),key:h.id,onClick:c=>s(h.id)},[Ot("div",Pf,Ei(h.type.charAt(0).toUpperCase()),1),Ot("div",Tf,Ei(h.id),1)],10,wf))),128))])])}}});const Hi=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},Ef=Hi(Af,[["__scopeId","data-v-2ecf551d"]]),Mf={class:"toolbar"},Rf=$e({__name:"Toolbar",setup(e){const t=Bs();function n(){t.addRect()}function i(){t.deleteSelected()}function s(){t.undo()}function r(){t.redo()}return(o,a)=>(It(),Be("div",Mf,[Ot("div",{onClick:n,class:"btn"},"添加矩形"),Ot("div",{onClick:i,class:"btn"},"删除"),Ot("div",{onClick:s,class:"btn"},"撤销"),Ot("div",{onClick:r,class:"btn"},"还原")]))}});const Ff=Hi(Rf,[["__scopeId","data-v-e60b6e75"]]),Of={class:"panel"},kf={class:"title"},Nf={class:"title"},Lf=$e({__name:"RightPanel",setup(e){const t=Bs(),n=()=>{t.undo()},i=()=>{t.redo()},s=()=>(Number(t.zoom)*100).toFixed(2);return(r,o)=>(It(),Be("div",Of,[Ot("div",kf,"Zoom: "+Ei(s())+"%",1),Ot("div",Nf,"Selected: "+Ei(tn(t).selectedIds.join(", ")||"-"),1),Ot("div",{class:"btnList"},[Ot("div",{onClick:n,class:"btn"},"撤销"),Ot("div",{onClick:i,class:"btn"},"还原")])]))}});const Df=Hi(Lf,[["__scopeId","data-v-f8e290d8"]]),Gf={class:"left-panel"},If={class:"main-area"},Bf={class:"right-panel"},Uf=50,Vf=$e({__name:"CanvasBoard",setup(e){const t=Bs(),n=ce(null),i=ce([]),s=ce(!1),r=ce({x:0,y:0}),o=ce(null),a=ce(null),l=ce(null),h=ge({width:window.innerWidth-300,height:window.innerHeight,draggable:!1,scaleX:t.zoom,scaleY:t.zoom}),c=ge({active:!1,x:0,y:0,width:0,height:0}),f=ce(null);Oi(()=>{y(),_()}),Ie(()=>t.selectedIds.slice(),async()=>{var F;await zo(),o.value.getNode();const w=(F=l.value)==null?void 0:F.getNode();if(w)if(t.selectedIds.length===1){const L=t.selectedIds[0],W=b(L);W&&(w.nodes([W]),w.getLayer().batchDraw(),f.value=W)}else w.nodes([]),f.value=null,w.getLayer().batchDraw()}),Ie(()=>t.zoom,()=>{y()}),Oi(()=>{y(),_()});const _=()=>{const w=o.value.getNode();let F=0,L=!1;w.on("touchstart",W=>{const U=W.evt.touches;U.length===2&&(L=!0,u(U[0],U[1]),F=p(U[0],U[1]),w.x(),w.y())}),w.on("touchmove",W=>{if(!L)return;const U=W.evt.touches;if(U.length!==2)return;W.evt.preventDefault();const J=u(U[0],U[1]),K=p(U[0],U[1]),H=K/F,it=w.scaleX(),j=Math.max(.2,Math.min(it*H,4)),st={x:(J.x-w.x())/it,y:(J.y-w.y())/it};w.scale({x:j,y:j});const Q={x:-(st.x-J.x/j)*j,y:-(st.y-J.y/j)*j};w.position(Q),w.batchDraw(),F=K}),w.on("touchend",()=>{L=!1,F=0}),w.on("wheel",W=>{console.log("wheel"),W.evt.preventDefault();const U=W.evt;if(U.ctrlKey||U.metaKey){console.log("wheel: 缩放");const J=w.scaleX(),K=w.getPointerPosition(),H=1.05,it=U.deltaY>0?1/H:H,j=Math.max(.02,Math.min(J*it,6)),st={x:(K.x-w.x())/J,y:(K.y-w.y())/J};w.scale({x:j,y:j});const Q={x:K.x-st.x*j,y:K.y-st.y*j};console.log("wheel: 平移",j);const dt=Math.max(.02,Math.min(j,6));t.zoom=dt,w.position(Q),w.batchDraw();return}w.x(w.x()-U.deltaX),w.y(w.y()-U.deltaY),w.batchDraw()})},p=(w,F)=>Math.sqrt((F.clientX-w.clientX)**2+(F.clientY-w.clientY)**2),u=(w,F)=>({x:(w.clientX+F.clientX)/2,y:(w.clientY+F.clientY)/2}),y=()=>{const w=[];for(let L=-5e3;L<=5e3;L+=Uf)w.push({id:`v-${L}`,points:[L,-5e3,L,5e3],stroke:"#eee",strokeWidth:1/window.devicePixelRatio,listening:!1}),w.push({id:`h-${L}`,points:[-5e3,L,5e3,L],stroke:"#eee",strokeWidth:1/window.devicePixelRatio,listening:!1});i.value=w},b=w=>{const L=a.value.getNode().getChildren().toArray();for(const W of L)if(W.getAttr&&W.getAttr("id")===w||W._id===w)return W;return null},x=w=>{t.setSelected(w)},P=(w,F,L)=>{const W=t.shapes.find(it=>it.id===w);if(!W)return;const U={...W,x:F,y:L},J=t.computeGuidesAndSnap(U),K=F+J.dx,H=L+J.dy;t.updateShapePos(w,K,H)},d=(w,F,L)=>{t.pushHistory(),t.clearGuides()},g=(w,F)=>{t.pushHistory(),t.updateShapeTransform(w,F)},v=w=>{const F=w.getPointerPosition(),L=t.zoom;return{x:(F.x-w.x())/L,y:(F.y-w.y())/L}},E=w=>{const F=o.value.getNode();if(w.evt.button===2||w.evt.button===1){s.value=!0,r.value={x:w.evt.clientX,y:w.evt.clientY};return}if(w.target===F){const L=v(F);c.active=!0,c.x=L.x,c.y=L.y,c.width=0,c.height=0,t.setSelected(null)}},N=w=>{const F=o.value.getNode();if(s.value){const W=w.evt.clientX-r.value.x,U=w.evt.clientY-r.value.y;F.x(F.x()+W),F.y(F.y()+U),r.value={x:w.evt.clientX,y:w.evt.clientY},F.batchDraw();return}if(!c.active)return;const L=v(F);c.width=L.x-c.x,c.height=L.y-c.y},S=()=>{s.value=!1,c.active&&(c.active=!1,t.selectByBox({x:c.x,y:c.y,width:c.width,height:c.height}))},R=w=>{w.evt.preventDefault()},T={rotateEnabled:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right","middle-left","middle-right","top-center","bottom-center"],keepRatio:!1,boundBoxFunc(w,F){return F.width<10||F.height<10?w:F}};return(w,F)=>{const L=Ge("v-line"),W=Ge("v-layer"),U=Ge("v-transformer"),J=Ge("v-rect"),K=Ge("v-stage");return It(),Be("div",{class:"canvas-wrapper",onContextmenu:F[0]||(F[0]=So(()=>{},["prevent"]))},[Ot("div",Gf,[Lt(Ef)]),Ot("div",If,[Lt(Ff,{class:"toolbar"}),Lt(K,{ref_key:"stageRef",ref:o,config:h,onWheel:R,onMousedown:E,onMousemove:N,onMouseup:S},{default:Si(()=>[Lt(W,{ref_key:"gridLayer",ref:n},{default:Si(()=>[(It(!0),Be(fe,null,go(i.value,H=>(It(),be(L,{key:H.id,config:H},null,8,["config"]))),128))]),_:1},512),Lt(W,{ref_key:"mainLayer",ref:a},{default:Si(()=>[tn(t).guides.v?(It(),be(L,{key:0,config:{points:tn(t).guides.v,stroke:"#00aaff",dash:[6,4],strokeWidth:1}},null,8,["config"])):Yn("",!0),tn(t).guides.h?(It(),be(L,{key:1,config:{points:tn(t).guides.h,stroke:"#00aaff",dash:[6,4],strokeWidth:1}},null,8,["config"])):Yn("",!0),(It(!0),Be(fe,null,go(tn(t).shapes,H=>(It(),be(mf,{key:H.id,shape:H,selected:tn(t).selectedIds.includes(H.id),onSelect:x,onDragging:P,onDragend:d,onTransform:g},null,8,["shape","selected"]))),128)),f.value?(It(),be(U,{key:2,config:T,ref_key:"transformerRef",ref:l},null,512)):Yn("",!0),c.active?(It(),be(J,{key:3,config:{x:c.x,y:c.y,width:c.width,height:c.height,stroke:"#007bff",dash:[6,4],strokeWidth:1,listening:!1,fill:"rgba(0,123,255,0.05)"}},null,8,["config"])):Yn("",!0)]),_:1},512)]),_:1},8,["config"])]),Ot("div",Bf,[Lt(Df)])],32)}}});const Hf=Hi(Vf,[["__scopeId","data-v-f2ab6f8b"]]),$f=$e({__name:"App",setup(e){return(t,n)=>(It(),be(Hf))}});var na={exports:{}},Us={},Zc={},ht={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof Xn<"u"?Xn:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:n(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const i=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=i,e.Konva._injectGlobal(e.Konva)})(ht);var Rt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=ht;class n{constructor(g=[1,0,0,1,0,0]){this.dirty=!1,this.m=g&&g.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(g){g.m[0]=this.m[0],g.m[1]=this.m[1],g.m[2]=this.m[2],g.m[3]=this.m[3],g.m[4]=this.m[4],g.m[5]=this.m[5]}point(g){const v=this.m;return{x:v[0]*g.x+v[2]*g.y+v[4],y:v[1]*g.x+v[3]*g.y+v[5]}}translate(g,v){return this.m[4]+=this.m[0]*g+this.m[2]*v,this.m[5]+=this.m[1]*g+this.m[3]*v,this}scale(g,v){return this.m[0]*=g,this.m[1]*=g,this.m[2]*=v,this.m[3]*=v,this}rotate(g){const v=Math.cos(g),E=Math.sin(g),N=this.m[0]*v+this.m[2]*E,S=this.m[1]*v+this.m[3]*E,R=this.m[0]*-E+this.m[2]*v,T=this.m[1]*-E+this.m[3]*v;return this.m[0]=N,this.m[1]=S,this.m[2]=R,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(g,v){const E=this.m[0]+this.m[2]*v,N=this.m[1]+this.m[3]*v,S=this.m[2]+this.m[0]*g,R=this.m[3]+this.m[1]*g;return this.m[0]=E,this.m[1]=N,this.m[2]=S,this.m[3]=R,this}multiply(g){const v=this.m[0]*g.m[0]+this.m[2]*g.m[1],E=this.m[1]*g.m[0]+this.m[3]*g.m[1],N=this.m[0]*g.m[2]+this.m[2]*g.m[3],S=this.m[1]*g.m[2]+this.m[3]*g.m[3],R=this.m[0]*g.m[4]+this.m[2]*g.m[5]+this.m[4],T=this.m[1]*g.m[4]+this.m[3]*g.m[5]+this.m[5];return this.m[0]=v,this.m[1]=E,this.m[2]=N,this.m[3]=S,this.m[4]=R,this.m[5]=T,this}invert(){const g=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),v=this.m[3]*g,E=-this.m[1]*g,N=-this.m[2]*g,S=this.m[0]*g,R=g*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=g*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=v,this.m[1]=E,this.m[2]=N,this.m[3]=S,this.m[4]=R,this.m[5]=T,this}getMatrix(){return this.m}decompose(){const g=this.m[0],v=this.m[1],E=this.m[2],N=this.m[3],S=this.m[4],R=this.m[5],T=g*N-v*E,w={x:S,y:R,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(g!=0||v!=0){const F=Math.sqrt(g*g+v*v);w.rotation=v>0?Math.acos(g/F):-Math.acos(g/F),w.scaleX=F,w.scaleY=T/F,w.skewX=(g*E+v*N)/T,w.skewY=0}else if(E!=0||N!=0){const F=Math.sqrt(E*E+N*N);w.rotation=Math.PI/2-(N>0?Math.acos(-E/F):-Math.acos(E/F)),w.scaleX=T/F,w.scaleY=F,w.skewX=0,w.skewY=(g*E+v*N)/T}return w.rotation=e.Util._getRotation(w.rotation),w}}e.Transform=n;const i="[object Array]",s="[object Number]",r="[object String]",o="[object Boolean]",a=Math.PI/180,l=180/Math.PI,h="#",c="",f="0",_="Konva warning: ",p="Konva error: ",u="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},b=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let x=[];const P=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(d){setTimeout(d,60)};e.Util={_isElement(d){return!!(d&&d.nodeType==1)},_isFunction(d){return!!(d&&d.constructor&&d.call&&d.apply)},_isPlainObject(d){return!!d&&d.constructor===Object},_isArray(d){return Object.prototype.toString.call(d)===i},_isNumber(d){return Object.prototype.toString.call(d)===s&&!isNaN(d)&&isFinite(d)},_isString(d){return Object.prototype.toString.call(d)===r},_isBoolean(d){return Object.prototype.toString.call(d)===o},isObject(d){return d instanceof Object},isValidSelector(d){if(typeof d!="string")return!1;const g=d[0];return g==="#"||g==="."||g===g.toUpperCase()},_sign(d){return d===0||d>0?1:-1},requestAnimFrame(d){x.push(d),x.length===1&&P(function(){const g=x;x=[],g.forEach(function(v){v()})})},createCanvasElement(){const d=document.createElement("canvas");try{d.style=d.style||{}}catch{}return d},createImageElement(){return document.createElement("img")},_isInDocument(d){for(;d=d.parentNode;)if(d==document)return!0;return!1},_urlToImage(d,g){const v=e.Util.createImageElement();v.onload=function(){g(v)},v.src=d},_rgbToHex(d,g,v){return((1<<24)+(d<<16)+(g<<8)+v).toString(16).slice(1)},_hexToRgb(d){d=d.replace(h,c);const g=parseInt(d,16);return{r:g>>16&255,g:g>>8&255,b:g&255}},getRandomColor(){let d=(Math.random()*16777215<<0).toString(16);for(;d.length<6;)d=f+d;return h+d},getRGB(d){let g;return d in y?(g=y[d],{r:g[0],g:g[1],b:g[2]}):d[0]===h?this._hexToRgb(d.substring(1)):d.substr(0,4)===u?(g=b.exec(d.replace(/ /g,"")),{r:parseInt(g[1],10),g:parseInt(g[2],10),b:parseInt(g[3],10)}):{r:0,g:0,b:0}},colorToRGBA(d){return d=d||"black",e.Util._namedColorToRBA(d)||e.Util._hex3ColorToRGBA(d)||e.Util._hex4ColorToRGBA(d)||e.Util._hex6ColorToRGBA(d)||e.Util._hex8ColorToRGBA(d)||e.Util._rgbColorToRGBA(d)||e.Util._rgbaColorToRGBA(d)||e.Util._hslColorToRGBA(d)},_namedColorToRBA(d){const g=y[d.toLowerCase()];return g?{r:g[0],g:g[1],b:g[2],a:1}:null},_rgbColorToRGBA(d){if(d.indexOf("rgb(")===0){d=d.match(/rgb\(([^)]+)\)/)[1];const g=d.split(/ *, */).map(Number);return{r:g[0],g:g[1],b:g[2],a:1}}},_rgbaColorToRGBA(d){if(d.indexOf("rgba(")===0){d=d.match(/rgba\(([^)]+)\)/)[1];const g=d.split(/ *, */).map((v,E)=>v.slice(-1)==="%"?E===3?parseInt(v)/100:parseInt(v)/100*255:Number(v));return{r:g[0],g:g[1],b:g[2],a:g[3]}}},_hex8ColorToRGBA(d){if(d[0]==="#"&&d.length===9)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:parseInt(d.slice(7,9),16)/255}},_hex6ColorToRGBA(d){if(d[0]==="#"&&d.length===7)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:1}},_hex4ColorToRGBA(d){if(d[0]==="#"&&d.length===5)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:parseInt(d[4]+d[4],16)/255}},_hex3ColorToRGBA(d){if(d[0]==="#"&&d.length===4)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:1}},_hslColorToRGBA(d){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(d)){const[g,...v]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(d),E=Number(v[0])/360,N=Number(v[1])/100,S=Number(v[2])/100;let R,T,w;if(N===0)return w=S*255,{r:Math.round(w),g:Math.round(w),b:Math.round(w),a:1};S<.5?R=S*(1+N):R=S+N-S*N;const F=2*S-R,L=[0,0,0];for(let W=0;W<3;W++)T=E+1/3*-(W-1),T<0&&T++,T>1&&T--,6*T<1?w=F+(R-F)*6*T:2*T<1?w=R:3*T<2?w=F+(R-F)*(2/3-T)*6:w=F,L[W]=w*255;return{r:Math.round(L[0]),g:Math.round(L[1]),b:Math.round(L[2]),a:1}}},haveIntersection(d,g){return!(g.x>d.x+d.width||g.x+g.width<d.x||g.y>d.y+d.height||g.y+g.height<d.y)},cloneObject(d){const g={};for(const v in d)this._isPlainObject(d[v])?g[v]=this.cloneObject(d[v]):this._isArray(d[v])?g[v]=this.cloneArray(d[v]):g[v]=d[v];return g},cloneArray(d){return d.slice(0)},degToRad(d){return d*a},radToDeg(d){return d*l},_degToRad(d){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(d)},_radToDeg(d){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(d)},_getRotation(d){return t.Konva.angleDeg?e.Util.radToDeg(d):d},_capitalize(d){return d.charAt(0).toUpperCase()+d.slice(1)},throw(d){throw new Error(p+d)},error(d){console.error(p+d)},warn(d){t.Konva.showWarnings&&console.warn(_+d)},each(d,g){for(const v in d)g(v,d[v])},_inRange(d,g,v){return g<=d&&d<v},_getProjectionToSegment(d,g,v,E,N,S){let R,T,w;const F=(d-v)*(d-v)+(g-E)*(g-E);if(F==0)R=d,T=g,w=(N-v)*(N-v)+(S-E)*(S-E);else{const L=((N-d)*(v-d)+(S-g)*(E-g))/F;L<0?(R=d,T=g,w=(d-N)*(d-N)+(g-S)*(g-S)):L>1?(R=v,T=E,w=(v-N)*(v-N)+(E-S)*(E-S)):(R=d+L*(v-d),T=g+L*(E-g),w=(R-N)*(R-N)+(T-S)*(T-S))}return[R,T,w]},_getProjectionToLine(d,g,v){const E=e.Util.cloneObject(d);let N=Number.MAX_VALUE;return g.forEach(function(S,R){if(!v&&R===g.length-1)return;const T=g[(R+1)%g.length],w=e.Util._getProjectionToSegment(S.x,S.y,T.x,T.y,d.x,d.y),F=w[0],L=w[1],W=w[2];W<N&&(E.x=F,E.y=L,N=W)}),E},_prepareArrayForTween(d,g,v){const E=[],N=[];if(d.length>g.length){const R=g;g=d,d=R}for(let R=0;R<d.length;R+=2)E.push({x:d[R],y:d[R+1]});for(let R=0;R<g.length;R+=2)N.push({x:g[R],y:g[R+1]});const S=[];return N.forEach(function(R){const T=e.Util._getProjectionToLine(R,E,v);S.push(T.x),S.push(T.y)}),S},_prepareToStringify(d){let g;d.visitedByCircularReferenceRemoval=!0;for(const v in d)if(d.hasOwnProperty(v)&&d[v]&&typeof d[v]=="object"){if(g=Object.getOwnPropertyDescriptor(d,v),d[v].visitedByCircularReferenceRemoval||e.Util._isElement(d[v]))if(g.configurable)delete d[v];else return null;else if(e.Util._prepareToStringify(d[v])===null)if(g.configurable)delete d[v];else return null}return delete d.visitedByCircularReferenceRemoval,d},_assign(d,g){for(const v in g)d[v]=g[v];return d},_getFirstPointerId(d){return d.touches?d.changedTouches[0].identifier:d.pointerId||999},releaseCanvas(...d){t.Konva.releaseCanvasOnDestroy&&d.forEach(g=>{g.width=0,g.height=0})},drawRoundedRectPath(d,g,v,E){let N=0,S=0,R=0,T=0;typeof E=="number"?N=S=R=T=Math.min(E,g/2,v/2):(N=Math.min(E[0]||0,g/2,v/2),S=Math.min(E[1]||0,g/2,v/2),T=Math.min(E[2]||0,g/2,v/2),R=Math.min(E[3]||0,g/2,v/2)),d.moveTo(N,0),d.lineTo(g-S,0),d.arc(g-S,S,S,Math.PI*3/2,0,!1),d.lineTo(g,v-T),d.arc(g-T,v-T,T,0,Math.PI/2,!1),d.lineTo(R,v),d.arc(R,v-R,R,Math.PI/2,Math.PI,!1),d.lineTo(0,N),d.arc(N,N,N,Math.PI,Math.PI*3/2,!1)}}})(Rt);var Mt={},xe={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.HitContext=Ue.SceneContext=Ue.Context=void 0;const th=Rt,jf=ht;function Wf(e){const t=[],n=e.length,i=th.Util;for(let s=0;s<n;s++){let r=e[s];i._isNumber(r)?r=Math.round(r*1e3)/1e3:i._isString(r)||(r=r+""),t.push(r)}return t}const ll=",",zf="(",Kf=")",Yf="([",Xf="])",qf=";",Jf="()",Qf="=",cl=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Zf=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],t1=100;class Vs{constructor(t){this.canvas=t,jf.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,n){let i=this.traceArr,s=i.length,r="",o,a,l,h;for(o=0;o<s;o++)a=i[o],l=a.method,l?(h=a.args,r+=l,t?r+=Jf:th.Util._isArray(h[0])?r+=Yf+h.join(ll)+Xf:(n&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),r+=zf+h.join(ll)+Kf)):(r+=a.property,t||(r+=Qf+a.val)),r+=qf;return r}clearTrace(){this.traceArr=[]}_trace(t){let n=this.traceArr,i;n.push(t),i=n.length,i>=t1&&n.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const n=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(t){const n=t.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(t){const n=t.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(t){const n=t.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(t,n){this._context[t]=n}arc(t,n,i,s,r,o){this._context.arc(t,n,i,s,r,o)}arcTo(t,n,i,s,r){this._context.arcTo(t,n,i,s,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,n,i,s,r,o){this._context.bezierCurveTo(t,n,i,s,r,o)}clearRect(t,n,i,s){this._context.clearRect(t,n,i,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,n){const i=arguments;if(i.length===2)return this._context.createImageData(t,n);if(i.length===1)return this._context.createImageData(t)}createLinearGradient(t,n,i,s){return this._context.createLinearGradient(t,n,i,s)}createPattern(t,n){return this._context.createPattern(t,n)}createRadialGradient(t,n,i,s,r,o){return this._context.createRadialGradient(t,n,i,s,r,o)}drawImage(t,n,i,s,r,o,a,l,h){const c=arguments,f=this._context;c.length===3?f.drawImage(t,n,i):c.length===5?f.drawImage(t,n,i,s,r):c.length===9&&f.drawImage(t,n,i,s,r,o,a,l,h)}ellipse(t,n,i,s,r,o,a,l){this._context.ellipse(t,n,i,s,r,o,a,l)}isPointInPath(t,n,i,s){return i?this._context.isPointInPath(i,t,n,s):this._context.isPointInPath(t,n,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,n,i,s){this._context.fillRect(t,n,i,s)}strokeRect(t,n,i,s){this._context.strokeRect(t,n,i,s)}fillText(t,n,i,s){s?this._context.fillText(t,n,i,s):this._context.fillText(t,n,i)}measureText(t){return this._context.measureText(t)}getImageData(t,n,i,s){return this._context.getImageData(t,n,i,s)}lineTo(t,n){this._context.lineTo(t,n)}moveTo(t,n){this._context.moveTo(t,n)}rect(t,n,i,s){this._context.rect(t,n,i,s)}roundRect(t,n,i,s,r){this._context.roundRect(t,n,i,s,r)}putImageData(t,n,i){this._context.putImageData(t,n,i)}quadraticCurveTo(t,n,i,s){this._context.quadraticCurveTo(t,n,i,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,n){this._context.scale(t,n)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,n,i,s,r,o){this._context.setTransform(t,n,i,s,r,o)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,n,i,s){this._context.strokeText(t,n,i,s)}transform(t,n,i,s,r,o){this._context.transform(t,n,i,s,r,o)}translate(t,n){this._context.translate(t,n)}_enableTrace(){let t=this,n=cl.length,i=this.setAttr,s,r;const o=function(a){let l=t[a],h;t[a]=function(){return r=Wf(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:a,args:r}),h}};for(s=0;s<n;s++)o(cl[s]);t.setAttr=function(){i.apply(t,arguments);const a=arguments[0];let l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:a,val:l})}}_applyGlobalCompositeOperation(t){const n=t.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}Ue.Context=Vs;Zf.forEach(function(e){Object.defineProperty(Vs.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class e1 extends Vs{constructor(t,{willReadFrequently:n=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(t){const n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fillRadialGradient(t){const n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fill(t){const n=t.fill(),i=t.getFillPriority();if(n&&i==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&i==="pattern"){this._fillPattern(t);return}const r=t.getFillLinearGradientColorStops();if(r&&i==="linear-gradient"){this._fillLinearGradient(t);return}const o=t.getFillRadialGradientColorStops();if(o&&i==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):s?this._fillPattern(t):r?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const n=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(n.x,n.y,i.x,i.y);if(s){for(let o=0;o<s.length;o+=2)r.addColorStop(s[o],s[o+1]);this.setAttr("strokeStyle",r)}}_stroke(t){const n=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var n,i,s;const r=(n=t.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(i=t.getShadowBlur())!==null&&i!==void 0?i:5,a=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,f=l.y*h;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(f))),this.setAttr("shadowOffsetX",a.x*c),this.setAttr("shadowOffsetY",a.y*f)}}Ue.SceneContext=e1;class n1 extends Vs{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const n=t.getStrokeScaleEnabled();if(!n){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),s=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}}}Ue.HitContext=n1;Object.defineProperty(xe,"__esModule",{value:!0});xe.HitCanvas=xe.SceneCanvas=xe.Canvas=void 0;const Cs=Rt,eh=Ue,nh=ht;let ns;function i1(){if(ns)return ns;const e=Cs.Util.createCanvasElement(),t=e.getContext("2d");return ns=function(){const n=nh.Konva._global.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}(),Cs.Util.releaseCanvas(e),ns}class ia{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(t||{}).pixelRatio||nh.Konva.pixelRatio||i1();this.pixelRatio=i,this._canvas=Cs.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const n=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,n){this.setWidth(t||0),this.setHeight(n||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch{try{return this._canvas.toDataURL()}catch(s){return Cs.Util.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}xe.Canvas=ia;class s1 extends ia{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new eh.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}xe.SceneCanvas=s1;class r1 extends ia{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new eh.HitContext(this),this.setSize(t.width,t.height)}}xe.HitCanvas=r1;var Hs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=ht,n=Rt;e.DD={get isDragging(){let i=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){let i;return e.DD._dragElements.forEach(s=>{i=s.node}),i},_dragElements:new Map,_drag(i){const s=[];e.DD._dragElements.forEach((r,o)=>{const{node:a}=r,l=a.getStage();l.setPointersPositions(i),r.pointerId===void 0&&(r.pointerId=n.Util._getFirstPointerId(i));const h=l._changedPointerPositions.find(c=>c.id===r.pointerId);if(h){if(r.dragStatus!=="dragging"){const c=a.dragDistance();if(Math.max(Math.abs(h.x-r.startPointerPos.x),Math.abs(h.y-r.startPointerPos.y))<c||(a.startDrag({evt:i}),!a.isDragging()))return}a._setDragPosition(i,r),s.push(a)}}),s.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:i},!0)})},_endDragBefore(i){const s=[];e.DD._dragElements.forEach(r=>{const{node:o}=r,a=o.getStage();if(i&&a.setPointersPositions(i),!a._changedPointerPositions.find(c=>c.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,r.dragStatus="stopped");const h=r.node.getLayer()||r.node instanceof t.Konva.Stage&&r.node;h&&s.indexOf(h)===-1&&s.push(h)}),s.forEach(r=>{r.draw()})},_endDragAfter(i){e.DD._dragElements.forEach((s,r)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:i},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(r)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(Hs);var ut={},rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.RGBComponent=o1;rt.alphaComponent=a1;rt.getNumberValidator=l1;rt.getNumberOrArrayOfNumbersValidator=c1;rt.getNumberOrAutoValidator=h1;rt.getStringValidator=d1;rt.getStringOrGradientValidator=u1;rt.getFunctionValidator=f1;rt.getNumberArrayValidator=g1;rt.getBooleanValidator=p1;rt.getComponentValidator=_1;const We=ht,kt=Rt;function ze(e){return kt.Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||kt.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function o1(e){return e>255?255:e<0?0:Math.round(e)}function a1(e){return e>1?1:e<1e-4?1e-4:e}function l1(){if(We.Konva.isUnminified)return function(e,t){return kt.Util._isNumber(e)||kt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function c1(e){if(We.Konva.isUnminified)return function(t,n){let i=kt.Util._isNumber(t),s=kt.Util._isArray(t)&&t.length==e;return!i&&!s&&kt.Util.warn(ze(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function h1(){if(We.Konva.isUnminified)return function(e,t){return kt.Util._isNumber(e)||e==="auto"||kt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function d1(){if(We.Konva.isUnminified)return function(e,t){return kt.Util._isString(e)||kt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function u1(){if(We.Konva.isUnminified)return function(e,t){const n=kt.Util._isString(e),i=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return n||i||kt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function f1(){if(We.Konva.isUnminified)return function(e,t){return kt.Util._isFunction(e)||kt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}function g1(){if(We.Konva.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(kt.Util._isArray(e)?e.forEach(function(i){kt.Util._isNumber(i)||kt.Util.warn('"'+t+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):kt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function p1(){if(We.Konva.isUnminified)return function(e,t){return e===!0||e===!1||kt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function _1(e){if(We.Konva.isUnminified)return function(t,n){return t==null||kt.Util.isObject(t)||kt.Util.warn(ze(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Rt,n=rt,i="get",s="set";e.Factory={addGetterSetter(r,o,a,l,h){e.Factory.addGetter(r,o,a),e.Factory.addSetter(r,o,l,h),e.Factory.addOverloadedGetterSetter(r,o)},addGetter(r,o,a){const l=i+t.Util._capitalize(o);r.prototype[l]=r.prototype[l]||function(){const h=this.attrs[o];return h===void 0?a:h}},addSetter(r,o,a,l){const h=s+t.Util._capitalize(o);r.prototype[h]||e.Factory.overWriteSetter(r,o,a,l)},overWriteSetter(r,o,a,l){const h=s+t.Util._capitalize(o);r.prototype[h]=function(c){return a&&c!==void 0&&c!==null&&(c=a.call(this,c,o)),this._setAttr(o,c),l&&l.call(this),this}},addComponentsGetterSetter(r,o,a,l,h){const c=a.length,f=t.Util._capitalize,_=i+f(o),p=s+f(o);r.prototype[_]=function(){const y={};for(let b=0;b<c;b++){const x=a[b];y[x]=this.getAttr(o+f(x))}return y};const u=(0,n.getComponentValidator)(a);r.prototype[p]=function(y){const b=this.attrs[o];l&&(y=l.call(this,y,o)),u&&u.call(this,y,o);for(const x in y)y.hasOwnProperty(x)&&this._setAttr(o+f(x),y[x]);return y||a.forEach(x=>{this._setAttr(o+f(x),void 0)}),this._fireChangeEvent(o,b,y),h&&h.call(this),this},e.Factory.addOverloadedGetterSetter(r,o)},addOverloadedGetterSetter(r,o){const a=t.Util._capitalize(o),l=s+a,h=i+a;r.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(r,o,a,l){t.Util.error("Adding deprecated "+o);const h=i+t.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[h]=function(){t.Util.error(c);const f=this.attrs[o];return f===void 0?a:f},e.Factory.addSetter(r,o,l,function(){t.Util.error(c)}),e.Factory.addOverloadedGetterSetter(r,o)},backCompat(r,o){t.Util.each(o,function(a,l){const h=r.prototype[l],c=i+t.Util._capitalize(a),f=s+t.Util._capitalize(a);function _(){h.apply(this,arguments),t.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}r.prototype[a]=_,r.prototype[c]=_,r.prototype[f]=_})},afterSetFilter(){this._filterUpToDate=!1}}})(ut);Object.defineProperty(Mt,"__esModule",{value:!0});Mt.Node=void 0;const $n=xe,ue=Hs,$i=ut,Je=ht,gt=Rt,Gt=rt,cs="absoluteOpacity",is="allEventListeners",Ne="absoluteTransform",hl="absoluteScale",Cn="canvas",m1="Change",y1="children",b1="konva",wo="listening",v1="mouseenter",S1="mouseleave",C1="pointerenter",x1="pointerleave",w1="touchenter",P1="touchleave",dl="set",ul="Shape",hs=" ",fl="stage",Ze="transform",T1="Stage",Po="visible",A1=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(hs);let E1=1;class at{constructor(t){this._id=E1++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Ze||t===Ne)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,n){let i=this._cache.get(t);return(i===void 0||(t===Ze||t===Ne)&&i.dirty===!0)&&(i=n.call(this),this._cache.set(t,i)),i}_calculate(t,n,i){if(!this._attachedDepsListeners.get(t)){const s=n.map(r=>r+"Change.konva").join(hs);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(Cn)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Ne&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Cn)){const{scene:t,filter:n,hit:i,buffer:s}=this._cache.get(Cn);gt.Util.releaseCanvas(t,n,i,s),this._cache.delete(Cn)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const n=t||{};let i={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(n.width||i.width),r=Math.ceil(n.height||i.height),o=n.pixelRatio,a=n.x===void 0?Math.floor(i.x):n.x,l=n.y===void 0?Math.floor(i.y):n.y,h=n.offset||0,c=n.drawBorder||!1,f=n.hitCanvasPixelRatio||1;if(!s||!r){gt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const _=Math.abs(Math.round(i.x)-a)>.5?1:0,p=Math.abs(Math.round(i.y)-l)>.5?1:0;s+=h*2+_,r+=h*2+p,a-=h,l-=h;const u=new $n.SceneCanvas({pixelRatio:o,width:s,height:r}),y=new $n.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),b=new $n.HitCanvas({pixelRatio:f,width:s,height:r}),x=u.getContext(),P=b.getContext(),d=new $n.SceneCanvas({width:u.width/u.pixelRatio+Math.abs(a),height:u.height/u.pixelRatio+Math.abs(l),pixelRatio:u.pixelRatio}),g=d.getContext();return b.isCache=!0,u.isCache=!0,this._cache.delete(Cn),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(u.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),x.save(),P.save(),g.save(),x.translate(-a,-l),P.translate(-a,-l),g.translate(-a,-l),d.x=a,d.y=l,this._isUnderCache=!0,this._clearSelfAndDescendantCache(cs),this._clearSelfAndDescendantCache(hl),this.drawScene(u,this,d),this.drawHit(b,this),this._isUnderCache=!1,x.restore(),P.restore(),c&&(x.save(),x.beginPath(),x.rect(0,0,s,r),x.closePath(),x.setAttr("strokeStyle","red"),x.setAttr("lineWidth",5),x.stroke(),x.restore()),this._cache.set(Cn,{scene:u,filter:y,hit:b,buffer:d,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Cn)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,n){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,r=1/0,o=-1/0,a=-1/0;const l=this.getAbsoluteTransform(n);return i.forEach(function(h){const c=l.point(h);s===void 0&&(s=o=c.x,r=a=c.y),s=Math.min(s,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}),{x:s,y:r,width:o-s,height:a-r}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();t.translate(n.x,n.y);const i=this._getCachedSceneCanvas(),s=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/s,i.height/s),t.restore()}_drawCachedHitCanvas(t){const n=this._getCanvasCache(),i=n.hit;t.save(),t.translate(n.x,n.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),n=this._getCanvasCache(),i=n.scene,s=n.filter,r=s.getContext(),o,a,l,h;if(t){if(!this._filterUpToDate){const c=i.pixelRatio;s.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(o=t.length,r.clear(),r.drawImage(i._canvas,0,0,i.getWidth()/c,i.getHeight()/c),a=r.getImageData(0,0,s.getWidth(),s.getHeight()),l=0;l<o;l++){if(h=t[l],typeof h!="function"){gt.Util.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,a),r.putImageData(a,0,0)}}catch(f){gt.Util.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return i}on(t,n){if(this._cache&&this._cache.delete(is),arguments.length===3)return this._delegate.apply(this,arguments);const i=t.split(hs);for(let s=0;s<i.length;s++){const o=i[s].split("."),a=o[0],l=o[1]||"";this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:l,handler:n})}return this}off(t,n){let i=(t||"").split(hs),s=i.length,r,o,a,l,h,c;if(this._cache&&this._cache.delete(is),!t)for(o in this.eventListeners)this._off(o);for(r=0;r<s;r++)if(a=i[r],l=a.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,n);else for(o in this.eventListeners)this._off(o,c,n);return this}dispatchEvent(t){const n={target:this,type:t.type,evt:t};return this.fire(t.type,n),this}addEventListener(t,n){return this.on(t,function(i){n.call(this,i.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,n,i){const s=this;this.on(t,function(r){const o=r.target.findAncestors(n,!0,s);for(let a=0;a<o.length;a++)r=gt.Util.cloneObject(r),r.currentTarget=o[a],i.call(o[a],r)})}remove(){return this.isDragging()&&this.stopDrag(),ue.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ne),this._clearSelfAndDescendantCache(cs),this._clearSelfAndDescendantCache(hl),this._clearSelfAndDescendantCache(fl),this._clearSelfAndDescendantCache(Po),this._clearSelfAndDescendantCache(wo)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const n="get"+gt.Util._capitalize(t);return gt.Util._isFunction(this[n])?this[n]():this.attrs[t]}getAncestors(){let t=this.getParent(),n=[];for(;t;)n.push(t),t=t.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let n,i;if(!t)return this;for(n in t)n!==y1&&(i=dl+gt.Util._capitalize(n),gt.Util._isFunction(this[i])?this[i](t[n]):this._setAttr(n,t[n]))}),this}isListening(){return this._getCache(wo,this._isListening)}_isListening(t){if(!this.listening())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isListening(t):!0}isVisible(){return this._getCache(Po,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isVisible(t):!0}shouldDrawHit(t,n=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let s=!1;ue.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===i)&&(s=!0)});const r=!n&&!Je.Konva.hitOnDragEnabled&&(s||Je.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),n=this,i=0,s,r,o,a;function l(c){for(s=[],r=c.length,o=0;o<r;o++)a=c[o],i++,a.nodeType!==ul&&(s=s.concat(a.getChildren().slice())),a._id===n._id&&(o=r);s.length>0&&s[0].getDepth()<=t&&l(s)}const h=this.getStage();return n.nodeType!==T1&&h&&l(h.getChildren()),i}getDepth(){let t=0,n=this.parent;for(;n;)t++,n=n.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ze),this._clearSelfAndDescendantCache(Ne)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const n=t.getPointerPosition();if(!n)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(n)}getAbsolutePosition(t){let n=!1,i=this.parent;for(;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),r=new gt.Transform,o=this.offset();return r.m=s.slice(),r.translate(o.x,o.y),r.getTranslation()}setAbsolutePosition(t){const{x:n,y:i,...s}=this._clearTransform();this.attrs.x=n,this.attrs.y=i,this._clearCache(Ze);const r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(t.x,t.y),t={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(Ze),this._clearSelfAndDescendantCache(Ne),this}_setTransform(t){let n;for(n in t)this.attrs[n]=t[n]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let n=t.x,i=t.y,s=this.x(),r=this.y();return n!==void 0&&(s+=n),i!==void 0&&(r+=i),this.setPosition({x:s,y:r}),this}_eachAncestorReverse(t,n){let i=[],s=this.getParent(),r,o;if(!(n&&n._id===this._id)){for(i.unshift(this);s&&(!n||s._id!==n._id);)i.unshift(s),s=s.parent;for(r=i.length,o=0;o<r;o++)t(i[o])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return gt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return gt.Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return gt.Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return gt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return gt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&gt.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(cs,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(t*=n.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),n,i,s,r,o;const a={attrs:{},className:this.getClassName()};for(n in t)i=t[n],o=gt.Util.isObject(i)&&!gt.Util._isPlainObject(i)&&!gt.Util._isArray(i),!o&&(s=typeof this[n]=="function"&&this[n],delete t[n],r=s?s.call(this):null,t[n]=i,r!==i&&(a.attrs[n]=i));return gt.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,n,i){const s=[];n&&this._isMatch(t)&&s.push(this);let r=this.parent;for(;r;){if(r===i)return s;r._isMatch(t)&&s.push(r),r=r.parent}return s}isAncestorOf(t){return!1}findAncestor(t,n,i){return this.findAncestors(t,n,i)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let n=t.replace(/ /g,"").split(","),i=n.length,s,r;for(s=0;s<i;s++)if(r=n[s],gt.Util.isValidSelector(r)||(gt.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),gt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),gt.Util.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(fl,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,n={},i){return n.target=n.target||this,i?this._fireAndBubble(t,n):this._fire(t,n),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Ne,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let n;if(t)return n=new gt.Transform,this._eachAncestorReverse(function(i){const s=i.transformsEnabled();s==="all"?n.multiply(i.getTransform()):s==="position"&&n.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),n;{n=this._cache.get(Ne)||new gt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const i=this.transformsEnabled();if(i==="all")n.multiply(this.getTransform());else if(i==="position"){const s=this.attrs.x||0,r=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;n.translate(s-o,r-a)}return n.dirty=!1,n}}getAbsoluteScale(t){let n=this;for(;n;)n._isUnderCache&&(t=n),n=n.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ze,this._getTransform)}_getTransform(){var t,n;const i=this._cache.get(Ze)||new gt.Transform;i.reset();const s=this.x(),r=this.y(),o=Je.Konva.getAngle(this.rotation()),a=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,f=this.attrs.offsetX||0,_=this.attrs.offsetY||0;return(s!==0||r!==0)&&i.translate(s,r),o!==0&&i.rotate(o),(h!==0||c!==0)&&i.skew(h,c),(a!==1||l!==1)&&i.scale(a,l),(f!==0||_!==0)&&i.translate(-1*f,-1*_),i.dirty=!1,i}clone(t){let n=gt.Util.cloneObject(this.attrs),i,s,r,o,a;for(i in t)n[i]=t[i];const l=new this.constructor(n);for(i in this.eventListeners)for(s=this.eventListeners[i],r=s.length,o=0;o<r;o++)a=s[o],a.name.indexOf(b1)<0&&(l.eventListeners[i]||(l.eventListeners[i]=[]),l.eventListeners[i].push(a));return l}_toKonvaCanvas(t){t=t||{};const n=this.getClientRect(),i=this.getStage(),s=t.x!==void 0?t.x:Math.floor(n.x),r=t.y!==void 0?t.y:Math.floor(n.y),o=t.pixelRatio||1,a=new $n.SceneCanvas({width:t.width||Math.ceil(n.width)||(i?i.width():0),height:t.height||Math.ceil(n.height)||(i?i.height():0),pixelRatio:o}),l=a.getContext(),h=new $n.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(s),height:a.height/a.pixelRatio+Math.abs(r),pixelRatio:a.pixelRatio});return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||r)&&l.translate(-1*s,-1*r),this.drawScene(a,void 0,h),l.restore(),a}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const n=t.mimeType||null,i=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(n,i);return t.callback&&t.callback(s),s}toImage(t){return new Promise((n,i)=>{try{const s=t==null?void 0:t.callback;s&&delete t.callback,gt.Util._urlToImage(this.toDataURL(t),function(r){n(r),s==null||s(r)})}catch(s){i(s)}})}toBlob(t){return new Promise((n,i)=>{try{const s=t==null?void 0:t.callback;s&&delete t.callback,this.toCanvas(t).toBlob(r=>{n(r),s==null||s(r)},t==null?void 0:t.mimeType,t==null?void 0:t.quality)}catch(s){i(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Je.Konva.dragDistance}_off(t,n,i){let s=this.eventListeners[t],r,o,a;for(r=0;r<s.length;r++)if(o=s[r].name,a=s[r].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!i||i===a)){if(s.splice(r,1),s.length===0){delete this.eventListeners[t];break}r--}}_fireChangeEvent(t,n,i){this._fire(t+m1,{oldVal:n,newVal:i})}addName(t){if(!this.hasName(t)){const n=this.name(),i=n?n+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const n=(this.name()||"").split(/\s/g),i=n.indexOf(t);return i!==-1&&(n.splice(i,1),this.name(n.join(" "))),this}setAttr(t,n){const i=this[dl+gt.Util._capitalize(t)];return gt.Util._isFunction(i)?i.call(this,n):this._setAttr(t,n),this}_requestDraw(){if(Je.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,n){const i=this.attrs[t];i===n&&!gt.Util.isObject(n)||(n==null?delete this.attrs[t]:this.attrs[t]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,n),this._requestDraw())}_setComponentAttr(t,n,i){let s;i!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][n]=i,this._fireChangeEvent(t,s,i))}_fireAndBubble(t,n,i){n&&this.nodeType===ul&&(n.target=this);const s=[v1,S1,C1,x1,w1,P1];if(!(s.indexOf(t)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(t,n);const o=s.indexOf(t)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!o&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,n,i):this._fireAndBubble.call(this.parent,t,n))}}_getProtoListeners(t){var n,i,s;const r=(n=this._cache.get(is))!==null&&n!==void 0?n:{};let o=r==null?void 0:r[t];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const l=(s=(i=a.eventListeners)===null||i===void 0?void 0:i[t])!==null&&s!==void 0?s:[];o.push(...l),a=Object.getPrototypeOf(a)}r[t]=o,this._cache.set(is,r)}return o}_fire(t,n){n=n||{},n.currentTarget=this,n.type=t;const i=this._getProtoListeners(t);if(i)for(let r=0;r<i.length;r++)i[r].handler.call(this,n);const s=this.eventListeners[t];if(s)for(let r=0;r<s.length;r++)s[r].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const n=t?t.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition();if(!i)return;const r=i._getPointerById(n)||i._changedPointerPositions[0]||s;ue.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-s.x,y:r.y-s.y},dragStatus:"ready",pointerId:n})}startDrag(t,n=!0){ue.DD._dragElements.has(this._id)||this._createDragElement(t);const i=ue.DD._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},n)}_setDragPosition(t,n){const i=this.getStage()._getPointerById(n.pointerId);if(!i)return;let s={x:i.x-n.offset.x,y:i.y-n.offset.y};const r=this.dragBoundFunc();if(r!==void 0){const o=r.call(this,s,t);o?s=o:gt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const n=ue.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),ue.DD._endDragBefore(t),ue.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=ue.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Je.Konva.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;ue.DD._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=ue.DD._dragElements.get(this._id),i=n&&n.dragStatus==="dragging",s=n&&n.dragStatus==="ready";i?this.stopDrag():s&&ue.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const n=this.getStage();if(!n)return!1;const i={x:-t.x,y:-t.y,width:n.width()+2*t.x,height:n.height()+2*t.y};return gt.Util.haveIntersection(i,this.getClientRect())}static create(t,n){return gt.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)}static _createNode(t,n){let i=at.prototype.getClassName.call(t),s=t.children,r,o,a;n&&(t.attrs.container=n),Je.Konva[i]||(gt.Util.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const l=Je.Konva[i];if(r=new l(t.attrs),s)for(o=s.length,a=0;a<o;a++)r.add(at._createNode(s[a]));return r}}Mt.Node=at;at.prototype.nodeType="Node";at.prototype._attrsAffectingSize=[];at.prototype.eventListeners={};at.prototype.on.call(at.prototype,A1,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ze),this._clearSelfAndDescendantCache(Ne)});at.prototype.on.call(at.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Po)});at.prototype.on.call(at.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(wo)});at.prototype.on.call(at.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(cs)});const Pt=$i.Factory.addGetterSetter;Pt(at,"zIndex");Pt(at,"absolutePosition");Pt(at,"position");Pt(at,"x",0,(0,Gt.getNumberValidator)());Pt(at,"y",0,(0,Gt.getNumberValidator)());Pt(at,"globalCompositeOperation","source-over",(0,Gt.getStringValidator)());Pt(at,"opacity",1,(0,Gt.getNumberValidator)());Pt(at,"name","",(0,Gt.getStringValidator)());Pt(at,"id","",(0,Gt.getStringValidator)());Pt(at,"rotation",0,(0,Gt.getNumberValidator)());$i.Factory.addComponentsGetterSetter(at,"scale",["x","y"]);Pt(at,"scaleX",1,(0,Gt.getNumberValidator)());Pt(at,"scaleY",1,(0,Gt.getNumberValidator)());$i.Factory.addComponentsGetterSetter(at,"skew",["x","y"]);Pt(at,"skewX",0,(0,Gt.getNumberValidator)());Pt(at,"skewY",0,(0,Gt.getNumberValidator)());$i.Factory.addComponentsGetterSetter(at,"offset",["x","y"]);Pt(at,"offsetX",0,(0,Gt.getNumberValidator)());Pt(at,"offsetY",0,(0,Gt.getNumberValidator)());Pt(at,"dragDistance",void 0,(0,Gt.getNumberValidator)());Pt(at,"width",0,(0,Gt.getNumberValidator)());Pt(at,"height",0,(0,Gt.getNumberValidator)());Pt(at,"listening",!0,(0,Gt.getBooleanValidator)());Pt(at,"preventDefault",!0,(0,Gt.getBooleanValidator)());Pt(at,"filters",void 0,function(e){return this._filterUpToDate=!1,e});Pt(at,"visible",!0,(0,Gt.getBooleanValidator)());Pt(at,"transformsEnabled","all",(0,Gt.getStringValidator)());Pt(at,"size");Pt(at,"dragBoundFunc");Pt(at,"draggable",!1,(0,Gt.getBooleanValidator)());$i.Factory.backCompat(at,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var En={};Object.defineProperty(En,"__esModule",{value:!0});En.Container=void 0;const ii=ut,Jr=Mt,$s=rt;class Mn extends Jr.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){const n=this.children||[];return t?n.filter(t):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let i=0;i<t.length;i++)this.add(t[i]);return this}const n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const n=this._generalFind(t,!0);return n.length>0?n[0]:void 0}_generalFind(t,n){const i=[];return this._descendants(s=>{const r=s._isMatch(t);return r&&i.push(s),!!(r&&n)}),i}_descendants(t){let n=!1;const i=this.getChildren();for(const s of i){if(n=t(s),n)return!0;if(s.hasChildren()&&(n=s._descendants(t),n))return!0}return!1}toObject(){const t=Jr.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(n=>{t.children.push(n.toObject())}),t}isAncestorOf(t){let n=t.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(t){const n=Jr.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(i){n.add(i.clone())}),n}getAllIntersections(t){const n=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(t)&&n.push(i)}),n}_clearSelfAndDescendantCache(t){var n;super._clearSelfAndDescendantCache(t),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(i){i._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(n,i){n.index=i}),this._requestDraw()}drawScene(t,n,i){const s=this.getLayer(),r=t||s&&s.getCanvas(),o=r&&r.getContext(),a=this._getCanvasCache(),l=a&&a.scene,h=r&&r.isCache;if(!this.isVisible()&&!h)return this;if(l){o.save();const c=this.getAbsoluteTransform(n).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",r,n,i);return this}drawHit(t,n){if(!this.shouldDrawHit(n))return this;const i=this.getLayer(),s=t||i&&i.hitCanvas,r=s&&s.getContext(),o=this._getCanvasCache();if(o&&o.hit){r.save();const l=this.getAbsoluteTransform(n).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",s,n);return this}_drawChildren(t,n,i,s){var r;const o=n&&n.getContext(),a=this.clipWidth(),l=this.clipHeight(),h=this.clipFunc(),c=typeof a=="number"&&typeof l=="number"||h,f=i===this;if(c){o.save();const p=this.getAbsoluteTransform(i);let u=p.getMatrix();o.transform(u[0],u[1],u[2],u[3],u[4],u[5]),o.beginPath();let y;if(h)y=h.call(this,o,this);else{const b=this.clipX(),x=this.clipY();o.rect(b||0,x||0,a,l)}o.clip.apply(o,y),u=p.copy().invert().getMatrix(),o.transform(u[0],u[1],u[2],u[3],u[4],u[5])}const _=!f&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";_&&(o.save(),o._applyGlobalCompositeOperation(this)),(r=this.children)===null||r===void 0||r.forEach(function(p){p[t](n,i,s)}),_&&o.restore(),c&&o.restore()}getClientRect(t={}){var n;const i=t.skipTransform,s=t.relativeTo;let r,o,a,l,h={x:1/0,y:1/0,width:0,height:0};const c=this;(n=this.children)===null||n===void 0||n.forEach(function(p){if(!p.visible())return;const u=p.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});u.width===0&&u.height===0||(r===void 0?(r=u.x,o=u.y,a=u.x+u.width,l=u.y+u.height):(r=Math.min(r,u.x),o=Math.min(o,u.y),a=Math.max(a,u.x+u.width),l=Math.max(l,u.y+u.height)))});const f=this.find("Shape");let _=!1;for(let p=0;p<f.length;p++)if(f[p]._isVisible(this)){_=!0;break}return _&&r!==void 0?h={x:r,y:o,width:a-r,height:l-o}:h={x:0,y:0,width:0,height:0},i?h:this._transformedRect(h,s)}}En.Container=Mn;ii.Factory.addComponentsGetterSetter(Mn,"clip",["x","y","width","height"]);ii.Factory.addGetterSetter(Mn,"clipX",void 0,(0,$s.getNumberValidator)());ii.Factory.addGetterSetter(Mn,"clipY",void 0,(0,$s.getNumberValidator)());ii.Factory.addGetterSetter(Mn,"clipWidth",void 0,(0,$s.getNumberValidator)());ii.Factory.addGetterSetter(Mn,"clipHeight",void 0,(0,$s.getNumberValidator)());ii.Factory.addGetterSetter(Mn,"clipFunc");var ih={},dn={};Object.defineProperty(dn,"__esModule",{value:!0});dn.getCapturedShape=R1;dn.createEvent=sa;dn.hasPointerCapture=F1;dn.setPointerCapture=O1;dn.releaseCapture=rh;const M1=ht,Di=new Map,sh=M1.Konva._global.PointerEvent!==void 0;function R1(e){return Di.get(e)}function sa(e){return{evt:e,pointerId:e.pointerId}}function F1(e,t){return Di.get(e)===t}function O1(e,t){rh(e),t.getStage()&&(Di.set(e,t),sh&&t._fire("gotpointercapture",sa(new PointerEvent("gotpointercapture"))))}function rh(e,t){const n=Di.get(e);if(!n)return;const i=n.getStage();i&&i.content,Di.delete(e),sh&&n._fire("lostpointercapture",sa(new PointerEvent("lostpointercapture")))}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Rt,n=ut,i=En,s=ht,r=xe,o=Hs,a=ht,l=dn,h="Stage",c="string",f="px",_="mouseout",p="mouseleave",u="mouseover",y="mouseenter",b="mousemove",x="mousedown",P="mouseup",d="pointermove",g="pointerdown",v="pointerup",E="pointercancel",N="lostpointercapture",S="pointerout",R="pointerleave",T="pointerover",w="pointerenter",F="contextmenu",L="touchstart",W="touchend",U="touchmove",J="touchcancel",K="wheel",H=5,it=[[y,"_pointerenter"],[x,"_pointerdown"],[b,"_pointermove"],[P,"_pointerup"],[p,"_pointerleave"],[L,"_pointerdown"],[U,"_pointermove"],[W,"_pointerup"],[J,"_pointercancel"],[u,"_pointerover"],[K,"_wheel"],[F,"_contextmenu"],[g,"_pointerdown"],[d,"_pointermove"],[v,"_pointerup"],[E,"_pointercancel"],[R,"_pointerleave"],[N,"_lostpointercapture"]],j={mouse:{[S]:_,[R]:p,[T]:u,[w]:y,[d]:b,[g]:x,[v]:P,[E]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[S]:"touchout",[R]:"touchleave",[T]:"touchover",[w]:"touchenter",[d]:U,[g]:L,[v]:W,[E]:J,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[S]:S,[R]:R,[T]:T,[w]:w,[d]:d,[g]:g,[v]:v,[E]:E,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},st=Ft=>Ft.indexOf("pointer")>=0?"pointer":Ft.indexOf("touch")>=0?"touch":"mouse",Q=Ft=>{const M=st(Ft);if(M==="pointer")return s.Konva.pointerEventsEnabled&&j.pointer;if(M==="touch")return j.touch;if(M==="mouse")return j.mouse};function dt(Ft={}){return(Ft.clipFunc||Ft.clipWidth||Ft.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Ft}const Zt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class zt extends i.Container{constructor(M){super(dt(M)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{dt(this.attrs)}),this._checkVisibility()}_validateAdd(M){const V=M.getType()==="Layer",et=M.getType()==="FastLayer";V||et||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const M=this.visible()?"":"none";this.content.style.display=M}setContainer(M){if(typeof M===c){let V;if(M.charAt(0)==="."){const et=M.slice(1);M=document.getElementsByClassName(et)[0]}else M.charAt(0)!=="#"?V=M:V=M.slice(1),M=document.getElementById(V);if(!M)throw"Can not find container in document with id "+V}return this._setAttr("container",M),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),M.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const M=this.children,V=M.length;for(let et=0;et<V;et++)M[et].clear();return this}clone(M){return M||(M={}),M.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,M)}destroy(){super.destroy();const M=this.content;M&&t.Util._isInDocument(M)&&this.container().removeChild(M);const V=e.stages.indexOf(this);return V>-1&&e.stages.splice(V,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const M=this._pointerPositions[0]||this._changedPointerPositions[0];return M?{x:M.x,y:M.y}:(t.Util.warn(Zt),null)}_getPointerById(M){return this._pointerPositions.find(V=>V.id===M)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(M){M=M||{},M.x=M.x||0,M.y=M.y||0,M.width=M.width||this.width(),M.height=M.height||this.height();const V=new r.SceneCanvas({width:M.width,height:M.height,pixelRatio:M.pixelRatio||1}),et=V.getContext()._context,yt=this.children;return(M.x||M.y)&&et.translate(-1*M.x,-1*M.y),yt.forEach(function(mt){if(!mt.isVisible())return;const wt=mt._toKonvaCanvas(M);et.drawImage(wt._canvas,M.x,M.y,wt.getWidth()/wt.getPixelRatio(),wt.getHeight()/wt.getPixelRatio())}),V}getIntersection(M){if(!M)return null;const V=this.children,et=V.length,yt=et-1;for(let mt=yt;mt>=0;mt--){const wt=V[mt].getIntersection(M);if(wt)return wt}return null}_resizeDOM(){const M=this.width(),V=this.height();this.content&&(this.content.style.width=M+f,this.content.style.height=V+f),this.bufferCanvas.setSize(M,V),this.bufferHitCanvas.setSize(M,V),this.children.forEach(et=>{et.setSize({width:M,height:V}),et.draw()})}add(M,...V){if(arguments.length>1){for(let yt=0;yt<arguments.length;yt++)this.add(arguments[yt]);return this}super.add(M);const et=this.children.length;return et>H&&t.Util.warn("The stage has "+et+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),M.setSize({width:this.width(),height:this.height()}),M.draw(),s.Konva.isBrowser&&this.content.appendChild(M.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(M){return l.hasPointerCapture(M,this)}setPointerCapture(M){l.setPointerCapture(M,this)}releaseCapture(M){l.releaseCapture(M,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&it.forEach(([M,V])=>{this.content.addEventListener(M,et=>{this[V](et)},{passive:!1})})}_pointerenter(M){this.setPointersPositions(M);const V=Q(M.type);V&&this._fire(V.pointerenter,{evt:M,target:this,currentTarget:this})}_pointerover(M){this.setPointersPositions(M);const V=Q(M.type);V&&this._fire(V.pointerover,{evt:M,target:this,currentTarget:this})}_getTargetShape(M){let V=this[M+"targetShape"];return V&&!V.getStage()&&(V=null),V}_pointerleave(M){const V=Q(M.type),et=st(M.type);if(!V)return;this.setPointersPositions(M);const yt=this._getTargetShape(et),mt=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;yt&&mt?(yt._fireAndBubble(V.pointerout,{evt:M}),yt._fireAndBubble(V.pointerleave,{evt:M}),this._fire(V.pointerleave,{evt:M,target:this,currentTarget:this}),this[et+"targetShape"]=null):mt&&(this._fire(V.pointerleave,{evt:M,target:this,currentTarget:this}),this._fire(V.pointerout,{evt:M,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(M){const V=Q(M.type),et=st(M.type);if(!V)return;this.setPointersPositions(M);let yt=!1;this._changedPointerPositions.forEach(mt=>{const wt=this.getIntersection(mt);if(o.DD.justDragged=!1,s.Konva["_"+et+"ListenClick"]=!0,!wt||!wt.isListening()){this[et+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&wt.setPointerCapture(mt.id),this[et+"ClickStartShape"]=wt,wt._fireAndBubble(V.pointerdown,{evt:M,pointerId:mt.id}),yt=!0;const C=M.type.indexOf("touch")>=0;wt.preventDefault()&&M.cancelable&&C&&M.preventDefault()}),yt||this._fire(V.pointerdown,{evt:M,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(M){const V=Q(M.type),et=st(M.type);if(!V||(s.Konva.isDragging()&&o.DD.node.preventDefault()&&M.cancelable&&M.preventDefault(),this.setPointersPositions(M),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const mt={};let wt=!1;const C=this._getTargetShape(et);this._changedPointerPositions.forEach(A=>{const O=l.getCapturedShape(A.id)||this.getIntersection(A),B=A.id,D={evt:M,pointerId:B},I=C!==O;if(I&&C&&(C._fireAndBubble(V.pointerout,{...D},O),C._fireAndBubble(V.pointerleave,{...D},O)),O){if(mt[O._id])return;mt[O._id]=!0}O&&O.isListening()?(wt=!0,I&&(O._fireAndBubble(V.pointerover,{...D},C),O._fireAndBubble(V.pointerenter,{...D},C),this[et+"targetShape"]=O),O._fireAndBubble(V.pointermove,{...D})):C&&(this._fire(V.pointerover,{evt:M,target:this,currentTarget:this,pointerId:B}),this[et+"targetShape"]=null)}),wt||this._fire(V.pointermove,{evt:M,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(M){const V=Q(M.type),et=st(M.type);if(!V)return;this.setPointersPositions(M);const yt=this[et+"ClickStartShape"],mt=this[et+"ClickEndShape"],wt={};let C=!1;this._changedPointerPositions.forEach(A=>{const O=l.getCapturedShape(A.id)||this.getIntersection(A);if(O){if(O.releaseCapture(A.id),wt[O._id])return;wt[O._id]=!0}const B=A.id,D={evt:M,pointerId:B};let I=!1;s.Konva["_"+et+"InDblClickWindow"]?(I=!0,clearTimeout(this[et+"DblTimeout"])):o.DD.justDragged||(s.Konva["_"+et+"InDblClickWindow"]=!0,clearTimeout(this[et+"DblTimeout"])),this[et+"DblTimeout"]=setTimeout(function(){s.Konva["_"+et+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),O&&O.isListening()?(C=!0,this[et+"ClickEndShape"]=O,O._fireAndBubble(V.pointerup,{...D}),s.Konva["_"+et+"ListenClick"]&&yt&&yt===O&&(O._fireAndBubble(V.pointerclick,{...D}),I&&mt&&mt===O&&O._fireAndBubble(V.pointerdblclick,{...D}))):(this[et+"ClickEndShape"]=null,s.Konva["_"+et+"ListenClick"]&&this._fire(V.pointerclick,{evt:M,target:this,currentTarget:this,pointerId:B}),I&&this._fire(V.pointerdblclick,{evt:M,target:this,currentTarget:this,pointerId:B}))}),C||this._fire(V.pointerup,{evt:M,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+et+"ListenClick"]=!1,M.cancelable&&et!=="touch"&&et!=="pointer"&&M.preventDefault()}_contextmenu(M){this.setPointersPositions(M);const V=this.getIntersection(this.getPointerPosition());V&&V.isListening()?V._fireAndBubble(F,{evt:M}):this._fire(F,{evt:M,target:this,currentTarget:this})}_wheel(M){this.setPointersPositions(M);const V=this.getIntersection(this.getPointerPosition());V&&V.isListening()?V._fireAndBubble(K,{evt:M}):this._fire(K,{evt:M,target:this,currentTarget:this})}_pointercancel(M){this.setPointersPositions(M);const V=l.getCapturedShape(M.pointerId)||this.getIntersection(this.getPointerPosition());V&&V._fireAndBubble(v,l.createEvent(M)),l.releaseCapture(M.pointerId)}_lostpointercapture(M){l.releaseCapture(M.pointerId)}setPointersPositions(M){const V=this._getContentPosition();let et=null,yt=null;M=M||window.event,M.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(M.touches,mt=>{this._pointerPositions.push({id:mt.identifier,x:(mt.clientX-V.left)/V.scaleX,y:(mt.clientY-V.top)/V.scaleY})}),Array.prototype.forEach.call(M.changedTouches||M.touches,mt=>{this._changedPointerPositions.push({id:mt.identifier,x:(mt.clientX-V.left)/V.scaleX,y:(mt.clientY-V.top)/V.scaleY})})):(et=(M.clientX-V.left)/V.scaleX,yt=(M.clientY-V.top)/V.scaleY,this.pointerPos={x:et,y:yt},this._pointerPositions=[{x:et,y:yt,id:t.Util._getFirstPointerId(M)}],this._changedPointerPositions=[{x:et,y:yt,id:t.Util._getFirstPointerId(M)}])}_setPointerPosition(M){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(M)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const M=this.content.getBoundingClientRect();return{top:M.top,left:M.left,scaleX:M.width/this.content.clientWidth||1,scaleY:M.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const M=this.container();if(!M)throw"Stage has no container. A container is required.";M.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),M.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(M){M.batchDraw()}),this}}e.Stage=zt,zt.prototype.nodeType=h,(0,a._registerNode)(zt),n.Factory.addGetterSetter(zt,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(Ft=>{Ft.batchDraw()})})})(ih);var ji={},Vt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=ht,n=Rt,i=ut,s=Mt,r=rt,o=ht,a=dn,l="hasShadow",h="shadowRGBA",c="patternImage",f="linearGradient",_="radialGradient";let p;function u(){return p||(p=n.Util.createCanvasElement().getContext("2d"),p)}e.shapes={};function y(R){const T=this.attrs.fillRule;T?R.fill(T):R.fill()}function b(R){R.stroke()}function x(R){const T=this.attrs.fillRule;T?R.fill(T):R.fill()}function P(R){R.stroke()}function d(){this._clearCache(l)}function g(){this._clearCache(h)}function v(){this._clearCache(c)}function E(){this._clearCache(f)}function N(){this._clearCache(_)}class S extends s.Node{constructor(T){super(T);let w;for(;w=n.Util.getRandomColor(),!(w&&!(w in e.shapes)););this.colorKey=w,e.shapes[w]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const w=u().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(w&&w.setTransform){const F=new n.Transform;F.translate(this.fillPatternX(),this.fillPatternY()),F.rotate(t.Konva.getAngle(this.fillPatternRotation())),F.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),F.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const L=F.getMatrix(),W=typeof DOMMatrix>"u"?{a:L[0],b:L[1],c:L[2],d:L[3],e:L[4],f:L[5]}:new DOMMatrix(L);w.setTransform(W)}return w}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const T=this.fillLinearGradientColorStops();if(T){const w=u(),F=this.fillLinearGradientStartPoint(),L=this.fillLinearGradientEndPoint(),W=w.createLinearGradient(F.x,F.y,L.x,L.y);for(let U=0;U<T.length;U+=2)W.addColorStop(T[U],T[U+1]);return W}}_getRadialGradient(){return this._getCache(_,this.__getRadialGradient)}__getRadialGradient(){const T=this.fillRadialGradientColorStops();if(T){const w=u(),F=this.fillRadialGradientStartPoint(),L=this.fillRadialGradientEndPoint(),W=w.createRadialGradient(F.x,F.y,this.fillRadialGradientStartRadius(),L.x,L.y,this.fillRadialGradientEndRadius());for(let U=0;U<T.length;U+=2)W.addColorStop(T[U],T[U+1]);return W}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const T=n.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){const w=this.getStage();if(!w)return!1;const F=w.bufferHitCanvas;return F.getContext().clear(),this.drawHit(F,void 0,!0),F.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var w;if(!((w=this.attrs.perfectDrawEnabled)!==null&&w!==void 0?w:!0))return!1;const L=T||this.hasFill(),W=this.hasStroke(),U=this.getAbsoluteOpacity()!==1;if(L&&W&&U)return!0;const J=this.hasShadow(),K=this.shadowForStrokeEnabled();return!!(L&&W&&J&&K)}setStrokeHitEnabled(T){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let w=!1,F=this.getParent();for(;F;){if(F.isCached()){w=!0;break}F=F.getParent()}const L=T.skipTransform,W=T.relativeTo||w&&this.getStage()||void 0,U=this.getSelfRect(),K=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,H=U.width+K,it=U.height+K,j=!T.skipShadow&&this.hasShadow(),st=j?this.shadowOffsetX():0,Q=j?this.shadowOffsetY():0,dt=H+Math.abs(st),Zt=it+Math.abs(Q),zt=j&&this.shadowBlur()||0,Ft=dt+zt*2,M=Zt+zt*2,V={width:Ft,height:M,x:-(K/2+zt)+Math.min(st,0)+U.x,y:-(K/2+zt)+Math.min(Q,0)+U.y};return L?V:this._transformedRect(V,W)}drawScene(T,w,F){const L=this.getLayer(),W=T||L.getCanvas(),U=W.getContext(),J=this._getCanvasCache(),K=this.getSceneFunc(),H=this.hasShadow();let it;const j=!1,st=w===this;if(!this.isVisible()&&!st)return this;if(J){U.save();const Q=this.getAbsoluteTransform(w).getMatrix();return U.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),this._drawCachedSceneCanvas(U),U.restore(),this}if(!K)return this;if(U.save(),this._useBufferCanvas()&&!j){it=this.getStage();const Q=F||it.bufferCanvas,dt=Q.getContext();dt.clear(),dt.save(),dt._applyLineJoin(this);const Zt=this.getAbsoluteTransform(w).getMatrix();dt.transform(Zt[0],Zt[1],Zt[2],Zt[3],Zt[4],Zt[5]),K.call(this,dt,this),dt.restore();const zt=Q.pixelRatio;H&&U._applyShadow(this),U._applyOpacity(this),U._applyGlobalCompositeOperation(this),U.drawImage(Q._canvas,Q.x||0,Q.y||0,Q.width/zt,Q.height/zt)}else{if(U._applyLineJoin(this),!st){const Q=this.getAbsoluteTransform(w).getMatrix();U.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),U._applyOpacity(this),U._applyGlobalCompositeOperation(this)}H&&U._applyShadow(this),K.call(this,U,this)}return U.restore(),this}drawHit(T,w,F=!1){if(!this.shouldDrawHit(w,F))return this;const L=this.getLayer(),W=T||L.hitCanvas,U=W&&W.getContext(),J=this.hitFunc()||this.sceneFunc(),K=this._getCanvasCache(),H=K&&K.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),H){U.save();const j=this.getAbsoluteTransform(w).getMatrix();return U.transform(j[0],j[1],j[2],j[3],j[4],j[5]),this._drawCachedHitCanvas(U),U.restore(),this}if(!J)return this;if(U.save(),U._applyLineJoin(this),!(this===w)){const j=this.getAbsoluteTransform(w).getMatrix();U.transform(j[0],j[1],j[2],j[3],j[4],j[5])}return J.call(this,U,this),U.restore(),this}drawHitFromCache(T=0){const w=this._getCanvasCache(),F=this._getCachedSceneCanvas(),L=w.hit,W=L.getContext(),U=L.getWidth(),J=L.getHeight();W.clear(),W.drawImage(F._canvas,0,0,U,J);try{const K=W.getImageData(0,0,U,J),H=K.data,it=H.length,j=n.Util._hexToRgb(this.colorKey);for(let st=0;st<it;st+=4)H[st+3]>T?(H[st]=j.r,H[st+1]=j.g,H[st+2]=j.b,H[st+3]=255):H[st+3]=0;W.putImageData(K,0,0)}catch(K){n.Util.error("Unable to draw hit graph from cached scene canvas. "+K.message)}return this}hasPointerCapture(T){return a.hasPointerCapture(T,this)}setPointerCapture(T){a.setPointerCapture(T,this)}releaseCapture(T){a.releaseCapture(T,this)}}e.Shape=S,S.prototype._fillFunc=y,S.prototype._strokeFunc=b,S.prototype._fillFuncHit=x,S.prototype._strokeFuncHit=P,S.prototype._centroid=!1,S.prototype.nodeType="Shape",(0,o._registerNode)(S),S.prototype.eventListeners={},S.prototype.on.call(S.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",d),S.prototype.on.call(S.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",g),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",v),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",E),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",N),i.Factory.addGetterSetter(S,"stroke",void 0,(0,r.getStringOrGradientValidator)()),i.Factory.addGetterSetter(S,"strokeWidth",2,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(S,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(S,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(S,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(S,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(S,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(S,"lineJoin"),i.Factory.addGetterSetter(S,"lineCap"),i.Factory.addGetterSetter(S,"sceneFunc"),i.Factory.addGetterSetter(S,"hitFunc"),i.Factory.addGetterSetter(S,"dash"),i.Factory.addGetterSetter(S,"dashOffset",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(S,"shadowColor",void 0,(0,r.getStringValidator)()),i.Factory.addGetterSetter(S,"shadowBlur",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(S,"shadowOpacity",1,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(S,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(S,"shadowOffsetX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(S,"shadowOffsetY",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(S,"fillPatternImage"),i.Factory.addGetterSetter(S,"fill",void 0,(0,r.getStringOrGradientValidator)()),i.Factory.addGetterSetter(S,"fillPatternX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(S,"fillPatternY",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(S,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(S,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(S,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(S,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(S,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(S,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(S,"fillEnabled",!0),i.Factory.addGetterSetter(S,"strokeEnabled",!0),i.Factory.addGetterSetter(S,"shadowEnabled",!0),i.Factory.addGetterSetter(S,"dashEnabled",!0),i.Factory.addGetterSetter(S,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(S,"fillPriority","color"),i.Factory.addComponentsGetterSetter(S,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(S,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(S,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(S,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(S,"fillPatternScaleX",1,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(S,"fillPatternScaleY",1,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(S,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(S,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(S,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(S,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(S,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(S,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(S,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(S,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(S,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(S,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(S,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(S,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(S,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(S,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(S,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(S,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(S,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(S,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(S,"fillPatternRotation",0),i.Factory.addGetterSetter(S,"fillRule",void 0,(0,r.getStringValidator)()),i.Factory.backCompat(S,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Vt);Object.defineProperty(ji,"__esModule",{value:!0});ji.Layer=void 0;const ke=Rt,Qr=En,jn=Mt,ra=ut,gl=xe,k1=rt,N1=Vt,L1=ht,D1="#",G1="beforeDraw",I1="draw",oh=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],B1=oh.length;class si extends Qr.Container{constructor(t){super(t),this.canvas=new gl.SceneCanvas,this.hitCanvas=new gl.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){jn.Node.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!jn.Node.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(jn.Node.prototype.moveDown.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(jn.Node.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return jn.Node.prototype.remove.call(this),t&&t.parentNode&&ke.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:n}){return this.canvas.setSize(t,n),this.hitCanvas.setSize(t,n),this._setSmoothEnabled(),this}_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&ke.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),jn.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ke.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ke.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ke.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let n=1,i=!1;for(;;){for(let s=0;s<B1;s++){const r=oh[s],o=this._getIntersection({x:t.x+r.x*n,y:t.y+r.y*n}),a=o.shape;if(a)return a;if(i=!!o.antialiased,!o.antialiased)break}if(i)n+=1;else return null}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,s=i[3];if(s===255){const r=ke.Util._rgbToHex(i[0],i[1],i[2]),o=N1.shapes[D1+r];return o?{shape:o}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,n,i){const s=this.getLayer(),r=t||s&&s.getCanvas();return this._fire(G1,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),Qr.Container.prototype.drawScene.call(this,r,n,i),this._fire(I1,{node:this}),this}drawHit(t,n){const i=this.getLayer(),s=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Qr.Container.prototype.drawHit.call(this,s,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){ke.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return ke.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return ke.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}ji.Layer=si;si.prototype.nodeType="Layer";(0,L1._registerNode)(si);ra.Factory.addGetterSetter(si,"imageSmoothingEnabled",!0);ra.Factory.addGetterSetter(si,"clearBeforeDraw",!0);ra.Factory.addGetterSetter(si,"hitGraphEnabled",!0,(0,k1.getBooleanValidator)());var js={};Object.defineProperty(js,"__esModule",{value:!0});js.FastLayer=void 0;const U1=Rt,V1=ji,H1=ht;class oa extends V1.Layer{constructor(t){super(t),this.listening(!1),U1.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}js.FastLayer=oa;oa.prototype.nodeType="FastLayer";(0,H1._registerNode)(oa);var ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.Group=void 0;const $1=Rt,j1=En,W1=ht;class aa extends j1.Container{_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&$1.Util.throw("You may only add groups and shapes to groups.")}}ri.Group=aa;aa.prototype.nodeType="Group";(0,W1._registerNode)(aa);var oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.Animation=void 0;const Zr=ht,pl=Rt,to=function(){return Zr.glob.performance&&Zr.glob.performance.now?function(){return Zr.glob.performance.now()}:function(){return new Date().getTime()}}();class Ee{constructor(t,n){this.id=Ee.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:to(),frameRate:0},this.func=t,this.setLayers(n)}setLayers(t){let n=[];return t&&(n=Array.isArray(t)?t:[t]),this.layers=n,this}getLayers(){return this.layers}addLayer(t){const n=this.layers,i=n.length;for(let s=0;s<i;s++)if(n[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const n=Ee.animations,i=n.length;for(let s=0;s<i;s++)if(n[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=to(),Ee._addAnimation(this),this}stop(){return Ee._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const n=t.id,i=this.animations,s=i.length;for(let r=0;r<s;r++)if(i[r].id===n){this.animations.splice(r,1);break}}static _runFrames(){const t={},n=this.animations;for(let i=0;i<n.length;i++){const s=n[i],r=s.layers,o=s.func;s._updateFrameObject(to());const a=r.length;let l;if(o?l=o.call(s,s.frame)!==!1:l=!0,!!l)for(let h=0;h<a;h++){const c=r[h];c._id!==void 0&&(t[c._id]=c)}}for(const i in t)t.hasOwnProperty(i)&&t[i].batchDraw()}static _animationLoop(){const t=Ee;t.animations.length?(t._runFrames(),pl.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,pl.Util.requestAnimFrame(this._animationLoop))}}oi.Animation=Ee;Ee.animations=[];Ee.animIdCounter=0;Ee.animRunning=!1;var ah={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Rt,n=oi,i=Mt,s=ht,r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,l=3,h=["fill","stroke","shadowColor"];let c=0;class f{constructor(u,y,b,x,P,d,g){this.prop=u,this.propFunc=y,this.begin=x,this._pos=x,this.duration=d,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=b,this._change=P-this.begin,this.pause()}fire(u){const y=this[u];y&&y()}setTime(u){u>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():u<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=u,this.update())}getTime(){return this._time}setPosition(u){this.prevPos=this._pos,this.propFunc(u),this._pos=u}getPosition(u){return u===void 0&&(u=this._time),this.func(u,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(u){this.pause(),this._time=u,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const u=this.getTimer()-this._startTime;this.state===a?this.setTime(u):this.state===l&&this.setTime(this.duration-u)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class _{constructor(u){const y=this,b=u.node,x=b._id,P=u.easing||e.Easings.Linear,d=!!u.yoyo;let g,v;typeof u.duration>"u"?g=.3:u.duration===0?g=.001:g=u.duration,this.node=b,this._id=c++;const E=b.getLayer()||(b instanceof s.Konva.Stage?b.getLayers():null);E||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){y.tween.onEnterFrame()},E),this.tween=new f(v,function(N){y._tweenFunc(N)},P,0,1,g*1e3,d),this._addListeners(),_.attrs[x]||(_.attrs[x]={}),_.attrs[x][this._id]||(_.attrs[x][this._id]={}),_.tweens[x]||(_.tweens[x]={});for(v in u)r[v]===void 0&&this._addAttr(v,u[v]);this.reset(),this.onFinish=u.onFinish,this.onReset=u.onReset,this.onUpdate=u.onUpdate}_addAttr(u,y){const b=this.node,x=b._id;let P,d,g,v,E;const N=_.tweens[x][u];N&&delete _.attrs[x][N][u];let S=b.getAttr(u);if(t.Util._isArray(y))if(P=[],d=Math.max(y.length,S.length),u==="points"&&y.length!==S.length&&(y.length>S.length?(v=S,S=t.Util._prepareArrayForTween(S,y,b.closed())):(g=y,y=t.Util._prepareArrayForTween(y,S,b.closed()))),u.indexOf("fill")===0)for(let R=0;R<d;R++)if(R%2===0)P.push(y[R]-S[R]);else{const T=t.Util.colorToRGBA(S[R]);E=t.Util.colorToRGBA(y[R]),S[R]=T,P.push({r:E.r-T.r,g:E.g-T.g,b:E.b-T.b,a:E.a-T.a})}else for(let R=0;R<d;R++)P.push(y[R]-S[R]);else h.indexOf(u)!==-1?(S=t.Util.colorToRGBA(S),E=t.Util.colorToRGBA(y),P={r:E.r-S.r,g:E.g-S.g,b:E.b-S.b,a:E.a-S.a}):P=y-S;_.attrs[x][this._id][u]={start:S,diff:P,end:y,trueEnd:g,trueStart:v},_.tweens[x][u]=this._id}_tweenFunc(u){const y=this.node,b=_.attrs[y._id][this._id];let x,P,d,g,v,E,N,S;for(x in b){if(P=b[x],d=P.start,g=P.diff,S=P.end,t.Util._isArray(d))if(v=[],N=Math.max(d.length,S.length),x.indexOf("fill")===0)for(E=0;E<N;E++)E%2===0?v.push((d[E]||0)+g[E]*u):v.push("rgba("+Math.round(d[E].r+g[E].r*u)+","+Math.round(d[E].g+g[E].g*u)+","+Math.round(d[E].b+g[E].b*u)+","+(d[E].a+g[E].a*u)+")");else for(E=0;E<N;E++)v.push((d[E]||0)+g[E]*u);else h.indexOf(x)!==-1?v="rgba("+Math.round(d.r+g.r*u)+","+Math.round(d.g+g.g*u)+","+Math.round(d.b+g.b*u)+","+(d.a+g.a*u)+")":v=d+g*u;y.setAttr(x,v)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const u=this.node,y=_.attrs[u._id][this._id];y.points&&y.points.trueEnd&&u.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const u=this.node,y=_.attrs[u._id][this._id];y.points&&y.points.trueStart&&u.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(u){return this.tween.seek(u*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const u=this.node._id,y=this._id,b=_.tweens[u];this.pause(),this.anim&&this.anim.stop();for(const x in b)delete _.tweens[u][x];delete _.attrs[u][y],_.tweens[u]&&(Object.keys(_.tweens[u]).length===0&&delete _.tweens[u],Object.keys(_.attrs[u]).length===0&&delete _.attrs[u])}}e.Tween=_,_.attrs={},_.tweens={},i.Node.prototype.to=function(p){const u=p.onFinish;p.node=this,p.onFinish=function(){this.destroy(),u&&u()},new _(p).play()},e.Easings={BackEaseIn(p,u,y,b){return y*(p/=b)*p*((1.70158+1)*p-1.70158)+u},BackEaseOut(p,u,y,b){return y*((p=p/b-1)*p*((1.70158+1)*p+1.70158)+1)+u},BackEaseInOut(p,u,y,b){let x=1.70158;return(p/=b/2)<1?y/2*(p*p*(((x*=1.525)+1)*p-x))+u:y/2*((p-=2)*p*(((x*=1.525)+1)*p+x)+2)+u},ElasticEaseIn(p,u,y,b,x,P){let d=0;return p===0?u:(p/=b)===1?u+y:(P||(P=b*.3),!x||x<Math.abs(y)?(x=y,d=P/4):d=P/(2*Math.PI)*Math.asin(y/x),-(x*Math.pow(2,10*(p-=1))*Math.sin((p*b-d)*(2*Math.PI)/P))+u)},ElasticEaseOut(p,u,y,b,x,P){let d=0;return p===0?u:(p/=b)===1?u+y:(P||(P=b*.3),!x||x<Math.abs(y)?(x=y,d=P/4):d=P/(2*Math.PI)*Math.asin(y/x),x*Math.pow(2,-10*p)*Math.sin((p*b-d)*(2*Math.PI)/P)+y+u)},ElasticEaseInOut(p,u,y,b,x,P){let d=0;return p===0?u:(p/=b/2)===2?u+y:(P||(P=b*(.3*1.5)),!x||x<Math.abs(y)?(x=y,d=P/4):d=P/(2*Math.PI)*Math.asin(y/x),p<1?-.5*(x*Math.pow(2,10*(p-=1))*Math.sin((p*b-d)*(2*Math.PI)/P))+u:x*Math.pow(2,-10*(p-=1))*Math.sin((p*b-d)*(2*Math.PI)/P)*.5+y+u)},BounceEaseOut(p,u,y,b){return(p/=b)<1/2.75?y*(7.5625*p*p)+u:p<2/2.75?y*(7.5625*(p-=1.5/2.75)*p+.75)+u:p<2.5/2.75?y*(7.5625*(p-=2.25/2.75)*p+.9375)+u:y*(7.5625*(p-=2.625/2.75)*p+.984375)+u},BounceEaseIn(p,u,y,b){return y-e.Easings.BounceEaseOut(b-p,0,y,b)+u},BounceEaseInOut(p,u,y,b){return p<b/2?e.Easings.BounceEaseIn(p*2,0,y,b)*.5+u:e.Easings.BounceEaseOut(p*2-b,0,y,b)*.5+y*.5+u},EaseIn(p,u,y,b){return y*(p/=b)*p+u},EaseOut(p,u,y,b){return-y*(p/=b)*(p-2)+u},EaseInOut(p,u,y,b){return(p/=b/2)<1?y/2*p*p+u:-y/2*(--p*(p-2)-1)+u},StrongEaseIn(p,u,y,b){return y*(p/=b)*p*p*p*p+u},StrongEaseOut(p,u,y,b){return y*((p=p/b-1)*p*p*p*p+1)+u},StrongEaseInOut(p,u,y,b){return(p/=b/2)<1?y/2*p*p*p*p*p+u:y/2*((p-=2)*p*p*p*p+2)+u},Linear(p,u,y,b){return y*p/b+u}}})(ah);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=ht,n=Rt,i=Mt,s=En,r=ih,o=ji,a=js,l=ri,h=Hs,c=Vt,f=oi,_=ah,p=Ue,u=xe;e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:i.Node,Container:s.Container,Stage:r.Stage,stages:r.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:l.Group,DD:h.DD,Shape:c.Shape,shapes:c.shapes,Animation:f.Animation,Tween:_.Tween,Easings:_.Easings,Context:p.Context,Canvas:u.Canvas}),e.default=e.Konva})(Zc);var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.Arc=void 0;const zs=ut,z1=Vt,_l=ht,Ks=rt,K1=ht;class Ke extends z1.Shape{_sceneFunc(t){const n=_l.Konva.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,i),t.arc(0,0,this.innerRadius(),n,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),n=this.outerRadius(),i=this.clockwise(),s=_l.Konva.getAngle(i?360-this.angle():this.angle()),r=Math.cos(Math.min(s,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),l=Math.sin(Math.min(s,Math.PI/2)),h=r*(r>0?t:n),c=o*n,f=a*(a>0?t:n),_=l*(l>0?n:t);return{x:h,y:i?-1*_:f,width:c-h,height:_-f}}}Ws.Arc=Ke;Ke.prototype._centroid=!0;Ke.prototype.className="Arc";Ke.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];(0,K1._registerNode)(Ke);zs.Factory.addGetterSetter(Ke,"innerRadius",0,(0,Ks.getNumberValidator)());zs.Factory.addGetterSetter(Ke,"outerRadius",0,(0,Ks.getNumberValidator)());zs.Factory.addGetterSetter(Ke,"angle",0,(0,Ks.getNumberValidator)());zs.Factory.addGetterSetter(Ke,"clockwise",!1,(0,Ks.getBooleanValidator)());var Ys={},Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.Line=void 0;const Xs=ut,Y1=ht,X1=Vt,lh=rt;function To(e,t,n,i,s,r,o){const a=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)),l=Math.sqrt(Math.pow(s-n,2)+Math.pow(r-i,2)),h=o*a/(a+l),c=o*l/(a+l),f=n-h*(s-e),_=i-h*(r-t),p=n+c*(s-e),u=i+c*(r-t);return[f,_,p,u]}function ml(e,t){const n=e.length,i=[];for(let s=2;s<n-2;s+=2){const r=To(e[s-2],e[s-1],e[s],e[s+1],e[s+2],e[s+3],t);isNaN(r[0])||(i.push(r[0]),i.push(r[1]),i.push(e[s]),i.push(e[s+1]),i.push(r[2]),i.push(r[3]))}return i}class un extends X1.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const n=this.points(),i=n.length,s=this.tension(),r=this.closed(),o=this.bezier();if(!i)return;let a=0;if(t.beginPath(),t.moveTo(n[0],n[1]),s!==0&&i>4){const l=this.getTensionPoints(),h=l.length;for(a=r?0:4,r||t.quadraticCurveTo(l[0],l[1],l[2],l[3]);a<h-2;)t.bezierCurveTo(l[a++],l[a++],l[a++],l[a++],l[a++],l[a++]);r||t.quadraticCurveTo(l[h-2],l[h-1],n[i-2],n[i-1])}else if(o)for(a=2;a<i;)t.bezierCurveTo(n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]);else for(a=2;a<i;a+=2)t.lineTo(n[a],n[a+1]);r?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():ml(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),n=t.length,i=this.tension(),s=To(t[n-2],t[n-1],t[0],t[1],t[2],t[3],i),r=To(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],i),o=ml(t,i);return[s[2],s[3]].concat(o).concat([r[0],r[1],t[n-2],t[n-1],r[2],r[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let n=t[0],i=t[0],s=t[1],r=t[1],o,a;for(let l=0;l<t.length/2;l++)o=t[l*2],a=t[l*2+1],n=Math.min(n,o),i=Math.max(i,o),s=Math.min(s,a),r=Math.max(r,a);return{x:n,y:s,width:i-n,height:r-s}}}Wi.Line=un;un.prototype.className="Line";un.prototype._attrsAffectingSize=["points","bezier","tension"];(0,Y1._registerNode)(un);Xs.Factory.addGetterSetter(un,"closed",!1);Xs.Factory.addGetterSetter(un,"bezier",!1);Xs.Factory.addGetterSetter(un,"tension",0,(0,lh.getNumberValidator)());Xs.Factory.addGetterSetter(un,"points",[],(0,lh.getNumberArrayValidator)());var ai={},ch={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(o,a,l)=>{let h,c;const _=l/2;h=0;for(let p=0;p<20;p++)c=_*e.tValues[20][p]+_,h+=e.cValues[20][p]*i(o,a,c);return _*h};e.getCubicArcLength=t;const n=(o,a,l)=>{l===void 0&&(l=1);const h=o[0]-2*o[1]+o[2],c=a[0]-2*a[1]+a[2],f=2*o[1]-2*o[0],_=2*a[1]-2*a[0],p=4*(h*h+c*c),u=4*(h*f+c*_),y=f*f+_*_;if(p===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const b=u/(2*p),x=y/p,P=l+b,d=x-b*b,g=P*P+d>0?Math.sqrt(P*P+d):0,v=b*b+d>0?Math.sqrt(b*b+d):0,E=b+Math.sqrt(b*b+d)!==0?d*Math.log(Math.abs((P+g)/(b+v))):0;return Math.sqrt(p)/2*(P*g-b*v+E)};e.getQuadraticArcLength=n;function i(o,a,l){const h=s(1,l,o),c=s(1,l,a),f=h*h+c*c;return Math.sqrt(f)}const s=(o,a,l)=>{const h=l.length-1;let c,f;if(h===0)return 0;if(o===0){f=0;for(let _=0;_<=h;_++)f+=e.binomialCoefficients[h][_]*Math.pow(1-a,h-_)*Math.pow(a,_)*l[_];return f}else{c=new Array(h);for(let _=0;_<h;_++)c[_]=h*(l[_+1]-l[_]);return s(o-1,a,c)}},r=(o,a,l)=>{let h=1,c=o/a,f=(o-l(c))/a,_=0;for(;h>.001;){const p=l(c+f),u=Math.abs(o-p)/a;if(u<h)h=u,c+=f;else{const y=l(c-f),b=Math.abs(o-y)/a;b<h?(h=b,c-=f):f/=2}if(_++,_>500)break}return c};e.t2length=r})(ch);Object.defineProperty(ai,"__esModule",{value:!0});ai.Path=void 0;const q1=ut,J1=ht,Q1=Vt,Wn=ch;class Ut extends Q1.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ut.parsePathData(this.data()),this.pathLength=Ut.getPathLength(this.dataArray)}_sceneFunc(t){const n=this.dataArray;t.beginPath();let i=!1;for(let s=0;s<n.length;s++){const r=n[s].command,o=n[s].points;switch(r){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":const a=o[0],l=o[1],h=o[2],c=o[3],f=o[4],_=o[5],p=o[6],u=o[7],y=h>c?h:c,b=h>c?1:h/c,x=h>c?c/h:1;t.translate(a,l),t.rotate(p),t.scale(b,x),t.arc(0,0,y,f,f+_,1-u),t.scale(1/b,1/x),t.rotate(-p),t.translate(-a,-l);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(l){if(l.command==="A"){const h=l.points[4],c=l.points[5],f=l.points[4]+c;let _=Math.PI/180;if(Math.abs(h-f)<_&&(_=Math.abs(h-f)),c<0)for(let p=h-_;p>f;p-=_){const u=Ut.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],p,0);t.push(u.x,u.y)}else for(let p=h+_;p<f;p+=_){const u=Ut.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],p,0);t.push(u.x,u.y)}}else if(l.command==="C")for(let h=0;h<=1;h+=.01){const c=Ut.getPointOnCubicBezier(h,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);t.push(c.x,c.y)}else t=t.concat(l.points)});let n=t[0],i=t[0],s=t[1],r=t[1],o,a;for(let l=0;l<t.length/2;l++)o=t[l*2],a=t[l*2+1],isNaN(o)||(n=Math.min(n,o),i=Math.max(i,o)),isNaN(a)||(s=Math.min(s,a),r=Math.max(r,a));return{x:n,y:s,width:i-n,height:r-s}}getLength(){return this.pathLength}getPointAtLength(t){return Ut.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,n,i,s){return Math.sqrt((i-t)*(i-t)+(s-n)*(s-n))}static getPathLength(t){let n=0;for(let i=0;i<t.length;++i)n+=t[i].pathLength;return n}static getPointAtLengthOfDataArray(t,n){let i,s=0,r=n.length;if(!r)return null;for(;s<r&&t>n[s].pathLength;)t-=n[s].pathLength,++s;if(s===r)return i=n[s-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return n[s].command==="M"?(i=n[s].points.slice(0,2),{x:i[0],y:i[1]}):{x:n[s].start.x,y:n[s].start.y};const o=n[s],a=o.points;switch(o.command){case"L":return Ut.getPointOnLine(t,o.start.x,o.start.y,a[0],a[1]);case"C":return Ut.getPointOnCubicBezier((0,Wn.t2length)(t,Ut.getPathLength(n),y=>(0,Wn.getCubicArcLength)([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],y)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Ut.getPointOnQuadraticBezier((0,Wn.t2length)(t,Ut.getPathLength(n),y=>(0,Wn.getQuadraticArcLength)([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],y)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":const l=a[0],h=a[1],c=a[2],f=a[3],_=a[5],p=a[6];let u=a[4];return u+=_*t/o.pathLength,Ut.getPointOnEllipticalArc(l,h,c,f,u,p)}return null}static getPointOnLine(t,n,i,s,r,o,a){o=o??n,a=a??i;const l=this.getLineLength(n,i,s,r);if(l<1e-10)return{x:n,y:i};if(s===n)return{x:o,y:a+(r>i?t:-t)};const h=(r-i)/(s-n),c=Math.sqrt(t*t/(1+h*h))*(s<n?-1:1),f=h*c;if(Math.abs(a-i-h*(o-n))<1e-10)return{x:o+c,y:a+f};const _=((o-n)*(s-n)+(a-i)*(r-i))/(l*l),p=n+_*(s-n),u=i+_*(r-i),y=this.getLineLength(o,a,p,u),b=Math.sqrt(t*t-y*y),x=Math.sqrt(b*b/(1+h*h))*(s<n?-1:1),P=h*x;return{x:p+x,y:u+P}}static getPointOnCubicBezier(t,n,i,s,r,o,a,l,h){function c(b){return b*b*b}function f(b){return 3*b*b*(1-b)}function _(b){return 3*b*(1-b)*(1-b)}function p(b){return(1-b)*(1-b)*(1-b)}const u=l*c(t)+o*f(t)+s*_(t)+n*p(t),y=h*c(t)+a*f(t)+r*_(t)+i*p(t);return{x:u,y}}static getPointOnQuadraticBezier(t,n,i,s,r,o,a){function l(p){return p*p}function h(p){return 2*p*(1-p)}function c(p){return(1-p)*(1-p)}const f=o*l(t)+s*h(t)+n*c(t),_=a*l(t)+r*h(t)+i*c(t);return{x:f,y:_}}static getPointOnEllipticalArc(t,n,i,s,r,o){const a=Math.cos(o),l=Math.sin(o),h={x:i*Math.cos(r),y:s*Math.sin(r)};return{x:t+(h.x*a-h.y*l),y:n+(h.x*l+h.y*a)}}static parsePathData(t){if(!t)return[];let n=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let f=0;f<i.length;f++)n=n.replace(new RegExp(i[f],"g"),"|"+i[f]);const s=n.split("|"),r=[],o=[];let a=0,l=0;const h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let c;for(let f=1;f<s.length;f++){let _=s[f],p=_.charAt(0);for(_=_.slice(1),o.length=0;c=h.exec(_);)o.push(c[0]);const u=[];for(let y=0,b=o.length;y<b;y++){if(o[y]==="00"){u.push(0,0);continue}const x=parseFloat(o[y]);isNaN(x)?u.push(0):u.push(x)}for(;u.length>0&&!isNaN(u[0]);){let y="",b=[];const x=a,P=l;let d,g,v,E,N,S,R,T,w,F;switch(p){case"l":a+=u.shift(),l+=u.shift(),y="L",b.push(a,l);break;case"L":a=u.shift(),l=u.shift(),b.push(a,l);break;case"m":const L=u.shift(),W=u.shift();if(a+=L,l+=W,y="M",r.length>2&&r[r.length-1].command==="z"){for(let U=r.length-2;U>=0;U--)if(r[U].command==="M"){a=r[U].points[0]+L,l=r[U].points[1]+W;break}}b.push(a,l),p="l";break;case"M":a=u.shift(),l=u.shift(),y="M",b.push(a,l),p="L";break;case"h":a+=u.shift(),y="L",b.push(a,l);break;case"H":a=u.shift(),y="L",b.push(a,l);break;case"v":l+=u.shift(),y="L",b.push(a,l);break;case"V":l=u.shift(),y="L",b.push(a,l);break;case"C":b.push(u.shift(),u.shift(),u.shift(),u.shift()),a=u.shift(),l=u.shift(),b.push(a,l);break;case"c":b.push(a+u.shift(),l+u.shift(),a+u.shift(),l+u.shift()),a+=u.shift(),l+=u.shift(),y="C",b.push(a,l);break;case"S":g=a,v=l,d=r[r.length-1],d.command==="C"&&(g=a+(a-d.points[2]),v=l+(l-d.points[3])),b.push(g,v,u.shift(),u.shift()),a=u.shift(),l=u.shift(),y="C",b.push(a,l);break;case"s":g=a,v=l,d=r[r.length-1],d.command==="C"&&(g=a+(a-d.points[2]),v=l+(l-d.points[3])),b.push(g,v,a+u.shift(),l+u.shift()),a+=u.shift(),l+=u.shift(),y="C",b.push(a,l);break;case"Q":b.push(u.shift(),u.shift()),a=u.shift(),l=u.shift(),b.push(a,l);break;case"q":b.push(a+u.shift(),l+u.shift()),a+=u.shift(),l+=u.shift(),y="Q",b.push(a,l);break;case"T":g=a,v=l,d=r[r.length-1],d.command==="Q"&&(g=a+(a-d.points[0]),v=l+(l-d.points[1])),a=u.shift(),l=u.shift(),y="Q",b.push(g,v,a,l);break;case"t":g=a,v=l,d=r[r.length-1],d.command==="Q"&&(g=a+(a-d.points[0]),v=l+(l-d.points[1])),a+=u.shift(),l+=u.shift(),y="Q",b.push(g,v,a,l);break;case"A":E=u.shift(),N=u.shift(),S=u.shift(),R=u.shift(),T=u.shift(),w=a,F=l,a=u.shift(),l=u.shift(),y="A",b=this.convertEndpointToCenterParameterization(w,F,a,l,R,T,E,N,S);break;case"a":E=u.shift(),N=u.shift(),S=u.shift(),R=u.shift(),T=u.shift(),w=a,F=l,a+=u.shift(),l+=u.shift(),y="A",b=this.convertEndpointToCenterParameterization(w,F,a,l,R,T,E,N,S);break}r.push({command:y||p,points:b,start:{x,y:P},pathLength:this.calcLength(x,P,y||p,b)})}(p==="z"||p==="Z")&&r.push({command:"z",points:[],start:void 0,pathLength:0})}return r}static calcLength(t,n,i,s){let r,o,a,l;const h=Ut;switch(i){case"L":return h.getLineLength(t,n,s[0],s[1]);case"C":return(0,Wn.getCubicArcLength)([t,s[0],s[2],s[4]],[n,s[1],s[3],s[5]],1);case"Q":return(0,Wn.getQuadraticArcLength)([t,s[0],s[2]],[n,s[1],s[3]],1);case"A":r=0;const c=s[4],f=s[5],_=s[4]+f;let p=Math.PI/180;if(Math.abs(c-_)<p&&(p=Math.abs(c-_)),o=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),f<0)for(l=c-p;l>_;l-=p)a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),r+=h.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=c+p;l<_;l+=p)a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),r+=h.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],_,0),r+=h.getLineLength(o.x,o.y,a.x,a.y),r}return 0}static convertEndpointToCenterParameterization(t,n,i,s,r,o,a,l,h){const c=h*(Math.PI/180),f=Math.cos(c)*(t-i)/2+Math.sin(c)*(n-s)/2,_=-1*Math.sin(c)*(t-i)/2+Math.cos(c)*(n-s)/2,p=f*f/(a*a)+_*_/(l*l);p>1&&(a*=Math.sqrt(p),l*=Math.sqrt(p));let u=Math.sqrt((a*a*(l*l)-a*a*(_*_)-l*l*(f*f))/(a*a*(_*_)+l*l*(f*f)));r===o&&(u*=-1),isNaN(u)&&(u=0);const y=u*a*_/l,b=u*-l*f/a,x=(t+i)/2+Math.cos(c)*y-Math.sin(c)*b,P=(n+s)/2+Math.sin(c)*y+Math.cos(c)*b,d=function(T){return Math.sqrt(T[0]*T[0]+T[1]*T[1])},g=function(T,w){return(T[0]*w[0]+T[1]*w[1])/(d(T)*d(w))},v=function(T,w){return(T[0]*w[1]<T[1]*w[0]?-1:1)*Math.acos(g(T,w))},E=v([1,0],[(f-y)/a,(_-b)/l]),N=[(f-y)/a,(_-b)/l],S=[(-1*f-y)/a,(-1*_-b)/l];let R=v(N,S);return g(N,S)<=-1&&(R=Math.PI),g(N,S)>=1&&(R=0),o===0&&R>0&&(R=R-2*Math.PI),o===1&&R<0&&(R=R+2*Math.PI),[x,P,a,l,E,R,c,o]}}ai.Path=Ut;Ut.prototype.className="Path";Ut.prototype._attrsAffectingSize=["data"];(0,J1._registerNode)(Ut);q1.Factory.addGetterSetter(Ut,"data");Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Arrow=void 0;const qs=ut,Z1=Wi,hh=rt,t2=ht,yl=ai;class Rn extends Z1.Line{_sceneFunc(t){super._sceneFunc(t);const n=Math.PI*2,i=this.points();let s=i;const r=this.tension()!==0&&i.length>4;r&&(s=this.getTensionPoints());const o=this.pointerLength(),a=i.length;let l,h;if(r){const _=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[a-2],i[a-1]],p=yl.Path.calcLength(s[s.length-4],s[s.length-3],"C",_),u=yl.Path.getPointOnQuadraticBezier(Math.min(1,1-o/p),_[0],_[1],_[2],_[3],_[4],_[5]);l=i[a-2]-u.x,h=i[a-1]-u.y}else l=i[a-2]-i[a-4],h=i[a-1]-i[a-3];const c=(Math.atan2(h,l)+n)%n,f=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[a-2],i[a-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-o,f/2),t.lineTo(-o,-f/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),r?(l=(s[0]+s[2])/2-i[0],h=(s[1]+s[3])/2-i[1]):(l=i[2]-i[0],h=i[3]-i[1]),t.rotate((Math.atan2(-h,-l)+n)%n),t.moveTo(0,0),t.lineTo(-o,f/2),t.lineTo(-o,-f/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),n=this.pointerWidth()/2;return{x:t.x,y:t.y-n,width:t.width,height:t.height+n*2}}}Ys.Arrow=Rn;Rn.prototype.className="Arrow";(0,t2._registerNode)(Rn);qs.Factory.addGetterSetter(Rn,"pointerLength",10,(0,hh.getNumberValidator)());qs.Factory.addGetterSetter(Rn,"pointerWidth",10,(0,hh.getNumberValidator)());qs.Factory.addGetterSetter(Rn,"pointerAtBeginning",!1);qs.Factory.addGetterSetter(Rn,"pointerAtEnding",!0);var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.Circle=void 0;const e2=ut,n2=Vt,i2=rt,s2=ht;class li extends n2.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Js.Circle=li;li.prototype._centroid=!0;li.prototype.className="Circle";li.prototype._attrsAffectingSize=["radius"];(0,s2._registerNode)(li);e2.Factory.addGetterSetter(li,"radius",0,(0,i2.getNumberValidator)());var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.Ellipse=void 0;const la=ut,r2=Vt,dh=rt,o2=ht;class fn extends r2.Shape{_sceneFunc(t){const n=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),n!==i&&t.scale(1,i/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Qs.Ellipse=fn;fn.prototype.className="Ellipse";fn.prototype._centroid=!0;fn.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,o2._registerNode)(fn);la.Factory.addComponentsGetterSetter(fn,"radius",["x","y"]);la.Factory.addGetterSetter(fn,"radiusX",0,(0,dh.getNumberValidator)());la.Factory.addGetterSetter(fn,"radiusY",0,(0,dh.getNumberValidator)());var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.Image=void 0;const eo=Rt,Fn=ut,a2=Vt,l2=ht,zi=rt;class me extends a2.Shape{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),n=this.hasShadow();return t&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),i=this.getHeight(),s=this.cornerRadius(),r=this.attrs.image;let o;if(r){const a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?o=[r,this.cropX(),this.cropY(),a,l,0,0,n,i]:o=[r,0,0,n,i]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?eo.Util.drawRoundedRectPath(t,n,i,s):t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)),r&&(s&&t.clip(),t.drawImage.apply(t,o))}_hitFunc(t){const n=this.width(),i=this.height(),s=this.cornerRadius();t.beginPath(),s?eo.Util.drawRoundedRectPath(t,n,i,s):t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(t,n,i=null){const s=eo.Util.createImageElement();s.onload=function(){const r=new me({image:s});n(r)},s.onerror=i,s.crossOrigin="Anonymous",s.src=t}}Zs.Image=me;me.prototype.className="Image";(0,l2._registerNode)(me);Fn.Factory.addGetterSetter(me,"cornerRadius",0,(0,zi.getNumberOrArrayOfNumbersValidator)(4));Fn.Factory.addGetterSetter(me,"image");Fn.Factory.addComponentsGetterSetter(me,"crop",["x","y","width","height"]);Fn.Factory.addGetterSetter(me,"cropX",0,(0,zi.getNumberValidator)());Fn.Factory.addGetterSetter(me,"cropY",0,(0,zi.getNumberValidator)());Fn.Factory.addGetterSetter(me,"cropWidth",0,(0,zi.getNumberValidator)());Fn.Factory.addGetterSetter(me,"cropHeight",0,(0,zi.getNumberValidator)());var ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.Tag=ti.Label=void 0;const tr=ut,c2=Vt,h2=ri,ca=rt,uh=ht,fh=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],d2="Change.konva",u2="none",Ao="up",Eo="right",Mo="down",Ro="left",f2=fh.length;class ha extends h2.Group{constructor(t){super(t),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let n=this,i;const s=function(){n._sync()};for(i=0;i<f2;i++)t.on(fh[i]+d2,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),n=this.getTag(),i,s,r,o,a,l,h;if(t&&n){switch(i=t.width(),s=t.height(),r=n.pointerDirection(),o=n.pointerWidth(),h=n.pointerHeight(),a=0,l=0,r){case Ao:a=i/2,l=-1*h;break;case Eo:a=i+o,l=s/2;break;case Mo:a=i/2,l=s+h;break;case Ro:a=-1*o,l=s/2;break}n.setAttrs({x:-1*a,y:-1*l,width:i,height:s}),t.setAttrs({x:-1*a,y:-1*l})}}}ti.Label=ha;ha.prototype.className="Label";(0,uh._registerNode)(ha);class On extends c2.Shape{_sceneFunc(t){const n=this.width(),i=this.height(),s=this.pointerDirection(),r=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,h=0,c=0,f=0;typeof a=="number"?l=h=c=f=Math.min(a,n/2,i/2):(l=Math.min(a[0]||0,n/2,i/2),h=Math.min(a[1]||0,n/2,i/2),f=Math.min(a[2]||0,n/2,i/2),c=Math.min(a[3]||0,n/2,i/2)),t.beginPath(),t.moveTo(l,0),s===Ao&&(t.lineTo((n-r)/2,0),t.lineTo(n/2,-1*o),t.lineTo((n+r)/2,0)),t.lineTo(n-h,0),t.arc(n-h,h,h,Math.PI*3/2,0,!1),s===Eo&&(t.lineTo(n,(i-o)/2),t.lineTo(n+r,i/2),t.lineTo(n,(i+o)/2)),t.lineTo(n,i-f),t.arc(n-f,i-f,f,0,Math.PI/2,!1),s===Mo&&(t.lineTo((n+r)/2,i),t.lineTo(n/2,i+o),t.lineTo((n-r)/2,i)),t.lineTo(c,i),t.arc(c,i-c,c,Math.PI/2,Math.PI,!1),s===Ro&&(t.lineTo(0,(i+o)/2),t.lineTo(-1*r,i/2),t.lineTo(0,(i-o)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,n=0,i=this.pointerWidth(),s=this.pointerHeight(),r=this.pointerDirection(),o=this.width(),a=this.height();return r===Ao?(n-=s,a+=s):r===Mo?a+=s:r===Ro?(t-=i*1.5,o+=i):r===Eo&&(o+=i*1.5),{x:t,y:n,width:o,height:a}}}ti.Tag=On;On.prototype.className="Tag";(0,uh._registerNode)(On);tr.Factory.addGetterSetter(On,"pointerDirection",u2);tr.Factory.addGetterSetter(On,"pointerWidth",0,(0,ca.getNumberValidator)());tr.Factory.addGetterSetter(On,"pointerHeight",0,(0,ca.getNumberValidator)());tr.Factory.addGetterSetter(On,"cornerRadius",0,(0,ca.getNumberOrArrayOfNumbersValidator)(4));var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.Rect=void 0;const g2=ut,p2=Vt,_2=ht,m2=Rt,y2=rt;class er extends p2.Shape{_sceneFunc(t){const n=this.cornerRadius(),i=this.width(),s=this.height();t.beginPath(),n?m2.Util.drawRoundedRectPath(t,i,s,n):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}}Ki.Rect=er;er.prototype.className="Rect";(0,_2._registerNode)(er);g2.Factory.addGetterSetter(er,"cornerRadius",0,(0,y2.getNumberOrArrayOfNumbersValidator)(4));var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.RegularPolygon=void 0;const gh=ut,b2=Vt,ph=rt,v2=ht;class kn extends b2.Shape{_sceneFunc(t){const n=this._getPoints();t.beginPath(),t.moveTo(n[0].x,n[0].y);for(let i=1;i<n.length;i++)t.lineTo(n[i].x,n[i].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,n=this.attrs.radius||0,i=[];for(let s=0;s<t;s++)i.push({x:n*Math.sin(s*2*Math.PI/t),y:-1*n*Math.cos(s*2*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let n=t[0].x,i=t[0].y,s=t[0].x,r=t[0].y;return t.forEach(o=>{n=Math.min(n,o.x),i=Math.max(i,o.x),s=Math.min(s,o.y),r=Math.max(r,o.y)}),{x:n,y:s,width:i-n,height:r-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}nr.RegularPolygon=kn;kn.prototype.className="RegularPolygon";kn.prototype._centroid=!0;kn.prototype._attrsAffectingSize=["radius"];(0,v2._registerNode)(kn);gh.Factory.addGetterSetter(kn,"radius",0,(0,ph.getNumberValidator)());gh.Factory.addGetterSetter(kn,"sides",0,(0,ph.getNumberValidator)());var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.Ring=void 0;const _h=ut,S2=Vt,mh=rt,C2=ht,bl=Math.PI*2;class Nn extends S2.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,bl,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),bl,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}ir.Ring=Nn;Nn.prototype.className="Ring";Nn.prototype._centroid=!0;Nn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,C2._registerNode)(Nn);_h.Factory.addGetterSetter(Nn,"innerRadius",0,(0,mh.getNumberValidator)());_h.Factory.addGetterSetter(Nn,"outerRadius",0,(0,mh.getNumberValidator)());var sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.Sprite=void 0;const Ln=ut,x2=Vt,w2=oi,yh=rt,P2=ht;class Re extends x2.Shape{constructor(t){super(t),this._updated=!0,this.anim=new w2.Animation(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const n=this.animation(),i=this.frameIndex(),s=i*4,r=this.animations()[n],o=this.frameOffsets(),a=r[s+0],l=r[s+1],h=r[s+2],c=r[s+3],f=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,c),t.closePath(),t.fillStrokeShape(this)),f)if(o){const _=o[n],p=i*2;t.drawImage(f,a,l,h,c,_[p+0],_[p+1],h,c)}else t.drawImage(f,a,l,h,c,0,0,h,c)}_hitFunc(t){const n=this.animation(),i=this.frameIndex(),s=i*4,r=this.animations()[n],o=this.frameOffsets(),a=r[s+2],l=r[s+3];if(t.beginPath(),o){const h=o[n],c=i*2;t.rect(h[c+0],h[c+1],a,l)}else t.rect(0,0,a,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),n=this.animation(),i=this.animations(),s=i[n],r=s.length/4;t<r-1?this.frameIndex(t+1):this.frameIndex(0)}}sr.Sprite=Re;Re.prototype.className="Sprite";(0,P2._registerNode)(Re);Ln.Factory.addGetterSetter(Re,"animation");Ln.Factory.addGetterSetter(Re,"animations");Ln.Factory.addGetterSetter(Re,"frameOffsets");Ln.Factory.addGetterSetter(Re,"image");Ln.Factory.addGetterSetter(Re,"frameIndex",0,(0,yh.getNumberValidator)());Ln.Factory.addGetterSetter(Re,"frameRate",17,(0,yh.getNumberValidator)());Ln.Factory.backCompat(Re,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.Star=void 0;const da=ut,T2=Vt,ua=rt,A2=ht;class gn extends T2.Shape{_sceneFunc(t){const n=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let r=1;r<s*2;r++){const o=r%2===0?i:n,a=o*Math.sin(r*Math.PI/s),l=-1*o*Math.cos(r*Math.PI/s);t.lineTo(a,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}rr.Star=gn;gn.prototype.className="Star";gn.prototype._centroid=!0;gn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,A2._registerNode)(gn);da.Factory.addGetterSetter(gn,"numPoints",5,(0,ua.getNumberValidator)());da.Factory.addGetterSetter(gn,"innerRadius",0,(0,ua.getNumberValidator)());da.Factory.addGetterSetter(gn,"outerRadius",0,(0,ua.getNumberValidator)());var ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.Text=void 0;ci.stringToArray=wn;const Fo=Rt,Qt=ut,E2=Vt,no=ht,pn=rt,M2=ht;function wn(e){return[...e].reduce((t,n,i,s)=>{if(/\p{Emoji}/u.test(n)){const r=s[i+1];r&&/\p{Emoji_Modifier}|\u200D/u.test(r)?(t.push(n+r),s[i+1]=""):t.push(n)}else/\p{Regional_Indicator}{2}/u.test(n+(s[i+1]||""))?t.push(n+s[i+1]):i>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(n)?t[t.length-1]+=n:n&&t.push(n);return t},[])}const zn="auto",R2="center",bh="inherit",gi="justify",F2="Change.konva",O2="2d",vl="-",vh="left",k2="text",N2="Text",L2="top",D2="bottom",Sl="middle",Sh="normal",G2="px ",ss=" ",I2="right",Cl="rtl",B2="word",U2="char",xl="none",io="…",Ch=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],V2=Ch.length;function H2(e){return e.split(",").map(t=>{t=t.trim();const n=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return n&&!i&&(t=`"${t}"`),t}).join(", ")}let rs;function so(){return rs||(rs=Fo.Util.createCanvasElement().getContext(O2),rs)}function $2(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function j2(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function W2(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class Nt extends E2.Shape{constructor(t){super(W2(t)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<V2;n++)this.on(Ch[n]+F2,this._setTextData);this._setTextData()}_sceneFunc(t){const n=this.textArr,i=n.length;if(!this.text())return;let s=this.padding(),r=this.fontSize(),o=this.lineHeight()*r,a=this.verticalAlign(),l=this.direction(),h=0,c=this.align(),f=this.getWidth(),_=this.letterSpacing(),p=this.fill(),u=this.textDecoration(),y=u.indexOf("underline")!==-1,b=u.indexOf("line-through")!==-1,x;l=l===bh?t.direction:l;let P=o/2,d=Sl;if(no.Konva._fixTextRendering){const g=this.measureSize("M");d="alphabetic",P=(g.fontBoundingBoxAscent-g.fontBoundingBoxDescent)/2+o/2}for(l===Cl&&t.setAttr("direction",l),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",d),t.setAttr("textAlign",vh),a===Sl?h=(this.getHeight()-i*o-s*2)/2:a===D2&&(h=this.getHeight()-i*o-s*2),t.translate(s,h+s),x=0;x<i;x++){let g=0,v=0;const E=n[x],N=E.text,S=E.width,R=E.lastInParagraph;if(t.save(),c===I2?g+=f-S-s*2:c===R2&&(g+=(f-S-s*2)/2),y){t.save(),t.beginPath();const T=no.Konva._fixTextRendering?Math.round(r/4):Math.round(r/2),w=g,F=P+v+T;t.moveTo(w,F);const L=c===gi&&!R?f-s*2:S;t.lineTo(w+Math.round(L),F),t.lineWidth=r/15;const W=this._getLinearGradient();t.strokeStyle=W||p,t.stroke(),t.restore()}if(b){t.save(),t.beginPath();const T=no.Konva._fixTextRendering?-Math.round(r/4):0;t.moveTo(g,P+v+T);const w=c===gi&&!R?f-s*2:S;t.lineTo(g+Math.round(w),P+v+T),t.lineWidth=r/15;const F=this._getLinearGradient();t.strokeStyle=F||p,t.stroke(),t.restore()}if(l!==Cl&&(_!==0||c===gi)){const T=N.split(" ").length-1,w=wn(N);for(let F=0;F<w.length;F++){const L=w[F];L===" "&&!R&&c===gi&&(g+=(f-s*2-S)/T),this._partialTextX=g,this._partialTextY=P+v,this._partialText=L,t.fillStrokeShape(this),g+=this.measureSize(L).width+_}}else _!==0&&t.setAttr("letterSpacing",`${_}px`),this._partialTextX=g,this._partialTextY=P+v,this._partialText=N,t.fillStrokeShape(this);t.restore(),i>1&&(P+=o)}}_hitFunc(t){const n=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const n=Fo.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(k2,n),this}getWidth(){return this.attrs.width===zn||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===zn||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Fo.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var n,i,s,r,o,a,l,h,c,f,_;let p=so(),u=this.fontSize(),y;p.save(),p.font=this._getContextFont(),y=p.measureText(t),p.restore();const b=u/100;return{actualBoundingBoxAscent:(n=y.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*b,actualBoundingBoxDescent:(i=y.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(s=y.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*b,actualBoundingBoxRight:(r=y.actualBoundingBoxRight)!==null&&r!==void 0?r:75.732421875*b,alphabeticBaseline:(o=y.alphabeticBaseline)!==null&&o!==void 0?o:0,emHeightAscent:(a=y.emHeightAscent)!==null&&a!==void 0?a:100*b,emHeightDescent:(l=y.emHeightDescent)!==null&&l!==void 0?l:-20*b,fontBoundingBoxAscent:(h=y.fontBoundingBoxAscent)!==null&&h!==void 0?h:91*b,fontBoundingBoxDescent:(c=y.fontBoundingBoxDescent)!==null&&c!==void 0?c:21*b,hangingBaseline:(f=y.hangingBaseline)!==null&&f!==void 0?f:72.80000305175781*b,ideographicBaseline:(_=y.ideographicBaseline)!==null&&_!==void 0?_:-21*b,width:y.width,height:u}}_getContextFont(){return this.fontStyle()+ss+this.fontVariant()+ss+(this.fontSize()+G2)+H2(this.fontFamily())}_addTextLine(t){this.align()===gi&&(t=t.trim());const i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){const n=this.letterSpacing(),i=t.length;return so().measureText(t).width+n*i}_setTextData(){let t=this.text().split(`
`),n=+this.fontSize(),i=0,s=this.lineHeight()*n,r=this.attrs.width,o=this.attrs.height,a=r!==zn&&r!==void 0,l=o!==zn&&o!==void 0,h=this.padding(),c=r-h*2,f=o-h*2,_=0,p=this.wrap(),u=p!==xl,y=p!==U2&&u,b=this.ellipsis();this.textArr=[],so().font=this._getContextFont();const x=b?this._getTextWidth(io):0;for(let P=0,d=t.length;P<d;++P){let g=t[P],v=this._getTextWidth(g);if(a&&v>c)for(;g.length>0;){let E=0,N=wn(g).length,S="",R=0;for(;E<N;){const T=E+N>>>1,w=wn(g),F=w.slice(0,T+1).join(""),L=this._getTextWidth(F);(b&&l&&_+s>f?L+x:L)<=c?(E=T+1,S=F,R=L):N=T}if(S){if(y){const F=wn(g),L=wn(S),W=F[L.length],U=W===ss||W===vl;let J;if(U&&R<=c)J=L.length;else{const K=L.lastIndexOf(ss),H=L.lastIndexOf(vl);J=Math.max(K,H)+1}J>0&&(E=J,S=F.slice(0,E).join(""),R=this._getTextWidth(S))}if(S=S.trimRight(),this._addTextLine(S),i=Math.max(i,R),_+=s,this._shouldHandleEllipsis(_)){this._tryToAddEllipsisToLastLine();break}if(g=wn(g).slice(E).join("").trimLeft(),g.length>0&&(v=this._getTextWidth(g),v<=c)){this._addTextLine(g),_+=s,i=Math.max(i,v);break}}else break}else this._addTextLine(g),_+=s,i=Math.max(i,v),this._shouldHandleEllipsis(_)&&P<d-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&_+s>f)break}this.textHeight=n,this.textWidth=i}_shouldHandleEllipsis(t){const n=+this.fontSize(),i=this.lineHeight()*n,s=this.attrs.height,r=s!==zn&&s!==void 0,o=this.padding(),a=s-o*2;return!(this.wrap()!==xl)||r&&t+i>a}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,n=t!==zn&&t!==void 0,i=this.padding(),s=t-i*2,r=this.ellipsis(),o=this.textArr[this.textArr.length-1];!o||!r||(n&&(this._getTextWidth(o.text+io)<s||(o.text=o.text.slice(0,o.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+io))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return t&&n?!0:super._useBufferCanvas()}}ci.Text=Nt;Nt.prototype._fillFunc=$2;Nt.prototype._strokeFunc=j2;Nt.prototype.className=N2;Nt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,M2._registerNode)(Nt);Qt.Factory.overWriteSetter(Nt,"width",(0,pn.getNumberOrAutoValidator)());Qt.Factory.overWriteSetter(Nt,"height",(0,pn.getNumberOrAutoValidator)());Qt.Factory.addGetterSetter(Nt,"direction",bh);Qt.Factory.addGetterSetter(Nt,"fontFamily","Arial");Qt.Factory.addGetterSetter(Nt,"fontSize",12,(0,pn.getNumberValidator)());Qt.Factory.addGetterSetter(Nt,"fontStyle",Sh);Qt.Factory.addGetterSetter(Nt,"fontVariant",Sh);Qt.Factory.addGetterSetter(Nt,"padding",0,(0,pn.getNumberValidator)());Qt.Factory.addGetterSetter(Nt,"align",vh);Qt.Factory.addGetterSetter(Nt,"verticalAlign",L2);Qt.Factory.addGetterSetter(Nt,"lineHeight",1,(0,pn.getNumberValidator)());Qt.Factory.addGetterSetter(Nt,"wrap",B2);Qt.Factory.addGetterSetter(Nt,"ellipsis",!1,(0,pn.getBooleanValidator)());Qt.Factory.addGetterSetter(Nt,"letterSpacing",0,(0,pn.getNumberValidator)());Qt.Factory.addGetterSetter(Nt,"text","",(0,pn.getStringValidator)());Qt.Factory.addGetterSetter(Nt,"textDecoration","");var or={};Object.defineProperty(or,"__esModule",{value:!0});or.TextPath=void 0;const ro=Rt,we=ut,z2=Vt,pi=ai,oo=ci,xh=rt,K2=ht,Y2="",wh="normal";function Ph(e){e.fillText(this.partialText,0,0)}function Th(e){e.strokeText(this.partialText,0,0)}class Ht extends z2.Shape{constructor(t){super(t),this.dummyCanvas=ro.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return pi.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const n=this.pathLength;return t-1>n?null:pi.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=pi.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const n=this.textDecoration(),i=this.fill(),s=this.fontSize(),r=this.glyphInfo;n==="underline"&&t.beginPath();for(let o=0;o<r.length;o++){t.save();const a=r[o].p0;t.translate(a.x,a.y),t.rotate(r[o].rotation),this.partialText=r[o].text,t.fillStrokeShape(this),n==="underline"&&(o===0&&t.moveTo(0,s/2+1),t.lineTo(s,s/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=i,t.lineWidth=s/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const n=this.glyphInfo;if(n.length>=1){const i=n[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<n.length;i++){const s=n[i].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return ro.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return oo.Text.prototype.setText.call(this,t)}_getContextFont(){return oo.Text.prototype._getContextFont.call(this)}_getTextSize(t){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const s=i.measureText(t);return i.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),s=this.align(),r=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let a=0;s==="center"&&(a=Math.max(0,this.pathLength/2-o/2)),s==="right"&&(a=Math.max(0,this.pathLength-o));const l=(0,oo.stringToArray)(this.text());let h=a;for(let c=0;c<l.length;c++){const f=this._getPointAtLength(h);if(!f)return;let _=this._getTextSize(l[c]).width+i;if(l[c]===" "&&s==="justify"){const P=this.text().split(" ").length-1;_+=(this.pathLength-o)/P}const p=this._getPointAtLength(h+_);if(!p)return;const u=pi.Path.getLineLength(f.x,f.y,p.x,p.y);let y=0;if(r)try{y=r(l[c-1],l[c])*this.fontSize()}catch{y=0}f.x+=y,p.x+=y,this.textWidth+=y;const b=pi.Path.getPointOnLine(y+u/2,f.x,f.y,p.x,p.y),x=Math.atan2(p.y-f.y,p.x-f.x);this.glyphInfo.push({transposeX:b.x,transposeY:b.y,text:l[c],rotation:x,p0:f,p1:p}),h+=_}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(h){t.push(h.p0.x),t.push(h.p0.y),t.push(h.p1.x),t.push(h.p1.y)});let n=t[0]||0,i=t[0]||0,s=t[1]||0,r=t[1]||0,o,a;for(let h=0;h<t.length/2;h++)o=t[h*2],a=t[h*2+1],n=Math.min(n,o),i=Math.max(i,o),s=Math.min(s,a),r=Math.max(r,a);const l=this.fontSize();return{x:n-l/2,y:s-l/2,width:i-n+l,height:r-s+l}}destroy(){return ro.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}or.TextPath=Ht;Ht.prototype._fillFunc=Ph;Ht.prototype._strokeFunc=Th;Ht.prototype._fillFuncHit=Ph;Ht.prototype._strokeFuncHit=Th;Ht.prototype.className="TextPath";Ht.prototype._attrsAffectingSize=["text","fontSize","data"];(0,K2._registerNode)(Ht);we.Factory.addGetterSetter(Ht,"data");we.Factory.addGetterSetter(Ht,"fontFamily","Arial");we.Factory.addGetterSetter(Ht,"fontSize",12,(0,xh.getNumberValidator)());we.Factory.addGetterSetter(Ht,"fontStyle",wh);we.Factory.addGetterSetter(Ht,"align","left");we.Factory.addGetterSetter(Ht,"letterSpacing",0,(0,xh.getNumberValidator)());we.Factory.addGetterSetter(Ht,"textBaseline","middle");we.Factory.addGetterSetter(Ht,"fontVariant",wh);we.Factory.addGetterSetter(Ht,"text",Y2);we.Factory.addGetterSetter(Ht,"textDecoration","");we.Factory.addGetterSetter(Ht,"kerningFunc",void 0);var ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.Transformer=void 0;const xt=Rt,vt=ut,wl=Mt,X2=Vt,q2=Ki,Pl=ri,ye=ht,_n=rt,J2=ht,Ah="tr-konva",Q2=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${Ah}`).join(" "),Tl="nodesRect",Z2=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],tg={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},eg="ontouchstart"in ye.Konva._global;function ng(e,t,n){if(e==="rotater")return n;t+=xt.Util.degToRad(tg[e]||0);const i=(xt.Util.radToDeg(t)%360+360)%360;return xt.Util._inRange(i,315+22.5,360)||xt.Util._inRange(i,0,22.5)?"ns-resize":xt.Util._inRange(i,45-22.5,45+22.5)?"nesw-resize":xt.Util._inRange(i,90-22.5,90+22.5)?"ew-resize":xt.Util._inRange(i,135-22.5,135+22.5)?"nwse-resize":xt.Util._inRange(i,180-22.5,180+22.5)?"ns-resize":xt.Util._inRange(i,225-22.5,225+22.5)?"nesw-resize":xt.Util._inRange(i,270-22.5,270+22.5)?"ew-resize":xt.Util._inRange(i,315-22.5,315+22.5)?"nwse-resize":(xt.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const xs=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Al=1e8;function ig(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function Eh(e,t,n){const i=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),s=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:i,y:s}}function sg(e,t){const n=ig(e);return Eh(e,t,n)}function rg(e,t,n){let i=t;for(let s=0;s<e.length;s++){const r=ye.Konva.getAngle(e[s]),o=Math.abs(r-t)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(i=r)}return i}let Oo=0;class _t extends Pl.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Q2,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return xt.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Ah+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const n=t.filter(s=>s.isAncestorOf(this)?(xt.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=n,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const r=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const o=s._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");s.on(o,r)}s.on(Z2.map(o=>o+`.${this._getEventNamespace()}`).join(" "),r),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,r),this._proxyDrag(s)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let n;t.on(`dragstart.${this._getEventNamespace()}`,i=>{n=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!n)return;const s=t.getAbsolutePosition(),r=s.x-n.x,o=s.y-n.y;this.nodes().forEach(a=>{if(a===t||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+r,y:l.y+o}),a.startDrag(i)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Tl),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Tl,this.__getNodeRect)}__getNodeShape(t,n=this.rotation(),i){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=t.getAbsoluteScale(i),o=t.getAbsolutePosition(i),a=s.x*r.x-t.offsetX()*r.x,l=s.y*r.y-t.offsetY()*r.y,h=(ye.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:o.x+a*Math.cos(h)+l*Math.sin(-h),y:o.y+l*Math.cos(h)+a*Math.sin(h),width:s.width*r.x,height:s.height*r.y,rotation:h};return Eh(c,-ye.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-Al,y:-Al,width:0,height:0,rotation:0};const n=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),f=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],_=h.getAbsoluteTransform();f.forEach(function(p){const u=_.point(p);n.push(u)})});const i=new xt.Transform;i.rotate(-ye.Konva.getAngle(this.rotation()));let s=1/0,r=1/0,o=-1/0,a=-1/0;n.forEach(function(h){const c=i.point(h);s===void 0&&(s=o=c.x,r=a=c.y),s=Math.min(s,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}),i.invert();const l=i.point({x:s,y:r});return{x:l.x,y:l.y,width:o-s,height:a-r,rotation:ye.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),xs.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const n=new q2.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:eg?10:"auto"}),i=this;n.on("mousedown touchstart",function(s){i._handleMouseDown(s)}),n.on("dragstart",s=>{n.stopDrag(),s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),n.on("mouseenter",()=>{const s=ye.Konva.getAngle(this.rotation()),r=this.rotateAnchorCursor(),o=ng(t,s,r);n.getStage().content&&(n.getStage().content.style.cursor=o),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const t=new X2.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,i){const s=i.getParent(),r=s.padding();n.beginPath(),n.rect(-r,-r,i.width()+r*2,i.height()+r*2),n.moveTo(i.width()/2,-r),s.rotateEnabled()&&s.rotateLineVisible()&&n.lineTo(i.width()/2,-s.rotateAnchorOffset()*xt.Util._sign(i.height())-r),n.fillStrokeShape(i)},hitFunc:(n,i)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();n.beginPath(),n.rect(-s,-s,i.width()+s*2,i.height()+s*2),n.fillStrokeShape(i)}});this.add(t),this._proxyDrag(t),t.on("dragstart",n=>{n.cancelBubble=!0}),t.on("dragmove",n=>{n.cancelBubble=!0}),t.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const n=this._getNodeRect(),i=n.width,s=n.height,r=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/r),this.cos=Math.abs(i/r),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},Oo++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){let n,i,s;const r=this.findOne("."+this._movingAnchorName),o=r.getStage();o.setPointersPositions(t);const a=o.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const h=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,t)),r.setAbsolutePosition(l);const c=r.getAbsolutePosition();if(h.x===c.x&&h.y===c.y)return;if(this._movingAnchorName==="rotater"){const P=this._getNodeRect();n=r.x()-P.width/2,i=-r.y()+P.height/2;let d=Math.atan2(-i,n)+Math.PI/2;P.height<0&&(d-=Math.PI);const v=ye.Konva.getAngle(this.rotation())+d,E=ye.Konva.getAngle(this.rotationSnapTolerance()),S=rg(this.rotationSnaps(),v,E)-P.rotation,R=sg(P,S);this._fitNodesInto(R,t);return}const f=this.shiftBehavior();let _;f==="inverted"?_=this.keepRatio()&&!t.shiftKey:f==="none"?_=this.keepRatio():_=this.keepRatio()||t.shiftKey;let p=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(_){const P=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(P.x-r.x(),2)+Math.pow(P.y-r.y(),2));const d=this.findOne(".top-left").x()>P.x?-1:1,g=this.findOne(".top-left").y()>P.y?-1:1;n=s*this.cos*d,i=s*this.sin*g,this.findOne(".top-left").x(P.x-n),this.findOne(".top-left").y(P.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(r.y());else if(this._movingAnchorName==="top-right"){if(_){const P=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(r.x()-P.x,2)+Math.pow(P.y-r.y(),2));const d=this.findOne(".top-right").x()<P.x?-1:1,g=this.findOne(".top-right").y()>P.y?-1:1;n=s*this.cos*d,i=s*this.sin*g,this.findOne(".top-right").x(P.x+n),this.findOne(".top-right").y(P.y-i)}var u=r.position();this.findOne(".top-left").y(u.y),this.findOne(".bottom-right").x(u.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(r.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(r.x());else if(this._movingAnchorName==="bottom-left"){if(_){const P=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(P.x-r.x(),2)+Math.pow(r.y()-P.y,2));const d=P.x<r.x()?-1:1,g=r.y()<P.y?-1:1;n=s*this.cos*d,i=s*this.sin*g,r.x(P.x-n),r.y(P.y+i)}u=r.position(),this.findOne(".top-left").x(u.x),this.findOne(".bottom-right").y(u.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(r.y());else if(this._movingAnchorName==="bottom-right"){if(_){const P=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(r.x()-P.x,2)+Math.pow(r.y()-P.y,2));const d=this.findOne(".bottom-right").x()<P.x?-1:1,g=this.findOne(".bottom-right").y()<P.y?-1:1;n=s*this.cos*d,i=s*this.sin*g,this.findOne(".bottom-right").x(P.x+n),this.findOne(".bottom-right").y(P.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(p=this.centeredScaling()||t.altKey,p){const P=this.findOne(".top-left"),d=this.findOne(".bottom-right"),g=P.x(),v=P.y(),E=this.getWidth()-d.x(),N=this.getHeight()-d.y();d.move({x:-g,y:-v}),P.move({x:E,y:N})}const y=this.findOne(".top-left").getAbsolutePosition();n=y.x,i=y.y;const b=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),x=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:b,height:x,rotation:ye.Konva.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();Oo--,this._fire("transformend",{evt:t,target:i}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),i&&this._nodes.forEach(s=>{var r;s._fire("transformend",{evt:t,target:s}),(r=s.getLayer())===null||r===void 0||r.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,n){const i=this._getNodeRect(),s=1;if(xt.Util._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(xt.Util._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const r=new xt.Transform;if(r.rotate(ye.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const _=r.point({x:-this.padding()*2,y:0});t.x+=_.x,t.y+=_.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const _=r.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const _=r.point({x:0,y:-this.padding()*2});t.x+=_.x,t.y+=_.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const _=r.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const _=this.boundBoxFunc()(i,t);_?t=_:xt.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new xt.Transform;a.translate(i.x,i.y),a.rotate(i.rotation),a.scale(i.width/o,i.height/o);const l=new xt.Transform,h=t.width/o,c=t.height/o;this.flipEnabled()===!1?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(h),Math.abs(c))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(h,c));const f=l.multiply(a.invert());this._nodes.forEach(_=>{var p;const u=_.getParent().getAbsoluteTransform(),y=_.getTransform().copy();y.translate(_.offsetX(),_.offsetY());const b=new xt.Transform;b.multiply(u.copy().invert()).multiply(f).multiply(u).multiply(y);const x=b.decompose();_.setAttrs(x),(p=_.getLayer())===null||p===void 0||p.batchDraw()}),this.rotation(xt.Util._getRotation(t.rotation)),this._nodes.forEach(_=>{this._fire("transform",{evt:n,target:_}),_._fire("transform",{evt:n,target:_})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,n){this.findOne(t).setAttrs(n)}update(){var t;const n=this._getNodeRect();this.rotation(xt.Util._getRotation(n.rotation));const i=n.width,s=n.height,r=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize(),h=this.find("._anchor");h.forEach(f=>{f.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:l/2+a,visible:o&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:l/2+a,visible:o&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:s/2,offsetX:l/2-a,visible:o&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:l/2+a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:s,offsetY:l/2-a,visible:o&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:s,offsetX:l/2-a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*xt.Util._sign(s)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const c=this.anchorStyleFunc();c&&h.forEach(f=>{c(f)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Pl.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return wl.Node.prototype.toObject.call(this)}clone(t){return wl.Node.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ar.Transformer=_t;_t.isTransforming=()=>Oo>0;function og(e){return e instanceof Array||xt.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){xs.indexOf(t)===-1&&xt.Util.warn("Unknown anchor name: "+t+". Available names are: "+xs.join(", "))}),e||[]}_t.prototype.className="Transformer";(0,J2._registerNode)(_t);vt.Factory.addGetterSetter(_t,"enabledAnchors",xs,og);vt.Factory.addGetterSetter(_t,"flipEnabled",!0,(0,_n.getBooleanValidator)());vt.Factory.addGetterSetter(_t,"resizeEnabled",!0);vt.Factory.addGetterSetter(_t,"anchorSize",10,(0,_n.getNumberValidator)());vt.Factory.addGetterSetter(_t,"rotateEnabled",!0);vt.Factory.addGetterSetter(_t,"rotateLineVisible",!0);vt.Factory.addGetterSetter(_t,"rotationSnaps",[]);vt.Factory.addGetterSetter(_t,"rotateAnchorOffset",50,(0,_n.getNumberValidator)());vt.Factory.addGetterSetter(_t,"rotateAnchorCursor","crosshair");vt.Factory.addGetterSetter(_t,"rotationSnapTolerance",5,(0,_n.getNumberValidator)());vt.Factory.addGetterSetter(_t,"borderEnabled",!0);vt.Factory.addGetterSetter(_t,"anchorStroke","rgb(0, 161, 255)");vt.Factory.addGetterSetter(_t,"anchorStrokeWidth",1,(0,_n.getNumberValidator)());vt.Factory.addGetterSetter(_t,"anchorFill","white");vt.Factory.addGetterSetter(_t,"anchorCornerRadius",0,(0,_n.getNumberValidator)());vt.Factory.addGetterSetter(_t,"borderStroke","rgb(0, 161, 255)");vt.Factory.addGetterSetter(_t,"borderStrokeWidth",1,(0,_n.getNumberValidator)());vt.Factory.addGetterSetter(_t,"borderDash");vt.Factory.addGetterSetter(_t,"keepRatio",!0);vt.Factory.addGetterSetter(_t,"shiftBehavior","default");vt.Factory.addGetterSetter(_t,"centeredScaling",!1);vt.Factory.addGetterSetter(_t,"ignoreStroke",!1);vt.Factory.addGetterSetter(_t,"padding",0,(0,_n.getNumberValidator)());vt.Factory.addGetterSetter(_t,"nodes");vt.Factory.addGetterSetter(_t,"node");vt.Factory.addGetterSetter(_t,"boundBoxFunc");vt.Factory.addGetterSetter(_t,"anchorDragBoundFunc");vt.Factory.addGetterSetter(_t,"anchorStyleFunc");vt.Factory.addGetterSetter(_t,"shouldOverdrawWholeArea",!1);vt.Factory.addGetterSetter(_t,"useSingleNodeRotation",!0);vt.Factory.backCompat(_t,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.Wedge=void 0;const cr=ut,ag=Vt,lg=ht,Mh=rt,cg=ht;class Ye extends ag.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,lg.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}lr.Wedge=Ye;Ye.prototype.className="Wedge";Ye.prototype._centroid=!0;Ye.prototype._attrsAffectingSize=["radius"];(0,cg._registerNode)(Ye);cr.Factory.addGetterSetter(Ye,"radius",0,(0,Mh.getNumberValidator)());cr.Factory.addGetterSetter(Ye,"angle",0,(0,Mh.getNumberValidator)());cr.Factory.addGetterSetter(Ye,"clockwise",!1);cr.Factory.backCompat(Ye,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.Blur=void 0;const El=ut,hg=Mt,dg=rt;function Ml(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const ug=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],fg=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function gg(e,t){const n=e.data,i=e.width,s=e.height;let r,o,a,l,h,c,f,_,p,u,y,b,x,P,d,g,v,E,N,S;const R=t+t+1,T=i-1,w=s-1,F=t+1,L=F*(F+1)/2,W=new Ml,U=ug[t],J=fg[t];let K=null,H=W,it=null,j=null;for(let st=1;st<R;st++)H=H.next=new Ml,st===F&&(K=H);H.next=W,a=o=0;for(let st=0;st<s;st++){b=x=P=d=l=h=c=f=0,_=F*(g=n[o]),p=F*(v=n[o+1]),u=F*(E=n[o+2]),y=F*(N=n[o+3]),l+=L*g,h+=L*v,c+=L*E,f+=L*N,H=W;for(let Q=0;Q<F;Q++)H.r=g,H.g=v,H.b=E,H.a=N,H=H.next;for(let Q=1;Q<F;Q++)r=o+((T<Q?T:Q)<<2),l+=(H.r=g=n[r])*(S=F-Q),h+=(H.g=v=n[r+1])*S,c+=(H.b=E=n[r+2])*S,f+=(H.a=N=n[r+3])*S,b+=g,x+=v,P+=E,d+=N,H=H.next;it=W,j=K;for(let Q=0;Q<i;Q++)n[o+3]=N=f*U>>J,N!==0?(N=255/N,n[o]=(l*U>>J)*N,n[o+1]=(h*U>>J)*N,n[o+2]=(c*U>>J)*N):n[o]=n[o+1]=n[o+2]=0,l-=_,h-=p,c-=u,f-=y,_-=it.r,p-=it.g,u-=it.b,y-=it.a,r=a+((r=Q+t+1)<T?r:T)<<2,b+=it.r=n[r],x+=it.g=n[r+1],P+=it.b=n[r+2],d+=it.a=n[r+3],l+=b,h+=x,c+=P,f+=d,it=it.next,_+=g=j.r,p+=v=j.g,u+=E=j.b,y+=N=j.a,b-=g,x-=v,P-=E,d-=N,j=j.next,o+=4;a+=i}for(let st=0;st<i;st++){x=P=d=b=h=c=f=l=0,o=st<<2,_=F*(g=n[o]),p=F*(v=n[o+1]),u=F*(E=n[o+2]),y=F*(N=n[o+3]),l+=L*g,h+=L*v,c+=L*E,f+=L*N,H=W;for(let dt=0;dt<F;dt++)H.r=g,H.g=v,H.b=E,H.a=N,H=H.next;let Q=i;for(let dt=1;dt<=t;dt++)o=Q+st<<2,l+=(H.r=g=n[o])*(S=F-dt),h+=(H.g=v=n[o+1])*S,c+=(H.b=E=n[o+2])*S,f+=(H.a=N=n[o+3])*S,b+=g,x+=v,P+=E,d+=N,H=H.next,dt<w&&(Q+=i);o=st,it=W,j=K;for(let dt=0;dt<s;dt++)r=o<<2,n[r+3]=N=f*U>>J,N>0?(N=255/N,n[r]=(l*U>>J)*N,n[r+1]=(h*U>>J)*N,n[r+2]=(c*U>>J)*N):n[r]=n[r+1]=n[r+2]=0,l-=_,h-=p,c-=u,f-=y,_-=it.r,p-=it.g,u-=it.b,y-=it.a,r=st+((r=dt+F)<w?r:w)*i<<2,l+=b+=it.r=n[r],h+=x+=it.g=n[r+1],c+=P+=it.b=n[r+2],f+=d+=it.a=n[r+3],it=it.next,_+=g=j.r,p+=v=j.g,u+=E=j.b,y+=N=j.a,b-=g,x-=v,P-=E,d-=N,j=j.next,o+=i}}const pg=function(t){const n=Math.round(this.blurRadius());n>0&&gg(t,n)};hr.Blur=pg;El.Factory.addGetterSetter(hg.Node,"blurRadius",0,(0,dg.getNumberValidator)(),El.Factory.afterSetFilter);var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.Brighten=void 0;const Rl=ut,_g=Mt,mg=rt,yg=function(e){const t=this.brightness()*255,n=e.data,i=n.length;for(let s=0;s<i;s+=4)n[s]+=t,n[s+1]+=t,n[s+2]+=t};dr.Brighten=yg;Rl.Factory.addGetterSetter(_g.Node,"brightness",0,(0,mg.getNumberValidator)(),Rl.Factory.afterSetFilter);var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.Contrast=void 0;const Fl=ut,bg=Mt,vg=rt,Sg=function(e){const t=Math.pow((this.contrast()+100)/100,2),n=e.data,i=n.length;let s=150,r=150,o=150;for(let a=0;a<i;a+=4)s=n[a],r=n[a+1],o=n[a+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,r/=255,r-=.5,r*=t,r+=.5,r*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,s=s<0?0:s>255?255:s,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,n[a]=s,n[a+1]=r,n[a+2]=o};ur.Contrast=Sg;Fl.Factory.addGetterSetter(bg.Node,"contrast",0,(0,vg.getNumberValidator)(),Fl.Factory.afterSetFilter);var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.Emboss=void 0;const cn=ut,gr=Mt,Cg=Rt,Rh=rt,xg=function(e){const t=this.embossStrength()*10,n=this.embossWhiteLevel()*255,i=this.embossDirection(),s=this.embossBlend(),r=e.data,o=e.width,a=e.height,l=o*4;let h=0,c=0,f=a;switch(i){case"top-left":h=-1,c=-1;break;case"top":h=-1,c=0;break;case"top-right":h=-1,c=1;break;case"right":h=0,c=1;break;case"bottom-right":h=1,c=1;break;case"bottom":h=1,c=0;break;case"bottom-left":h=1,c=-1;break;case"left":h=0,c=-1;break;default:Cg.Util.error("Unknown emboss direction: "+i)}do{const _=(f-1)*l;let p=h;f+p<1&&(p=0),f+p>a&&(p=0);const u=(f-1+p)*o*4;let y=o;do{const b=_+(y-1)*4;let x=c;y+x<1&&(x=0),y+x>o&&(x=0);const P=u+(y-1+x)*4,d=r[b]-r[P],g=r[b+1]-r[P+1],v=r[b+2]-r[P+2];let E=d;const N=E>0?E:-E,S=g>0?g:-g,R=v>0?v:-v;if(S>N&&(E=g),R>N&&(E=v),E*=t,s){const T=r[b]+E,w=r[b+1]+E,F=r[b+2]+E;r[b]=T>255?255:T<0?0:T,r[b+1]=w>255?255:w<0?0:w,r[b+2]=F>255?255:F<0?0:F}else{let T=n-E;T<0?T=0:T>255&&(T=255),r[b]=r[b+1]=r[b+2]=T}}while(--y)}while(--f)};fr.Emboss=xg;cn.Factory.addGetterSetter(gr.Node,"embossStrength",.5,(0,Rh.getNumberValidator)(),cn.Factory.afterSetFilter);cn.Factory.addGetterSetter(gr.Node,"embossWhiteLevel",.5,(0,Rh.getNumberValidator)(),cn.Factory.afterSetFilter);cn.Factory.addGetterSetter(gr.Node,"embossDirection","top-left",void 0,cn.Factory.afterSetFilter);cn.Factory.addGetterSetter(gr.Node,"embossBlend",!1,void 0,cn.Factory.afterSetFilter);var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.Enhance=void 0;const Ol=ut,wg=Mt,Pg=rt;function ao(e,t,n,i,s){const r=n-t,o=s-i;if(r===0)return i+o/2;if(o===0)return i;let a=(e-t)/r;return a=o*a+i,a}const Tg=function(e){const t=e.data,n=t.length;let i=t[0],s=i,r,o=t[1],a=o,l,h=t[2],c=h,f;const _=this.enhance();if(_===0)return;for(let d=0;d<n;d+=4)r=t[d+0],r<i?i=r:r>s&&(s=r),l=t[d+1],l<o?o=l:l>a&&(a=l),f=t[d+2],f<h?h=f:f>c&&(c=f);s===i&&(s=255,i=0),a===o&&(a=255,o=0),c===h&&(c=255,h=0);let p,u,y,b,x,P;if(_>0)p=s+_*(255-s),u=i-_*(i-0),y=a+_*(255-a),b=o-_*(o-0),x=c+_*(255-c),P=h-_*(h-0);else{const d=(s+i)*.5;p=s+_*(s-d),u=i+_*(i-d);const g=(a+o)*.5;y=a+_*(a-g),b=o+_*(o-g);const v=(c+h)*.5;x=c+_*(c-v),P=h+_*(h-v)}for(let d=0;d<n;d+=4)t[d+0]=ao(t[d+0],i,s,u,p),t[d+1]=ao(t[d+1],o,a,b,y),t[d+2]=ao(t[d+2],h,c,P,x)};pr.Enhance=Tg;Ol.Factory.addGetterSetter(wg.Node,"enhance",0,(0,Pg.getNumberValidator)(),Ol.Factory.afterSetFilter);var _r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.Grayscale=void 0;const Ag=function(e){const t=e.data,n=t.length;for(let i=0;i<n;i+=4){const s=.34*t[i]+.5*t[i+1]+.16*t[i+2];t[i]=s,t[i+1]=s,t[i+2]=s}};_r.Grayscale=Ag;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.HSL=void 0;const ei=ut,fa=Mt,ga=rt;ei.Factory.addGetterSetter(fa.Node,"hue",0,(0,ga.getNumberValidator)(),ei.Factory.afterSetFilter);ei.Factory.addGetterSetter(fa.Node,"saturation",0,(0,ga.getNumberValidator)(),ei.Factory.afterSetFilter);ei.Factory.addGetterSetter(fa.Node,"luminance",0,(0,ga.getNumberValidator)(),ei.Factory.afterSetFilter);const Eg=function(e){const t=e.data,n=t.length,i=1,s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a=i*s*Math.cos(r*Math.PI/180),l=i*s*Math.sin(r*Math.PI/180),h=.299*i+.701*a+.167*l,c=.587*i-.587*a+.33*l,f=.114*i-.114*a-.497*l,_=.299*i-.299*a-.328*l,p=.587*i+.413*a+.035*l,u=.114*i-.114*a+.293*l,y=.299*i-.3*a+1.25*l,b=.587*i-.586*a-1.05*l,x=.114*i+.886*a-.2*l;let P,d,g,v;for(let E=0;E<n;E+=4)P=t[E+0],d=t[E+1],g=t[E+2],v=t[E+3],t[E+0]=h*P+c*d+f*g+o,t[E+1]=_*P+p*d+u*g+o,t[E+2]=y*P+b*d+x*g+o,t[E+3]=v};mr.HSL=Eg;var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.HSV=void 0;const ni=ut,pa=Mt,_a=rt,Mg=function(e){const t=e.data,n=t.length,i=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=i*s*Math.cos(r*Math.PI/180),a=i*s*Math.sin(r*Math.PI/180),l=.299*i+.701*o+.167*a,h=.587*i-.587*o+.33*a,c=.114*i-.114*o-.497*a,f=.299*i-.299*o-.328*a,_=.587*i+.413*o+.035*a,p=.114*i-.114*o+.293*a,u=.299*i-.3*o+1.25*a,y=.587*i-.586*o-1.05*a,b=.114*i+.886*o-.2*a;for(let x=0;x<n;x+=4){const P=t[x+0],d=t[x+1],g=t[x+2],v=t[x+3];t[x+0]=l*P+h*d+c*g,t[x+1]=f*P+_*d+p*g,t[x+2]=u*P+y*d+b*g,t[x+3]=v}};yr.HSV=Mg;ni.Factory.addGetterSetter(pa.Node,"hue",0,(0,_a.getNumberValidator)(),ni.Factory.afterSetFilter);ni.Factory.addGetterSetter(pa.Node,"saturation",0,(0,_a.getNumberValidator)(),ni.Factory.afterSetFilter);ni.Factory.addGetterSetter(pa.Node,"value",0,(0,_a.getNumberValidator)(),ni.Factory.afterSetFilter);var br={};Object.defineProperty(br,"__esModule",{value:!0});br.Invert=void 0;const Rg=function(e){const t=e.data,n=t.length;for(let i=0;i<n;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]};br.Invert=Rg;var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.Kaleidoscope=void 0;const ws=ut,Fh=Mt,kl=Rt,Oh=rt,Fg=function(e,t,n){const i=e.data,s=t.data,r=e.width,o=e.height,a=n.polarCenterX||r/2,l=n.polarCenterY||o/2;let h=Math.sqrt(a*a+l*l),c=r-a,f=o-l;const _=Math.sqrt(c*c+f*f);h=_>h?_:h;const p=o,u=r,y=360/u*Math.PI/180;for(let b=0;b<u;b+=1){const x=Math.sin(b*y),P=Math.cos(b*y);for(let d=0;d<p;d+=1){c=Math.floor(a+h*d/p*P),f=Math.floor(l+h*d/p*x);let g=(f*r+c)*4;const v=i[g+0],E=i[g+1],N=i[g+2],S=i[g+3];g=(b+d*r)*4,s[g+0]=v,s[g+1]=E,s[g+2]=N,s[g+3]=S}}},Og=function(e,t,n){const i=e.data,s=t.data,r=e.width,o=e.height,a=n.polarCenterX||r/2,l=n.polarCenterY||o/2;let h=Math.sqrt(a*a+l*l),c=r-a,f=o-l;const _=Math.sqrt(c*c+f*f);h=_>h?_:h;const p=o,u=r,y=n.polarRotation||0;let b,x;for(c=0;c<r;c+=1)for(f=0;f<o;f+=1){const P=c-a,d=f-l,g=Math.sqrt(P*P+d*d)*p/h;let v=(Math.atan2(d,P)*180/Math.PI+360+y)%360;v=v*u/360,b=Math.floor(v),x=Math.floor(g);let E=(x*r+b)*4;const N=i[E+0],S=i[E+1],R=i[E+2],T=i[E+3];E=(f*r+c)*4,s[E+0]=N,s[E+1]=S,s[E+2]=R,s[E+3]=T}},kg=function(e){const t=e.width,n=e.height;let i,s,r,o,a,l,h,c,f,_,p=Math.round(this.kaleidoscopePower());const u=Math.round(this.kaleidoscopeAngle()),y=Math.floor(t*(u%360)/360);if(p<1)return;const b=kl.Util.createCanvasElement();b.width=t,b.height=n;const x=b.getContext("2d").getImageData(0,0,t,n);kl.Util.releaseCanvas(b),Fg(e,x,{polarCenterX:t/2,polarCenterY:n/2});let P=t/Math.pow(2,p);for(;P<=8;)P=P*2,p-=1;P=Math.ceil(P);let d=P,g=0,v=d,E=1;for(y+P>t&&(g=d,v=0,E=-1),s=0;s<n;s+=1)for(i=g;i!==v;i+=E)r=Math.round(i+y)%t,f=(t*s+r)*4,a=x.data[f+0],l=x.data[f+1],h=x.data[f+2],c=x.data[f+3],_=(t*s+i)*4,x.data[_+0]=a,x.data[_+1]=l,x.data[_+2]=h,x.data[_+3]=c;for(s=0;s<n;s+=1)for(d=Math.floor(P),o=0;o<p;o+=1){for(i=0;i<d+1;i+=1)f=(t*s+i)*4,a=x.data[f+0],l=x.data[f+1],h=x.data[f+2],c=x.data[f+3],_=(t*s+d*2-i-1)*4,x.data[_+0]=a,x.data[_+1]=l,x.data[_+2]=h,x.data[_+3]=c;d*=2}Og(x,e,{polarRotation:0})};vr.Kaleidoscope=kg;ws.Factory.addGetterSetter(Fh.Node,"kaleidoscopePower",2,(0,Oh.getNumberValidator)(),ws.Factory.afterSetFilter);ws.Factory.addGetterSetter(Fh.Node,"kaleidoscopeAngle",0,(0,Oh.getNumberValidator)(),ws.Factory.afterSetFilter);var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.Mask=void 0;const Nl=ut,Ng=Mt,Lg=rt;function os(e,t,n){let i=(n*e.width+t)*4;const s=[];return s.push(e.data[i++],e.data[i++],e.data[i++],e.data[i++]),s}function _i(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function Dg(e){const t=[0,0,0];for(let n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function Gg(e,t){const n=os(e,0,0),i=os(e,e.width-1,0),s=os(e,0,e.height-1),r=os(e,e.width-1,e.height-1),o=t||10;if(_i(n,i)<o&&_i(i,r)<o&&_i(r,s)<o&&_i(s,n)<o){const a=Dg([i,n,r,s]),l=[];for(let h=0;h<e.width*e.height;h++){const c=_i(a,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);l[h]=c<o?0:255}return l}}function Ig(e,t){for(let n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function Bg(e,t,n){const i=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(i.length)),r=Math.floor(s/2),o=[];for(let a=0;a<n;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let f=0;f<s;f++)for(let _=0;_<s;_++){const p=a+f-r,u=l+_-r;if(p>=0&&p<n&&u>=0&&u<t){const y=p*t+u,b=i[f*s+_];c+=e[y]*b}}o[h]=c===255*8?255:0}return o}function Ug(e,t,n){const i=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(i.length)),r=Math.floor(s/2),o=[];for(let a=0;a<n;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let f=0;f<s;f++)for(let _=0;_<s;_++){const p=a+f-r,u=l+_-r;if(p>=0&&p<n&&u>=0&&u<t){const y=p*t+u,b=i[f*s+_];c+=e[y]*b}}o[h]=c>=255*4?255:0}return o}function Vg(e,t,n){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(i.length)),r=Math.floor(s/2),o=[];for(let a=0;a<n;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let f=0;f<s;f++)for(let _=0;_<s;_++){const p=a+f-r,u=l+_-r;if(p>=0&&p<n&&u>=0&&u<t){const y=p*t+u,b=i[f*s+_];c+=e[y]*b}}o[h]=c}return o}const Hg=function(e){const t=this.threshold();let n=Gg(e,t);return n&&(n=Bg(n,e.width,e.height),n=Ug(n,e.width,e.height),n=Vg(n,e.width,e.height),Ig(e,n)),e};Sr.Mask=Hg;Nl.Factory.addGetterSetter(Ng.Node,"threshold",0,(0,Lg.getNumberValidator)(),Nl.Factory.afterSetFilter);var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.Noise=void 0;const Ll=ut,$g=Mt,jg=rt,Wg=function(e){const t=this.noise()*255,n=e.data,i=n.length,s=t/2;for(let r=0;r<i;r+=4)n[r+0]+=s-2*s*Math.random(),n[r+1]+=s-2*s*Math.random(),n[r+2]+=s-2*s*Math.random()};Cr.Noise=Wg;Ll.Factory.addGetterSetter($g.Node,"noise",.2,(0,jg.getNumberValidator)(),Ll.Factory.afterSetFilter);var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.Pixelate=void 0;const Dl=ut,zg=Rt,Kg=Mt,Yg=rt,Xg=function(e){let t=Math.ceil(this.pixelSize()),n=e.width,i=e.height,s=Math.ceil(n/t),r=Math.ceil(i/t),o=e.data;if(t<=0){zg.Util.error("pixelSize value can not be <= 0");return}for(let a=0;a<s;a+=1)for(let l=0;l<r;l+=1){let h=0,c=0,f=0,_=0;const p=a*t,u=p+t,y=l*t,b=y+t;let x=0;for(let P=p;P<u;P+=1)if(!(P>=n))for(let d=y;d<b;d+=1){if(d>=i)continue;const g=(n*d+P)*4;h+=o[g+0],c+=o[g+1],f+=o[g+2],_+=o[g+3],x+=1}h=h/x,c=c/x,f=f/x,_=_/x;for(let P=p;P<u;P+=1)if(!(P>=n))for(let d=y;d<b;d+=1){if(d>=i)continue;const g=(n*d+P)*4;o[g+0]=h,o[g+1]=c,o[g+2]=f,o[g+3]=_}}};xr.Pixelate=Xg;Dl.Factory.addGetterSetter(Kg.Node,"pixelSize",8,(0,Yg.getNumberValidator)(),Dl.Factory.afterSetFilter);var wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.Posterize=void 0;const Gl=ut,qg=Mt,Jg=rt,Qg=function(e){const t=Math.round(this.levels()*254)+1,n=e.data,i=n.length,s=255/t;for(let r=0;r<i;r+=1)n[r]=Math.floor(n[r]/s)*s};wr.Posterize=Qg;Gl.Factory.addGetterSetter(qg.Node,"levels",.5,(0,Jg.getNumberValidator)(),Gl.Factory.afterSetFilter);var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.RGB=void 0;const Ps=ut,ma=Mt,Zg=rt,t5=function(e){const t=e.data,n=t.length,i=this.red(),s=this.green(),r=this.blue();for(let o=0;o<n;o+=4){const a=(.34*t[o]+.5*t[o+1]+.16*t[o+2])/255;t[o]=a*i,t[o+1]=a*s,t[o+2]=a*r,t[o+3]=t[o+3]}};Pr.RGB=t5;Ps.Factory.addGetterSetter(ma.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Ps.Factory.addGetterSetter(ma.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Ps.Factory.addGetterSetter(ma.Node,"blue",0,Zg.RGBComponent,Ps.Factory.afterSetFilter);var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.RGBA=void 0;const Gi=ut,Ar=Mt,e5=rt,n5=function(e){const t=e.data,n=t.length,i=this.red(),s=this.green(),r=this.blue(),o=this.alpha();for(let a=0;a<n;a+=4){const l=1-o;t[a]=i*o+t[a]*l,t[a+1]=s*o+t[a+1]*l,t[a+2]=r*o+t[a+2]*l}};Tr.RGBA=n5;Gi.Factory.addGetterSetter(Ar.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Gi.Factory.addGetterSetter(Ar.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Gi.Factory.addGetterSetter(Ar.Node,"blue",0,e5.RGBComponent,Gi.Factory.afterSetFilter);Gi.Factory.addGetterSetter(Ar.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});var Er={};Object.defineProperty(Er,"__esModule",{value:!0});Er.Sepia=void 0;const i5=function(e){const t=e.data,n=t.length;for(let i=0;i<n;i+=4){const s=t[i+0],r=t[i+1],o=t[i+2];t[i+0]=Math.min(255,s*.393+r*.769+o*.189),t[i+1]=Math.min(255,s*.349+r*.686+o*.168),t[i+2]=Math.min(255,s*.272+r*.534+o*.131)}};Er.Sepia=i5;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.Solarize=void 0;const s5=function(e){const t=e.data,n=e.width,i=e.height,s=n*4;let r=i;do{const o=(r-1)*s;let a=n;do{const l=o+(a-1)*4;let h=t[l],c=t[l+1],f=t[l+2];h>127&&(h=255-h),c>127&&(c=255-c),f>127&&(f=255-f),t[l]=h,t[l+1]=c,t[l+2]=f}while(--a)}while(--r)};Mr.Solarize=s5;var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.Threshold=void 0;const Il=ut,r5=Mt,o5=rt,a5=function(e){const t=this.threshold()*255,n=e.data,i=n.length;for(let s=0;s<i;s+=1)n[s]=n[s]<t?0:255};Rr.Threshold=a5;Il.Factory.addGetterSetter(r5.Node,"threshold",.5,(0,o5.getNumberValidator)(),Il.Factory.afterSetFilter);Object.defineProperty(Us,"__esModule",{value:!0});Us.Konva=void 0;const Bl=Zc,l5=Ws,c5=Ys,h5=Js,d5=Qs,u5=Zs,Ul=ti,f5=Wi,g5=ai,p5=Ki,_5=nr,m5=ir,y5=sr,b5=rr,v5=ci,S5=or,C5=ar,x5=lr,w5=hr,P5=dr,T5=ur,A5=fr,E5=pr,M5=_r,R5=mr,F5=yr,O5=br,k5=vr,N5=Sr,L5=Cr,D5=xr,G5=wr,I5=Pr,B5=Tr,U5=Er,V5=Mr,H5=Rr;Us.Konva=Bl.Konva.Util._assign(Bl.Konva,{Arc:l5.Arc,Arrow:c5.Arrow,Circle:h5.Circle,Ellipse:d5.Ellipse,Image:u5.Image,Label:Ul.Label,Tag:Ul.Tag,Line:f5.Line,Path:g5.Path,Rect:p5.Rect,RegularPolygon:_5.RegularPolygon,Ring:m5.Ring,Sprite:y5.Sprite,Star:b5.Star,Text:v5.Text,TextPath:S5.TextPath,Transformer:C5.Transformer,Wedge:x5.Wedge,Filters:{Blur:w5.Blur,Brighten:P5.Brighten,Contrast:T5.Contrast,Emboss:A5.Emboss,Enhance:E5.Enhance,Grayscale:M5.Grayscale,HSL:R5.HSL,HSV:F5.HSV,Invert:O5.Invert,Kaleidoscope:k5.Kaleidoscope,Mask:N5.Mask,Noise:L5.Noise,Pixelate:D5.Pixelate,Posterize:G5.Posterize,RGB:I5.RGB,RGBA:B5.RGBA,Sepia:U5.Sepia,Solarize:V5.Solarize,Threshold:H5.Threshold}});var $5=na.exports;Object.defineProperty($5,"__esModule",{value:!0});const j5=Us;na.exports=j5.Konva;var W5=na.exports;const Ii=Qc(W5);function Ts(e){if(!Ii.autoDrawEnabled){const t=e.getLayer()||e.getStage();t&&t.batchDraw()}}const Vl={key:!0,style:!0,elm:!0,isRootInsert:!0},lo=".vue-konva-event";function kh(e,t,n,i){const s=e.__konvaNode,r={};let o=!1;for(let a in n){if(Vl.hasOwnProperty(a))continue;const l=a.slice(0,2)==="on",h=n[a]!==t[a];if(l&&h){let c=a.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),s==null||s.off(c+lo,n[a])}!t.hasOwnProperty(a)&&(s==null||s.setAttr(a,void 0))}for(let a in t){if(Vl.hasOwnProperty(a))continue;let l=a.slice(0,2)==="on";const h=n[a]!==t[a];if(l&&h){let c=a.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),t[a]&&(s==null||s.off(c+lo),s==null||s.on(c+lo,t[a]))}!l&&(t[a]!==n[a]||i&&t[a]!==(s==null?void 0:s.getAttr(a)))&&(o=!0,r[a]=t[a])}o&&s&&(s.setAttrs(r),Ts(s))}const z5="v";function K5(e){function t(n){return n!=null&&n.__konvaNode?n:n!=null&&n.parent?t(n.parent):(console.error("vue-konva error: Can not find parent node"),null)}return t(e.parent)}function Nh(e){return e.component?e.component.__konvaNode||Nh(e.component.subTree):null}function Y5(e){const{el:t,component:n}=e,i=Nh(e);if(t!=null&&t.tagName&&n&&!i){const s=t.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${s}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return i}function X5(e){const t=s=>!!s&&typeof s=="object"&&"component"in s,n=s=>Array.isArray(s),i=s=>t(s)?[s,...i(s.children)]:n(s)?s.flatMap(i):[];return i(e.children)}function Lh(e,t){const n=X5(e),i=[];n.forEach(r=>{const o=Y5(r);o&&i.push(o)});let s=!1;i.forEach((r,o)=>{r.getZIndex()!==o&&(r.setZIndex(o),s=!0)}),s&&Ts(t)}var Hl;const q5=((Hl=Ii.default)==null?void 0:Hl.Stage)||Ii.Stage,J5=$e({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:i}){const s=Gs();if(!s)return;const r=ge({}),o=ce(null),a=new q5({width:e.config.width,height:e.config.height,container:document.createElement("div")});s.__konvaNode=a,c();function l(){return s==null?void 0:s.__konvaNode}function h(){return s==null?void 0:s.__konvaNode}function c(){if(!s)return;const f=r||{},_={...t,...e.config};kh(s,_,f,e.__useStrictMode),Object.assign(r,_)}return Oi(()=>{o.value&&(o.value.innerHTML="",a.container(o.value)),c()}),Xo(()=>{c(),Lh(s.subTree,a)}),wc(()=>{a.destroy()}),Ie(()=>e.config,c,{deep:!0}),i({getStage:h,getNode:l}),()=>{var f;return zc("div",{ref:o,style:t==null?void 0:t.style},(f=n.default)==null?void 0:f.call(n))}}}),Q5=".vue-konva-event",Z5={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function t3(e,t){return $e({name:e,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(n,{attrs:i,slots:s,expose:r}){const o=Gs();if(!o)return;const a=ge({}),l=new t;o.__konvaNode=l,o.vnode.__konvaNode=l,f();function h(){return o==null?void 0:o.__konvaNode}function c(){return o==null?void 0:o.__konvaNode}function f(){if(!o)return;const p={};for(const b in o==null?void 0:o.vnode.props)b.slice(0,2)==="on"&&(p[b]=o.vnode.props[b]);const u=a||{},y={...i,...n.config,...p};kh(o,y,u,n.__useStrictMode),Object.assign(a,y)}Oi(()=>{var u;const p=(u=K5(o))==null?void 0:u.__konvaNode;p&&"add"in p&&p.add(l),Ts(l)}),qo(()=>{Ts(l),l.destroy(),l.off(Q5)}),Xo(()=>{f(),Lh(o.subTree,l)}),Ie(()=>n.config,f,{deep:!0}),r({getStage:c,getNode:h});const _=Z5.hasOwnProperty(e);return()=>{var p;return _?zc("template",{},(p=s.default)==null?void 0:p.call(s)):null}}})}const e3={install:(e,t)=>{const n=(t==null?void 0:t.prefix)||z5,i=Ii.default||Ii,s={Arc:i.Arc,Arrow:i.Arrow,Circle:i.Circle,Ellipse:i.Ellipse,FastLayer:i.FastLayer,Group:i.Group,Image:i.Image,Label:i.Label,Layer:i.Layer,Line:i.Line,Path:i.Path,Rect:i.Rect,RegularPolygon:i.RegularPolygon,Ring:i.Ring,Shape:i.Shape,Sprite:i.Sprite,Star:i.Star,Tag:i.Tag,Text:i.Text,TextPath:i.TextPath,Transformer:i.Transformer,Wedge:i.Wedge,...t==null?void 0:t.customNodes};[J5,...Object.entries(s).map(([r,o])=>t3(r,o))].forEach(r=>{e.component(`${n}${r.name}`,r)})}},n3=["xlink:href"],i3=$e({__name:"index",props:{color:{type:String,default:"red"},name:{type:String,default:""},className:{type:String,default:""}},setup(e){const t=e,n=Li(()=>t.name?`#icon-${t.name}`:"#icon"),i=Li(()=>t.className?"svg-icon "+t.className:"svg-icon");return(s,r)=>(It(),Be("svg",{class:Bi(i.value),"aria-hidden":"true"},[Ot("use",{"xlink:href":n.value,rel:"external nofollow"},null,8,n3)],2))}});const s3=Hi(i3,[["__scopeId","data-v-faeee739"]]);if(typeof window<"u"){let e=function(){var t=document.body,n=document.getElementById("__svg__icons__dom__");n||(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.style.position="absolute",n.style.width="0",n.style.height="0",n.id="__svg__icons__dom__",n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),n.innerHTML='<symbol class="icon" viewBox="0 0 1024 1024"  id="icon-baocun"><path fill="currentColor" d="M256 128h-96a32 32 0 0 0-32 32v704c0 17.6 14.4 32 32 32h704a32 32 0 0 0 32-32V160a32 32 0 0 0-32-32h-96v320a64 64 0 0 1-64 64H320a64 64 0 0 1-64-64V128zM128 64h768a64 64 0 0 1 64 64v768a64 64 0 0 1-64 64H128a64 64 0 0 1-64-64V128a64 64 0 0 1 64-64zm192 64v288c0 17.6 14.4 32 32 32h320a32 32 0 0 0 32-32V128H320zm288 64c17.6 0 32 14.4 32 32v128a32 32 0 1 1-64 0V224c0-17.6 14.4-32 32-32z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-bianji"><path fill="#cdcdcd" d="M777.121 70.13c14.73 0 29.458 14.73 29.458 29.459s-14.729 29.458-29.458 29.458H129.047v765.906h765.906V313.16c0-14.729 14.73-29.458 29.458-29.458s29.458 14.729 29.458 29.458v581.794c0 29.458-29.458 58.916-58.916 58.916H129.047c-29.458 0-58.916-29.458-58.916-58.916V129.047c0-29.458 29.458-58.916 58.916-58.916H777.12zm169.384 7.365c14.729 14.73 14.729 29.458 0 44.187L416.262 725.57c-14.73 14.729-29.458 14.729-44.187 0-14.73-14.729-14.73-29.458 0-44.187L902.318 77.495c7.364-7.364 29.458-7.364 44.187 0zM777.121 70.13c14.73 0 29.458 14.73 29.458 29.459s-14.729 29.458-29.458 29.458H129.047v765.906h765.906V313.16c0-14.729 14.73-29.458 29.458-29.458s29.458 14.729 29.458 29.458v581.794c0 29.458-29.458 58.916-58.916 58.916H129.047c-29.458 0-58.916-29.458-58.916-58.916V129.047c0-29.458 29.458-58.916 58.916-58.916H777.12zm169.384 7.365c14.729 14.73 14.729 29.458 0 44.187L416.262 725.57c-14.73 14.729-29.458 14.729-44.187 0-14.73-14.729-14.73-29.458 0-44.187L902.318 77.495c7.364-7.364 29.458-7.364 44.187 0z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-booleanbeifen"><path fill="#cdcdcd" d="M512 192c179.2 0 320 140.8 320 320S691.2 832 512 832zm0 672c-192 0-352-160-352-352s160-352 352-352 352 160 352 352-160 352-352 352zm0-640c-160 0-288 128-288 288s128 288 288 288 288-128 288-288-128-288-288-288z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-fenxiang"><path fill="#cdcdcd" d="M910.222 62.578 796.444 859.022 512 688.356l22.756-45.512L756.622 773.69l79.645-557.511L460.8 654.222V870.4h-51.2V625.778l403.911-460.8L227.556 460.8l159.288 73.956-22.755 45.51L113.778 460.8 910.222 62.578zm0 0L796.444 859.022 512 688.356l22.756-45.512L756.622 773.69l79.645-557.511L460.8 654.222V870.4h-51.2V625.778l403.911-460.8L227.556 460.8l159.288 73.956-22.755 45.51L113.778 460.8 910.222 62.578z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-figma"><path d="M156 191.584C156 85.776 241.776 0 347.586 0h328.736c105.81 0 191.586 85.776 191.586 191.584 0 67-34.392 125.968-86.486 160.21 52.094 34.244 86.486 93.21 86.486 160.21 0 105.81-85.776 191.586-191.586 191.586h-4.16c-49.604 0-94.806-18.852-128.83-49.782v176.526c0 107.22-88.018 193.666-194.714 193.666C243.072 1024 156 938.486 156 832.414c0-66.996 34.39-125.96 86.48-160.204C190.386 637.966 156 579 156 512.004c0-67 34.392-125.966 86.484-160.21-52.09-34.242-86.484-93.21-86.484-160.21zm324.576 191.59h-132.99c-71.152 0-128.83 57.68-128.83 128.83 0 70.876 57.234 128.384 128.006 128.828l.824-.002h132.99V383.174zm62.756 128.83c0 71.15 57.678 128.83 128.83 128.83h4.16c71.152 0 128.83-57.68 128.83-128.83s-57.678-128.83-128.83-128.83h-4.16c-71.152 0-128.83 57.68-128.83 128.83zM347.586 703.59l-.824-.002c-70.772.442-128.006 57.95-128.006 128.826 0 70.89 58.45 128.83 129.862 128.83 72.564 0 131.958-58.872 131.958-130.91V703.59h-132.99zm0-640.834c-71.152 0-128.83 57.68-128.83 128.828 0 71.152 57.68 128.83 128.83 128.83h132.99V62.754h-132.99zm195.746 257.658h132.99c71.152 0 128.83-57.678 128.83-128.83 0-71.15-57.678-128.828-128.83-128.828h-132.99v257.658z" fill="#515151" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-fuzhijiahao"><path fill="#cdcdcd" d="M395.957 420.49V270.838a24.533 24.533 0 0 1 24.534-24.533h6.378a24.533 24.533 0 0 1 24.534 24.533v149.654h149.653a24.533 24.533 0 0 1 24.533 24.533v1.423a24.533 24.533 0 0 1-24.533 24.533H451.403v154.56a24.533 24.533 0 0 1-24.534 24.534h-6.378a24.533 24.533 0 0 1-24.534-24.534V470.98H246.304a24.533 24.533 0 0 1-24.533-24.533v-1.423a24.533 24.533 0 0 1 24.533-24.533h149.653zm361.376-104.757h147.2A49.067 49.067 0 0 1 953.6 364.8V880a49.067 49.067 0 0 1-49.067 49.067h-515.2A49.067 49.067 0 0 1 340.267 880v-98.133H94.933A24.533 24.533 0 0 1 70.4 757.333V119.467a24.533 24.533 0 0 1 24.533-24.534H732.8a24.533 24.533 0 0 1 24.533 24.534v196.266zm0 49.067v392.533a24.533 24.533 0 0 1-24.533 24.534H389.333V880h515.2V364.8h-147.2zm-49.066-49.067V144h-588.8v588.8h588.8V315.733z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-guanbi"><path fill="#cdcdcd" d="m228.693 176.583 4.608 3.869 284.16 284.216 284.16-284.216 4.665-3.869a33.508 33.508 0 0 1 42.667 51.2L564.85 512l284.217 284.16a33.508 33.508 0 0 1-42.724 51.2l-4.665-3.812-284.16-284.216-284.16 284.216-4.608 3.869a33.508 33.508 0 0 1-42.723-51.2L470.13 512 186.027 227.84a33.508 33.508 0 0 1 42.666-51.2z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-jiahao"><path fill="#cdcdcd" d="M884.392 476.688h-336.6v-336.6c0-19.422-15.891-35.312-35.313-35.312-19.421 0-35.311 15.89-35.311 35.312v336.6H140.567c-19.421 0-35.312 15.89-35.312 35.311 0 19.422 15.89 35.312 35.312 35.312h336.6v336.6c0 19.421 15.89 35.311 35.311 35.311 19.422 0 35.312-15.89 35.312-35.312V547.312h336.6c19.421 0 35.312-15.89 35.312-35.312.001-19.421-15.89-35.312-35.31-35.312z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-jiantoushang"><path fill="#cdcdcd" d="M289.45 656.327a42.667 42.667 0 0 1-63.715-56.32l4.153-4.779 281.77-274.887 277.39 264.135a42.667 42.667 0 0 1-53.93 65.82l-4.892-3.981-217.828-207.417-222.947 217.43z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-jiantouyou"><path fill="#cdcdcd" d="M367.673 289.45a42.667 42.667 0 0 1 56.32-63.715l4.779 4.153 274.887 281.77-264.135 277.39a42.667 42.667 0 0 1-65.82-53.93l3.981-4.892 207.417-217.828-217.43-222.947z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-jiantouzuo"><path fill="#cdcdcd" d="M656.327 734.55a42.667 42.667 0 0 1-56.32 63.715l-4.779-4.153-274.887-281.77 264.135-277.39a42.667 42.667 0 0 1 65.82 53.93l-3.981 4.892-207.417 217.828 217.43 222.947z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-move"><path d="M245.2 259.1h533.6v55.5H245.2zm0 226.8h533.6v55.5H245.2zm4.2 227H783v55.5H249.4z" fill="#515151" /></symbol>',t.insertBefore(n,t.lastChild)};var r3=e;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}const ya=of($f);ya.use(e3);ya.use(hf());ya.component("Icons",s3).mount("#app");
